<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>All Posts - Dokyung&#39;s DevOoOps</title>
        <link>https://huntedhappy.github.io/posts/</link>
        <description>All Posts | Dokyung&#39;s DevOoOps</description>
        <generator>Hugo -- gohugo.io</generator><language>en</language><managingEditor>huntedhappy@gmail.com (Dokyung)</managingEditor>
            <webMaster>huntedhappy@gmail.com (Dokyung)</webMaster><copyright>This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.</copyright><lastBuildDate>Mon, 28 Mar 2022 22:55:22 &#43;0900</lastBuildDate><atom:link href="https://huntedhappy.github.io/posts/" rel="self" type="application/rss+xml" /><item>
    <title>The Documentation VxRail</title>
    <link>https://huntedhappy.github.io/vxrail/</link>
    <pubDate>Mon, 28 Mar 2022 22:55:22 &#43;0900</pubDate>
    <author>Author</author>
    <guid>https://huntedhappy.github.io/vxrail/</guid>
    <description><![CDATA[<p>VxRail은 전체 스택 무결성 및 포괄적인 수명주기 관리로 비즈니스 변화에 신속하게 대응하는 인프라스트럭처를 제공하여 운영 효율성을 높이고, 위험을 줄이며, 팀이 비즈니스에 집중할 수 있도록 지원합니다.</p>
<h2 id="preconfig">PreConfig</h2>
<h3 id="dns-구성">DNS 구성</h3>
<table>
<thead>
<tr>
<th>Component Name</th>
<th>BaseDomain</th>
<th>A Record</th>
</tr>
</thead>
<tbody>
<tr>
<td>vcsa01</td>
<td>vxrail.local</td>
<td>192.168.215.10</td>
</tr>
<tr>
<td>vxmgr</td>
<td>vxrail.local</td>
<td>192.168.215.9</td>
</tr>
<tr>
<td>esxi01</td>
<td>vxrail.local</td>
<td>192.168.215.11</td>
</tr>
<tr>
<td>esxi02</td>
<td>vxrail.local</td>
<td>192.168.215.12</td>
</tr>
<tr>
<td>esxi03</td>
<td>vxrail.local</td>
<td>192.168.215.13</td>
</tr>
<tr>
<td>esxi04</td>
<td>vxrail.local</td>
<td>192.168.215.14</td>
</tr>
</tbody>
</table>
<h3 id="default-passwqord">Default Passwqord</h3>
<table>
<thead>
<tr>
<th>Component Name</th>
<th>Networking Configuration</th>
<th>Username</th>
<th>Default Password</th>
</tr>
</thead>
<tbody>
<tr>
<td>BIOS</td>
<td>N/A</td>
<td>192.168.215.10</td>
<td></td>
</tr>
<tr>
<td>iDRAC</td>
<td>DHCP</td>
<td>192.168.215.9</td>
<td>root</td>
</tr>
<tr>
<td>ESXi</td>
<td>DHCP</td>
<td>192.168.215.11</td>
<td>root</td>
</tr>
<tr>
<td>vCenter Server Applicance</td>
<td>root</td>
<td>vmware</td>
<td></td>
</tr>
<tr>
<td>VxRail Manager</td>
<td>192.168.10.200</td>
<td>root</td>
<td>Passw0rd!</td>
</tr>
<tr>
<td>VxRail Manager</td>
<td>192.168.10.200</td>
<td>mystic</td>
<td>VxRailManager@201602!</td>
</tr>
</tbody>
</table>
<h2 id="1-rasr을-통해-초기화">1. RASR을 통해 초기화</h2>
<p>기본적으로 VxRail장비가 입고가 되면 기본 이미지로 부팅이 되며 라이센스가 있을 경우 업그레이드를 할 수 있다.</p>
<ol>
<li>초기화를 하는 이유는 테스트 위해 60일 EVALUATION을 재사용하려면 RASR을 통해 공장 초기화를 해야 한다.</li>
<li>기존의 VxRail을 구성한 상태에서 증설을 위해 추가로 구성을 하게 될경우 기본 들어오는 버전이 낮거나 높을 수 있다. 이럴 경우 RASR을 통해 펌웨어, 이미지를 업그레이드 또는 다운그레이드를 통해 증설을 할 수 있다.</li>
<li>기본 설치되어 있는 VxRail이 테스트 하고자 하는 버전 보다 낮거나 또는 높거나 할 경우 변경을 할 수 있다.</li>
</ol>
<div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw"></i>초기화 방법<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><blockquote>
<ol>
<li>USB</li>
</ol>
<ul>
<li>장비 모든 부분의 버전을 업그레이드 및 다운그레이가 필요 할 경우 USB 방법사용, 또한 설치가 제일 빠름</li>
</ul>
</blockquote>
<blockquote>
<ol start="2">
<li>Virtual Media</li>
</ol>
<ul>
<li>iDRAC의 Virtual Media를 통해 설치 하는 방법 부분적 설치만 가능 (Firmware 등등 업그레이드 또는 다운그레이드 못함) 또한 설치가 느림</li>
</ul>
</blockquote>
</div>
        </div>
    </div>
<p>USB를 연결 한 후 iDRAC에서 Local SD Card로 부팅
<figure><figcaption>
            <h4>USB 설치#1</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>USB 설치#2</h4>
        </figcaption>
</figure>
</p>
<p>Advancde 항목으로 접근 
<figure><figcaption>
            <h4>Advanced</h4>
        </figcaption>
</figure>
</p>
<p>Install DUP(s)
펌웨어 등 업그레이드 및 다운그레이드할 내용이 있는지 확인이 필요
<figure><figcaption>
            <h4>Install DUP(s)#1</h4>
        </figcaption>
</figure>
</p>
<p>업그레이드 / 다운그레이드를 선택 후 업그레이드가 있는지 다운그레이드가 있는지 체크 후 있으면 설치
<figure><figcaption>
            <h4>Install DUP(s)#2</h4>
        </figcaption>
</figure>
</p>
<p>진행 시 재부팅이 여러번 발생 대략 30분 ~ 1시간 소요
<figure><figcaption>
            <h4>Install DUP(s)#3</h4>
        </figcaption>
</figure>
</p>
<p>DUP를 업그레이드 또는 다운그레이드 이후 [F]actory Reset 실행 (1시간 소요)</p>
<h2 id="2-esxi-초기-설정">2. ESXI 초기 설정</h2>
<p><figure><figcaption>
            <h4>ESXI#1</h4>
        </figcaption>
</figure>

ESXi Shell Enable을 통해 콘솔 접속
<figure><figcaption>
            <h4>ESXI#2</h4>
        </figcaption>
</figure>

esxcli vm process list 명령어를 VxRail Manager가 보이는 호스트를 찾는다.
아무곳에서나 해도 되지만. 시간이 오래 걸린다.
<figure><figcaption>
            <h4>ESXI#3</h4>
        </figcaption>
</figure>
</p>
<p>기본 디폴트 IP는 192.168.10.200이므로 통신이 된다면 VxRail Manager VM을 켜고 접속 하면 된다. 
만약 VLAN 또는 ESXI에 접근을 하고 싶으면 명령어로 VLAN 또는 IP를 설정 할 수 있다 또는 VM을 킬 수도 있다.
여기에서는 여러가지 방법을 설명하지는 않겠다. 기본 디폴트 IP와 변경하고자 하는 IP 둘다 통신이 되면 된다.</p>
<p>여러가지 방법론이 있겠지만, 신경을 쓰고 싶지 않다면 DEFAULT IP와 변경하고자 하는 IP 둘다 통신이 되는 것으로 테스트를 하면 좋을 것이다.</p>
<p>VLAN 3939가 실제적으로 Discovery를 하는 부분으로 스위치에서 3939설정을 해주면 나중에 호스트 증설을 할때 별도로 신경을 쓰지 않아도 된다.</p>
<div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw"></i>명령어<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">esxcli network vswitch standard portgroup list
esxcli network vswitch standard portgroup <span class="nb">set</span> -p <span class="s2">&#34;Private Management Network&#34;</span> -v <span class="m">0</span>
esxcli network ip interface list
esxcli network ip interface ipv4 <span class="nb">set</span> -i vmk2 -I 192.168.215.13 -N 255.255.255.0 -g 192.168.215.1 -t static
</code></pre></td></tr></table>
</div>
</div><p>VxRail Manager IP 변경 방법</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">vxrail-primary --setup --vxrail-address 192.168.215.9 --vxrail-netmask 255.255.255.0 --vxrail-gateway 192.168.215.1 --no-roll-back --verbose
</code></pre></td></tr></table>
</div>
</div></div>
        </div>
    </div>
<h2 id="3-init">3. INIT</h2>
<p>원하는 언어를 선택 할 수 있다.
<figure><figcaption>
            <h4>INIT#1</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>INIT#2</h4>
        </figcaption>
</figure>
</p>
<p>Standrad Cluster (3 or more hosts)는 3개이상의 VSAN 구성
VSAN 2-Node Cluster (2 hosts only) witness host 필요
Dynamic Node Cluster (2 or more hosts) VSAN 구성이 아닌 외부 스토리지로 구성 할 경우
<figure><figcaption>
            <h4>INIT#3</h4>
        </figcaption>
</figure>

설치가 잘 되었다면 아래와 같이 자동으로 Discovery가 됨
<figure><figcaption>
            <h4>INIT#4</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>INIT#5</h4>
        </figcaption>
</figure>
</p>
<p>JSON파일로 구성이 다 되어 있다면 JSON을 삽입 해도 되지만 없으면 Step-by-step으로 진행
<figure><figcaption>
            <h4>INIT#6</h4>
        </figcaption>
</figure>
</p>
<p><figure><figcaption>
            <h4>INIT#7</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>INIT#8</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>INIT#9</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>INIT#10</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>INIT#11</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>INIT#12</h4>
        </figcaption>
</figure>
</p>
<p>나중을 위해서 JSON파일을 다운로드 받을 수 있다.
<figure><figcaption>
            <h4>INIT#13</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>INIT#14</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>INIT#15</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>INIT#16</h4>
        </figcaption>
</figure>
</p>
<h2 id="4-host-add">4. HOST ADD</h2>
<p>만약 기존 구성된 클러스터와 다른 버전이 설치되어 있는 호스트라면 RSAR 초기화 필요</p>
<p>호스트를 추가 할 때 Host DISCOVERY가 되지 않으면 loudmouth restart를 해준다.</p>
<p><figure><figcaption>
            <h4>HOST ADD#1</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>HOST ADD#2</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>HOST ADD#3</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>HOST ADD#4</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>HOST ADD#5</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>HOST ADD#6</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>HOST ADD#7</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>HOST ADD#8</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>HOST ADD#9</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>HOST ADD#10</h4>
        </figcaption>
</figure>
</p>
<p>HOST ADD 시 HOST가 DISCOVERY되지 않는다면 loudmouth를 리스타트 해준다.
<figure><figcaption>
            <h4>HOST ADD#11</h4>
        </figcaption>
</figure>
</p>
<h2 id="5-upgrade">5. UPGRADE</h2>
<p><figure><figcaption>
            <h4>UPGRADE#1</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>UPGRADE#2</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>UPGRADE#3</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>UPGRADE#4</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>UPGRADE#5</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>UPGRADE#6</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>UPGRADE#7</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>UPGRADE#8</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>UPGRADE#9</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>UPGRADE#10</h4>
        </figcaption>
</figure>
</p>
<h2 id="6-vxrail-backup">6. VxRail BackUP</h2>
<p>백업 스케줄 설정 가능</p>
<p>VxRail 접속</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="c1">## 백업 리스트 확인</span>
<span class="nb">cd</span> /mystic/vxm_backup_restore
python vxm_backup_restore.py -l

<span class="c1">## 메뉴얼 백업</span>
python vxm_backup_restore.py -b
</code></pre></td></tr></table>
</div>
</div><p><figure><figcaption>
            <h4>스케쥴 백업</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>메뉴얼 백업</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>백업 리스트 확인</h4>
        </figcaption>
</figure>
</p>
<h2 id="6-vxrail-recovery">6. VxRail Recovery</h2>
<p>VxRail Manager가 망가졌을 경우 사용 가능</p>
<p>백업이 없으면 의미 없음</p>
<p>VxRail OVA 이미지 필요</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="c1">## 신규 설치한 vxrail manager 접속 후 IP 변경</span>
/opt/vmware/share/vami/vami_set_network eth0 STATICV4 192.168.215.9 255.255.255.0 192.168.215.1

<span class="c1">## Backup 확인</span>
<span class="nb">cd</span> /mystic/vxm_backup_restore
python vxm_backup_restore.py -l

<span class="c1">## Recovery 실행 1</span>
python vxm_backup_restore.py -r –-vcenter 192.168.215.10
</code></pre></td></tr></table>
</div>
</div>]]></description>
</item><item>
    <title>The Documentation TAP</title>
    <link>https://huntedhappy.github.io/tanzu-application-platform/</link>
    <pubDate>Wed, 09 Mar 2022 11:10:02 &#43;0900</pubDate>
    <author>Author</author>
    <guid>https://huntedhappy.github.io/tanzu-application-platform/</guid>
    <description><![CDATA[<h2 id="1-vmware-tap">1. VMware TAP?</h2>
<p>VMware Tanzu 애플리케이션 플랫폼은 개발자와 운영자가 Kubernetes 플랫폼에서 앱을 보다 쉽게 구축, 배포 및 관리할 수 있도록 도와주는 패키지된 구성 요소 집합입니다.</p>
<p>Tanzu 애플리케이션 플랫폼은 Kubernetes 기반 앱 개발의 내부 루프와 외부 루프 모두에서 워크플로를 단순화합니다.</p>
<ul>
<li>
<p>내부 루프: 내부 루프는 개발자가 앱을 코딩하고 테스트하는 로컬 개발 환경을 설명합니다. 내부 루프에서 발생하는 활동에는 코드 작성, 버전 제어 시스템에 커밋, 개발 또는 스테이징 환경에 배포, 테스트 및 추가 코드 변경이 포함됩니다.</p>
</li>
<li>
<p>외부 루프: 외부 루프는 앱을 프로덕션에 배포하고 시간이 지남에 따라 유지 관리하는 단계를 설명합니다. 예를 들어, 클라우드 네이티브 플랫폼에서 외부 루프에는 컨테이너 이미지 빌드, 컨테이너 보안 추가, 지속적 통합(CI) 및 지속적 전달(CD) 파이프라인 구성과 같은 활동이 포함됩니다.</p>
</li>
</ul>
<p>VMware Tanzu 애플리케이션 플랫폼은 보안 및 확장을 지원하는 모든 Kubernetes에서 코드를 실행할 수 있도록 사전 포장된 프로덕션 경로를 개발 팀에 제공합니다. 팀이 조직의 기본 설정에 따라 사용자 지정할 수 있도록 모듈화된 애플리케이션 인식 플랫폼입니다.</p>
<h3 id="주의-사항">주의 사항</h3>
<p>현재 버그가 있는것으로 보임 Private Harbor 구성시 사설 인증서 문제가 발생 하기 때문에 외부 Registry 활용 필요,
Github 연동시 Integration으로 설정</p>
<h3 id="사전-설치">사전 설치</h3>
<ul>
<li>DOCKER</li>
<li>GCR (Google Container Registry)</li>
<li>GitHub</li>
<li>DNS Records</li>
</ul>
<h3 id="resource-requirements">Resource requirements</h3>
<p>To deploy all Tanzu Application Platform packages, your cluster must have at least:</p>
<ul>
<li>8 CPUs for i9 (or equivalent) available to Tanzu Application Platform components</li>
<li>12 CPUs for i7 (or equivalent) available to Tanzu Application Platform components</li>
<li>8 GB of RAM across all nodes available to Tanzu Application Platform</li>
<li>12 GB of RAM is available to build and deploy applications, including Minikube. VMware recommends 16 GB of RAM for an optimal experience.</li>
<li>70 GB of disk space available per node
For the full profile, or use of Security Chain Security Tools - Store, your cluster must have a configured default StorageClass.</li>
</ul>
<h3 id="tools-and-cli-requirements">Tools and CLI requirements</h3>
<p>Installation requires:</p>
<ul>
<li>The Kubernetes CLI, kubectl, v1.20, v1.21 or v1.22, installed and authenticated with administrator rights for your target cluster. See Install Tools in the Kubernetes documentation.</li>
</ul>
<h2 id="2-tap">2. TAP</h2>
<h3 id="21-tanzu-network-등록">2.1. Tanzu Network 등록</h3>
<div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw"></i>Tanzu Network ID/PW<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="nb">export</span> <span class="nv">INSTALL_REGISTRY_USERNAME</span><span class="o">=</span>        <span class="c1">#### Tanzu Network ID</span>
<span class="nb">export</span> <span class="nv">INSTALL_REGISTRY_PASSWORD</span><span class="o">=</span>        <span class="c1">#### Tanzu Network PW</span>
<span class="nb">export</span> <span class="nv">INSTALL_REGISTRY_HOSTNAME</span><span class="o">=</span>registry.tanzu.vmware.com
<span class="nb">export</span> <span class="nv">TAP_VERSION</span><span class="o">=</span>1.0.1
</code></pre></td></tr></table>
</div>
</div><p>namespace 생성</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">kubectl create ns tap-install
</code></pre></td></tr></table>
</div>
</div><p>tanzu registry 추가</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">tanzu secret registry add tap-registry <span class="se">\
</span><span class="se"></span>  --username <span class="si">${</span><span class="nv">INSTALL_REGISTRY_USERNAME</span><span class="si">}</span> --password <span class="si">${</span><span class="nv">INSTALL_REGISTRY_PASSWORD</span><span class="si">}</span> <span class="se">\
</span><span class="se"></span>  --server <span class="si">${</span><span class="nv">INSTALL_REGISTRY_HOSTNAME</span><span class="si">}</span> <span class="se">\
</span><span class="se"></span>  --export-to-all-namespaces --yes --namespace tap-install
</code></pre></td></tr></table>
</div>
</div><p>tanzu repository 추가</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">tanzu package repository add tanzu-tap-repository <span class="se">\
</span><span class="se"></span>  --url registry.tanzu.vmware.com/tanzu-application-platform/tap-packages:<span class="nv">$TAP_VERSION</span> <span class="se">\
</span><span class="se"></span>  --namespace tap-install
</code></pre></td></tr></table>
</div>
</div></div>
        </div>
    </div>
<p><figure><figcaption>
            <h4>EULA 허용</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>EULA 허용</h4>
        </figcaption>
</figure>
</p>
<h3 id="22-tanzu-tap-설치-리스트-확인">2.2. Tanzu TAP 설치 리스트 확인</h3>
<div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw"></i>Registry / Repository 확인<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">tanzu secret registry list -n tap-install

tanzu package repository list -n tap-install

tanzu package repository get tanzu-tap-repository --namespace tap-install

tanzu package available list --namespace tap-install

tanzu package available list tap.tanzu.vmware.com --namespace tap-install
</code></pre></td></tr></table>
</div>
</div></div>
        </div>
    </div>
<p><figure><figcaption>
            <h4>Registry 리스트 확인</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>Repository 리스트 확인</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>Package 리스트 확인</h4>
        </figcaption>
</figure>
</p>
<h3 id="23-tanzu-tap-설치">2.3. Tanzu TAP 설치</h3>
<p>Private Harbor의 경우 사설 인증서가 문제가 있으므로 외부에서 제공하는 Registry 사용하는 필요.</p>
<div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw"></i>TAP 설치<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p>GCR에서 키값을 json으로 다운로드 받은 후 service_account_key[변수] 저장</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">tanzu secret registry add registry-credentials --server gcr.io --username _json_key --password <span class="s2">&#34;</span><span class="k">$(</span>cat main-xxxx-xxx-xxxx.json<span class="k">)</span><span class="s2">&#34;</span> --namespace tap-install
<span class="nv">service_account_key</span><span class="o">=</span><span class="s2">&#34;</span><span class="k">$(</span>cat main-xxxx-xxx-xxxx.json<span class="k">)</span><span class="s2">&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p>실행 파일 설정</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">cat <span class="s">&lt;&lt;EOF &gt; gcr-tap-values.yaml
</span><span class="s">profile: full
</span><span class="s">ceip_policy_disclosed: true # The value must be true for installation to succeed
</span><span class="s">
</span><span class="s">buildservice:
</span><span class="s">  kp_default_repository: &#34;gcr.io/{Registry ID}/build-service&#34;
</span><span class="s">  kp_default_repository_username: _json_key
</span><span class="s">  kp_default_repository_password: &#39;$(echo $service_account_key)&#39;
</span><span class="s">  tanzunet_username: &#34;&#34;                             ## Tanzu Network ID
</span><span class="s">  tanzunet_password: &#34;&#34;                             ## Tanzu Network Password
</span><span class="s">  descriptor_name: &#34;tap-1.0.0-full&#34;
</span><span class="s">  enable_automatic_dependency_updates: true
</span><span class="s">
</span><span class="s">supply_chain: basic
</span><span class="s">
</span><span class="s">cnrs:
</span><span class="s">  domain_name: tkg.io
</span><span class="s">
</span><span class="s">accelerator:
</span><span class="s">  server:
</span><span class="s">    service_type: &#34;ClusterIP&#34;
</span><span class="s">
</span><span class="s">ootb_supply_chain_basic:
</span><span class="s">  registry:
</span><span class="s">    server: &#34;gcr.io&#34;
</span><span class="s">    repository: &#34;{Registry ID}/supply_chain&#34;
</span><span class="s">  gitops:
</span><span class="s">    #repository_prefix: git@github.com:vmware-tanzu/
</span><span class="s">    #branch: main
</span><span class="s">    #user_name: supplychain
</span><span class="s">    #user_email: supplychain
</span><span class="s">    #commit_message: supplychain@cluster.local
</span><span class="s">    #ssh_secret: git-ssh  
</span><span class="s">    ssh_secret: &#34;&#34;
</span><span class="s">  cluster_builder: default
</span><span class="s">  service_account: default
</span><span class="s">
</span><span class="s">learningcenter:
</span><span class="s">  ingressDomain: &#34;tkg.io&#34;
</span><span class="s">  ingressClass: contour
</span><span class="s">  ingressSecret:
</span><span class="s">    secretName: workshops.example.com-tls
</span><span class="s">
</span><span class="s">contour:
</span><span class="s">  envoy:
</span><span class="s">    service:
</span><span class="s">      type: LoadBalancer
</span><span class="s">
</span><span class="s">tap_gui:
</span><span class="s">  service_type: ClusterIP
</span><span class="s">  ingressEnabled: &#34;true&#34;
</span><span class="s">  ingressDomain: &#34;tkg.io&#34;
</span><span class="s">  app_config:
</span><span class="s">    app:
</span><span class="s">      baseUrl: http://tap-gui.tkg.io
</span><span class="s">      support:
</span><span class="s">        url: https://tanzu.vmware.com/support
</span><span class="s">        items:
</span><span class="s">          - title: Contact Support
</span><span class="s">            icon: email
</span><span class="s">            links:
</span><span class="s">              - url: https://tanzu.vmware.com/support
</span><span class="s">                title: Tanzu Support Page
</span><span class="s">          - title: Documentation
</span><span class="s">            icon: docs
</span><span class="s">            links:
</span><span class="s">              - url: https://docs.vmware.com/en/VMware-Tanzu-Application-Platform/index.html
</span><span class="s">                title: Tanzu Application Platform Documentation
</span><span class="s">    integrations:
</span><span class="s">      github: # Other integrations available see NOTE below
</span><span class="s">        - host: github.com
</span><span class="s">          token: &#34;{GIT TOKEN}&#34;
</span><span class="s">
</span><span class="s">    catalog:
</span><span class="s">      locations:
</span><span class="s">        - type: url
</span><span class="s">          target: https://github.com/huntedhappy/tanzu-java-web-app/catalog-info.yaml
</span><span class="s">
</span><span class="s">    backend:
</span><span class="s">      baseUrl: http://tap-gui.tkg.io
</span><span class="s">      cors:
</span><span class="s">        origin: http://tap-gui.tkg.io
</span><span class="s">
</span><span class="s">#    ##Existing values file above (OIDC)
</span><span class="s">#    auth:
</span><span class="s">#      allowGuestAccess: true
</span><span class="s">#      environment: development
</span><span class="s">#      loginPage:
</span><span class="s">#        github:
</span><span class="s">#          title: Github Login
</span><span class="s">#          message: Enter with your GitHub account
</span><span class="s">#      providers:
</span><span class="s">#        github:
</span><span class="s">#          development:
</span><span class="s">#            clientId: 
</span><span class="s">#            clientSecret: 
</span><span class="s">#            ## uncomment if using GitHub Enterprise
</span><span class="s">#            # enterpriseInstanceUrl:
</span><span class="s">
</span><span class="s">metadata_store:
</span><span class="s">  app_service_type: LoadBalancer # (optional) Defaults to LoadBalancer. Change to NodePort for distributions that don&#39;t support LoadBalancer
</span><span class="s">
</span><span class="s">grype:
</span><span class="s">  namespace: &#34;tap-install&#34; # (optional) Defaults to default namespace.
</span><span class="s">EOF</span>
</code></pre></td></tr></table>
</div>
</div><p>TAP 설치</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">tanzu package install tap -p tap.tanzu.vmware.com -v <span class="nv">$TAP_VERSION</span> --values-file gcr-tap-values.yml -n tap-install
</code></pre></td></tr></table>
</div>
</div></div>
        </div>
    </div>
<figure><figcaption>
            <h4>TAP 설치 완료</h4>
        </figcaption>
</figure>

<h3 id="24-tanzu-tap-rbac-설정">2.4. Tanzu TAP RBAC 설정</h3>
<div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw"></i>RBAC 설정<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="nv">dockerconfigjson</span><span class="o">=</span><span class="s2">&#34;</span><span class="k">$(</span>kubectl get secret tbs-builder-secret-gen-placeholder-secret -n tap-install -o <span class="nv">jsonpath</span><span class="o">={</span>.data.<span class="se">\\</span>.dockerconfigjson<span class="o">}</span><span class="k">)</span><span class="s2">&#34;</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">cat <span class="s">&lt;&lt;EOF | tee rbac.yaml
</span><span class="s">apiVersion: v1
</span><span class="s">kind: Secret
</span><span class="s">metadata:
</span><span class="s">  name: tap-registry
</span><span class="s">  annotations:
</span><span class="s">    secretgen.carvel.dev/image-pull-secret: &#34;&#34;
</span><span class="s">type: kubernetes.io/dockerconfigjson
</span><span class="s">data:
</span><span class="s">  .dockerconfigjson: $(echo $dockerconfigjson)
</span><span class="s">---
</span><span class="s">apiVersion: v1
</span><span class="s">kind: ServiceAccount
</span><span class="s">metadata:
</span><span class="s">  name: default
</span><span class="s">secrets:
</span><span class="s">  - name: registry-credentials
</span><span class="s">imagePullSecrets:
</span><span class="s">  - name: registry-credentials
</span><span class="s">  - name: tap-registry
</span><span class="s">---
</span><span class="s">apiVersion: rbac.authorization.k8s.io/v1
</span><span class="s">kind: Role
</span><span class="s">metadata:
</span><span class="s">  name: default
</span><span class="s">rules:
</span><span class="s">- apiGroups: [source.toolkit.fluxcd.io]
</span><span class="s">  resources: [gitrepositories]
</span><span class="s">  verbs: [&#39;*&#39;]
</span><span class="s">- apiGroups: [source.apps.tanzu.vmware.com]
</span><span class="s">  resources: [imagerepositories]
</span><span class="s">  verbs: [&#39;*&#39;]
</span><span class="s">- apiGroups: [carto.run]
</span><span class="s">  resources: [deliverables, runnables]
</span><span class="s">  verbs: [&#39;*&#39;]
</span><span class="s">- apiGroups: [kpack.io]
</span><span class="s">  resources: [images]
</span><span class="s">  verbs: [&#39;*&#39;]
</span><span class="s">- apiGroups: [conventions.apps.tanzu.vmware.com]
</span><span class="s">  resources: [podintents]
</span><span class="s">  verbs: [&#39;*&#39;]
</span><span class="s">- apiGroups: [&#34;&#34;]
</span><span class="s">  resources: [&#39;configmaps&#39;]
</span><span class="s">  verbs: [&#39;*&#39;]
</span><span class="s">- apiGroups: [&#34;&#34;]
</span><span class="s">  resources: [&#39;pods&#39;]
</span><span class="s">  verbs: [&#39;list&#39;]
</span><span class="s">- apiGroups: [tekton.dev]
</span><span class="s">  resources: [taskruns, pipelineruns]
</span><span class="s">  verbs: [&#39;*&#39;]
</span><span class="s">- apiGroups: [tekton.dev]
</span><span class="s">  resources: [pipelines]
</span><span class="s">  verbs: [&#39;list&#39;]
</span><span class="s">- apiGroups: [kappctrl.k14s.io]
</span><span class="s">  resources: [apps]
</span><span class="s">  verbs: [&#39;*&#39;]
</span><span class="s">- apiGroups: [serving.knative.dev]
</span><span class="s">  resources: [&#39;services&#39;]
</span><span class="s">  verbs: [&#39;*&#39;]
</span><span class="s">- apiGroups: [servicebinding.io]
</span><span class="s">  resources: [&#39;servicebindings&#39;]
</span><span class="s">  verbs: [&#39;*&#39;]
</span><span class="s">- apiGroups: [services.apps.tanzu.vmware.com]
</span><span class="s">  resources: [&#39;resourceclaims&#39;]
</span><span class="s">  verbs: [&#39;*&#39;]
</span><span class="s">- apiGroups: [scanning.apps.tanzu.vmware.com]
</span><span class="s">  resources: [&#39;imagescans&#39;, &#39;sourcescans&#39;]
</span><span class="s">  verbs: [&#39;*&#39;]
</span><span class="s">---
</span><span class="s">apiVersion: rbac.authorization.k8s.io/v1
</span><span class="s">kind: RoleBinding
</span><span class="s">metadata:
</span><span class="s">  name: default
</span><span class="s">roleRef:
</span><span class="s">  apiGroup: rbac.authorization.k8s.io
</span><span class="s">  kind: Role
</span><span class="s">  name: default
</span><span class="s">subjects:
</span><span class="s">  - kind: ServiceAccount
</span><span class="s">    name: default
</span><span class="s">EOF</span>
</code></pre></td></tr></table>
</div>
</div></div>
        </div>
    </div>
<h3 id="25-workload-실행">2.5. workload 실행</h3>
<p>INGRESS IP 확인</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">kubectl get svc -n tap-install

kubectl get httpproxy -A
</code></pre></td></tr></table>
</div>
</div><p><figure><figcaption>
            <h4>ingress 및 DNS 확인</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>gui 접속 후 Tanzu Java Web App 실행</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>gui 접속 후 Tanzu Java Web App 실행</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>gui 접속 후 Tanzu Java Web App 실행</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>gui 접속 후 Tanzu Java Web App 다운로드</h4>
        </figcaption>
</figure>
</p>
<div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw"></i>GIT PUSH<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p>미리 GIT에 프로젝트 생성 후 다운로드 받은 ZIP파일 PUSH</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">unzip tanzu-java-web-app.zip

git init
git remote add origin git@github.com:huntedhappy/tanzu-java-web-app
git add .
git commit -m <span class="s1">&#39;first&#39;</span>
git push origin main
</code></pre></td></tr></table>
</div>
</div><p>apps workload 실행</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">tanzu apps workload create tanzu-java-web-app <span class="se">\
</span><span class="se"></span> --git-repo https://github.com/huntedhappy/tanzu-java-web-app <span class="se">\
</span><span class="se"></span> --git-branch main <span class="se">\
</span><span class="se"></span> --type web <span class="se">\
</span><span class="se"></span> --label apps.tanzu.vmware.com/has-tests<span class="o">=</span><span class="nb">true</span> <span class="se">\
</span><span class="se"></span> --yes <span class="se">\
</span><span class="se"></span> -n tap-install
</code></pre></td></tr></table>
</div>
</div><p>배포 상태 확인</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">tanzu apps cluster-supply-chain list

tanzu apps workload tail tanzu-java-web-app --since 10m --timestamp -n tap-install

kubectl get workload,gitrepository,pipelinerun,images.kpack,podintent,app,services.serving -n tap-install
</code></pre></td></tr></table>
</div>
</div></div>
        </div>
    </div>
<h2 id="3-visural-studio">3. Visural Studio</h2>
<h3 id="31-extenstion-설정">3.1. Extenstion 설정</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">apt search openjdk

apt install openjdk-11-jdk -y
java --version
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="nb">echo</span> <span class="s2">&#34;allow_k8s_contexts(&#39;</span><span class="k">$(</span>kubectl config current-context<span class="k">)</span><span class="s2">&#39;)&#34;</span> &gt;&gt; /var/tmp/tap/tanzu-java-web-app/Tiltfile

<span class="c1">## 맨아래 해당 context가 들어가 있는 것을 확인 할 수 있다.</span>
cat /var/tmp/tap/tanzu-java-web-app/Tiltfile

ctrl + <span class="nb">shift</span> + p
</code></pre></td></tr></table>
</div>
</div><p><figure><figcaption>
            <h4>VS 설정</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>VS 설정</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>VS 설정</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>VS 설정</h4>
        </figcaption>
</figure>
</p>
<h3 id="32-live-update-start">3.2. Live Update Start</h3>
<p>해당 부분을 수정 하면 자동으로 GIT에 업데이트가 되면서 바뀌는것을 볼수 있다.
<figure><figcaption>
            <h4>수정#1</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>수정#2</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>수정#3</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>수정#4</h4>
        </figcaption>
</figure>
</p>
]]></description>
</item><item>
    <title>The Documentation Practics</title>
    <link>https://huntedhappy.github.io/pratics/</link>
    <pubDate>Thu, 20 Jan 2022 23:06:39 &#43;0900</pubDate>
    <author>Author</author>
    <guid>https://huntedhappy.github.io/pratics/</guid>
    <description><![CDATA[<p>본 문서는 코딩 따라하기 테스트 페이지, 제가 다른 문서를 참조해서 따라해보는 페이지 입니다.</p>
<h2 id="1-nginx--php--mysql-연동">1. NGINX + PHP + MYSQL 연동</h2>
<p>환경</p>
<ul>
<li>UBUNTU: VERSION=&ldquo;20.04.3 LTS (Focal Fossa)&rdquo;</li>
<li>MYSQL: mysql  Ver 8.0.28 for Linux on x86_64 (MySQL Community Server - GPL)</li>
<li>PHP: PHP 7.4.3 (cli) (built: Nov 25 2021 23:16:22) ( NTS )</li>
<li>NGINX: nginx version: nginx/1.20.2</li>
</ul>
<hr>
<p>사전 지식</p>
<ul>
<li>NGINX</li>
<li>MYSQL</li>
<li>PHP</li>
</ul>
<h4 id="pdo">PDO</h4>
<p>PDO(PHP Data Objects)란 여러가지 데이터베이스를 제어하는 방법을 표준화시킨 것이다. 데이터베이스는 다양한 종류가 있다. 그리고 종류에 따라서 서로 다른 드라이브를 사용해 왔는데 드라이브의 종류에 따라서 데이터베이스를 제어하기 위한 API가 달랐다. PDO를 사용하면 동일한 방법으로 데이터베이스를 제어할 수 있다.</p>
<p>PDO를 사용하기 위해서는</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="c1">## 해당 파일에서</span>
vi /etc/php/7.4/fpm/php.ini

<span class="c1">## 아래 pdo_mysql 주석을 제거 한다.</span>
<span class="p">;</span><span class="nv">extension</span><span class="o">=</span>pdo_firebird
<span class="nv">extension</span><span class="o">=</span>pdo_mysql
<span class="p">;</span><span class="nv">extension</span><span class="o">=</span>pdo_oci
<span class="p">;</span><span class="nv">extension</span><span class="o">=</span>pdo_odbc
<span class="p">;</span><span class="nv">extension</span><span class="o">=</span>pdo_pgsql
<span class="p">;</span><span class="nv">extension</span><span class="o">=</span>pdo_sqlite
</code></pre></td></tr></table>
</div>
</div><div class="details admonition example open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-list-ol fa-fw"></i>mysql 사전 작업<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="c1">## 데이터베이스(스키마) 생성</span>
CREATE DATABASE opentutorials CHARACTER SET utf8 COLLATE utf8_general_ci<span class="p">;</span>

<span class="c1">## 설정 할 스키마 선택</span>
use opentutorials<span class="p">;</span>

<span class="c1">## TABLE 생성</span>
CREATE TABLE topic <span class="o">(</span>
    id  int<span class="o">(</span>11<span class="o">)</span> NOT NULL AUTO_INCREMENT,
    title  varchar<span class="o">(</span>255<span class="o">)</span> NOT NULL ,
    description  text NULL ,
    created  datetime NOT NULL ,
    PRIMARY KEY <span class="o">(</span>id<span class="o">)</span>
<span class="o">)</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div></div>
        </div>
    </div>
<div class="details admonition example open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-list-ol fa-fw"></i>PHP 구성<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p>input.php</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;!</span><span class="nx">DOCTYPE</span> <span class="nx">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">html</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">head</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">meta</span> <span class="nx">charset</span><span class="o">=</span><span class="s2">&#34;utf-8&#34;</span><span class="o">/&gt;</span>
    <span class="o">&lt;/</span><span class="nx">head</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">body</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">form</span> <span class="nx">action</span><span class="o">=</span><span class="s2">&#34;./process.php?mode=insert&#34;</span> <span class="nx">method</span><span class="o">=</span><span class="s2">&#34;POST&#34;</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">제목</span> <span class="o">:</span> <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&#34;text&#34;</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&#34;title&#34;</span><span class="o">&gt;&lt;/</span><span class="nx">p</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">본문</span> <span class="o">:</span> <span class="o">&lt;</span><span class="nx">textarea</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&#34;description&#34;</span> <span class="nx">id</span><span class="o">=</span><span class="s2">&#34;&#34;</span> <span class="nx">cols</span><span class="o">=</span><span class="s2">&#34;30&#34;</span> <span class="nx">rows</span><span class="o">=</span><span class="s2">&#34;10&#34;</span><span class="o">&gt;&lt;/</span><span class="nx">textarea</span><span class="o">&gt;&lt;/</span><span class="nx">p</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&#34;submit&#34;</span> <span class="o">/&gt;&lt;/</span><span class="nx">p</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="nx">form</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="nx">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="nx">html</span><span class="o">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>processphp</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>
<span class="nv">$dbh</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PDO</span><span class="p">(</span><span class="s1">&#39;mysql:host=localhost;dbname=opentutorials&#39;</span><span class="p">,</span> <span class="s1">&#39;root&#39;</span><span class="p">,</span> <span class="s1">&#39;111111&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="nx">PDO</span><span class="o">::</span><span class="na">MYSQL_ATTR_INIT_COMMAND</span> <span class="o">=&gt;</span> <span class="s2">&#34;SET NAMES utf8&#34;</span><span class="p">));</span>
<span class="k">switch</span><span class="p">(</span><span class="nv">$_GET</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]){</span>
    <span class="k">case</span> <span class="s1">&#39;insert&#39;</span><span class="o">:</span>
        <span class="nv">$stmt</span> <span class="o">=</span> <span class="nv">$dbh</span><span class="o">-&gt;</span><span class="na">prepare</span><span class="p">(</span><span class="s2">&#34;INSERT INTO topic (title, description, created) VALUES (:title, :description, now())&#34;</span><span class="p">);</span>
        <span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">bindParam</span><span class="p">(</span><span class="s1">&#39;:title&#39;</span><span class="p">,</span><span class="nv">$title</span><span class="p">);</span>
        <span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">bindParam</span><span class="p">(</span><span class="s1">&#39;:description&#39;</span><span class="p">,</span><span class="nv">$description</span><span class="p">);</span>
 
        <span class="nv">$title</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">];</span>
        <span class="nv">$description</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">];</span>
        <span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
        <span class="nx">header</span><span class="p">(</span><span class="s2">&#34;Location: list.php&#34;</span><span class="p">);</span> 
        <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="s1">&#39;delete&#39;</span><span class="o">:</span>
        <span class="nv">$stmt</span> <span class="o">=</span> <span class="nv">$dbh</span><span class="o">-&gt;</span><span class="na">prepare</span><span class="p">(</span><span class="s1">&#39;DELETE FROM topic WHERE id = :id&#39;</span><span class="p">);</span>
        <span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">bindParam</span><span class="p">(</span><span class="s1">&#39;:id&#39;</span><span class="p">,</span> <span class="nv">$id</span><span class="p">);</span>
 
        <span class="nv">$id</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">];</span>
        <span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
        <span class="nx">header</span><span class="p">(</span><span class="s2">&#34;Location: list.php&#34;</span><span class="p">);</span> 
        <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="s1">&#39;modify&#39;</span><span class="o">:</span>
        <span class="nv">$stmt</span> <span class="o">=</span> <span class="nv">$dbh</span><span class="o">-&gt;</span><span class="na">prepare</span><span class="p">(</span><span class="s1">&#39;UPDATE topic SET title = :title, description = :description WHERE id = :id&#39;</span><span class="p">);</span>
        <span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">bindParam</span><span class="p">(</span><span class="s1">&#39;:title&#39;</span><span class="p">,</span> <span class="nv">$title</span><span class="p">);</span>
        <span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">bindParam</span><span class="p">(</span><span class="s1">&#39;:description&#39;</span><span class="p">,</span> <span class="nv">$description</span><span class="p">);</span>
        <span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">bindParam</span><span class="p">(</span><span class="s1">&#39;:id&#39;</span><span class="p">,</span> <span class="nv">$id</span><span class="p">);</span>
 
        <span class="nv">$title</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">];</span>
        <span class="nv">$description</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">];</span>
        <span class="nv">$id</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">];</span>
        <span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
        <span class="nx">header</span><span class="p">(</span><span class="s2">&#34;Location: list.php?id=</span><span class="si">{</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">?&gt;</span><span class="err">
</span></code></pre></td></tr></table>
</div>
</div><p>list.php</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>
<span class="nv">$dbh</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PDO</span><span class="p">(</span><span class="s1">&#39;mysql:host=localhost;dbname=opentutorials&#39;</span><span class="p">,</span> <span class="s1">&#39;root&#39;</span><span class="p">,</span> <span class="s1">&#39;111111&#39;</span><span class="p">);</span>
<span class="nv">$stmt</span> <span class="o">=</span> <span class="nv">$dbh</span><span class="o">-&gt;</span><span class="na">prepare</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM topic&#39;</span><span class="p">);</span>
<span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
<span class="nv">$list</span> <span class="o">=</span> <span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">fetchAll</span><span class="p">();</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_GET</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]))</span> <span class="p">{</span>
    <span class="nv">$stmt</span> <span class="o">=</span> <span class="nv">$dbh</span><span class="o">-&gt;</span><span class="na">prepare</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM topic WHERE id = :id&#39;</span><span class="p">);</span>
    <span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">bindParam</span><span class="p">(</span><span class="s1">&#39;:id&#39;</span><span class="p">,</span> <span class="nv">$id</span><span class="p">,</span> <span class="nx">PDO</span><span class="o">::</span><span class="na">PARAM_INT</span><span class="p">);</span>
    <span class="nv">$id</span> <span class="o">=</span> <span class="nv">$_GET</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">];</span>
    <span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
    <span class="nv">$topic</span> <span class="o">=</span> <span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">fetch</span><span class="p">();</span>
<span class="p">}</span>
<span class="cp">?&gt;</span><span class="err">
</span><span class="err">&lt;!DOCTYPE html&gt;
</span><span class="err">&lt;html&gt;
</span><span class="err">    &lt;head&gt;
</span><span class="err">        &lt;meta charset=&#34;utf-8&#34; /&gt;
</span><span class="err">        &lt;style type=&#34;text/css&#34;&gt;
</span><span class="err">            body {
</span><span class="err">                font-size: 0.8em;
</span><span class="err">                font-family: dotum;
</span><span class="err">                line-height: 1.6em;
</span><span class="err">            }
</span><span class="err">            header {
</span><span class="err">                border-bottom: 1px solid #ccc;
</span><span class="err">                padding: 20px 0;
</span><span class="err">            }
</span><span class="err">            nav {
</span><span class="err">                float: left;
</span><span class="err">                margin-right: 20px;
</span><span class="err">                min-height: 1000px;
</span><span class="err">                min-width:150px;
</span><span class="err">                border-right: 1px solid #ccc;
</span><span class="err">            }
</span><span class="err">            nav ul {
</span><span class="err">                list-style: none;
</span><span class="err">                padding-left: 0;
</span><span class="err">                padding-right: 20px;
</span><span class="err">            }
</span><span class="err">            article {
</span><span class="err">                float: left;
</span><span class="err">            }
</span><span class="err">            .description{
</span><span class="err">                width:500px;
</span><span class="err">            }
</span><span class="err">        &lt;/style&gt;
</span><span class="err">    &lt;/head&gt;
</span><span class="err">   
</span><span class="err">    &lt;body id=&#34;body&#34;&gt;
</span><span class="err">        &lt;div&gt;
</span><span class="err">            &lt;nav&gt;
</span><span class="err">                &lt;ul&gt;
</span><span class="err">                    &lt;?php
</span><span class="err">                    foreach($list as $row) {
</span><span class="err">                        echo &#34;&lt;li&gt;&lt;a href=\&#34;?id={$row[&#39;id&#39;]}\&#34;&gt;&#34;.htmlspecialchars($row[&#39;title&#39;]).&#34;&lt;/a&gt;&lt;/li&gt;&#34;;                        }
</span><span class="err">                    ?&gt;
</span><span class="err">                &lt;/ul&gt;
</span><span class="err">                &lt;ul&gt;
</span><span class="err">                    &lt;li&gt;&lt;a href=&#34;input.php&#34;&gt;추가&lt;/a&gt;&lt;/li&gt;
</span><span class="err">                &lt;/ul&gt;
</span><span class="err">            &lt;/nav&gt;
</span><span class="err">            &lt;article&gt;
</span><span class="err">                &lt;?php
</span><span class="err">                if(!empty($topic)){
</span><span class="err">                ?&gt;
</span><span class="err">                &lt;h2&gt;&lt;?=htmlspecialchars($topic[&#39;title&#39;])?&gt;&lt;/h2&gt;
</span><span class="err">                &lt;div class=&#34;description&#34;&gt;
</span><span class="err">                    &lt;?=htmlspecialchars($topic[&#39;description&#39;])?&gt;
</span><span class="err">                &lt;/div&gt;
</span><span class="err">                &lt;div&gt;
</span><span class="err">                    &lt;a href=&#34;modify.php?id=&lt;?=$topic[&#39;id&#39;]?&gt;&#34;&gt;수정&lt;/a&gt;
</span><span class="err">                    &lt;form method=&#34;POST&#34; action=&#34;process.php?mode=delete&#34;&gt;
</span><span class="err">                        &lt;input type=&#34;hidden&#34; name=&#34;id&#34; value=&#34;&lt;?=$topic[&#39;id&#39;]?&gt;&#34; /&gt;
</span><span class="err">                        &lt;input type=&#34;submit&#34; value=&#34;삭제&#34; /&gt;
</span><span class="err">                    &lt;/form&gt;
</span><span class="err">                &lt;/div&gt;
</span><span class="err">                &lt;?php
</span><span class="err">                }
</span><span class="err">                ?&gt;
</span><span class="err">            &lt;/article&gt;
</span><span class="err">        &lt;/div&gt;
</span><span class="err">    &lt;/body&gt;
</span><span class="err">&lt;/html&gt;
</span></code></pre></td></tr></table>
</div>
</div><p>modify.php</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>
<span class="nv">$dbh</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PDO</span><span class="p">(</span><span class="s1">&#39;mysql:host=localhost;dbname=opentutorials&#39;</span><span class="p">,</span> <span class="s1">&#39;root&#39;</span><span class="p">,</span> <span class="s1">&#39;111111&#39;</span><span class="p">);</span>
<span class="nv">$stmt</span> <span class="o">=</span> <span class="nv">$dbh</span><span class="o">-&gt;</span><span class="na">prepare</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM topic WHERE id = :id&#39;</span><span class="p">);</span>
<span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">bindParam</span><span class="p">(</span><span class="s1">&#39;:id&#39;</span><span class="p">,</span> <span class="nv">$id</span><span class="p">,</span> <span class="nx">PDO</span><span class="o">::</span><span class="na">PARAM_INT</span><span class="p">);</span>
<span class="nv">$id</span> <span class="o">=</span> <span class="nv">$_GET</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">];</span>
<span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
<span class="nv">$topic</span> <span class="o">=</span> <span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">fetch</span><span class="p">();</span>
<span class="cp">?&gt;</span><span class="err">
</span><span class="err">&lt;!DOCTYPE html&gt;
</span><span class="err">&lt;html&gt;
</span><span class="err">    &lt;head&gt;
</span><span class="err">        &lt;meta charset=&#34;utf-8&#34;/&gt;
</span><span class="err">    &lt;/head&gt;   
</span><span class="err">    &lt;body&gt;
</span><span class="err">        &lt;form action=&#34;./process.php?mode=modify&#34; method=&#34;POST&#34;&gt;
</span><span class="err">            &lt;input type=&#34;hidden&#34; name=&#34;id&#34; value=&#34;&lt;?=$topic[&#39;id&#39;]?&gt;&#34; /&gt;
</span><span class="err">            &lt;p&gt;제목 : &lt;input type=&#34;text&#34; name=&#34;title&#34; value=&#34;&lt;?=htmlspecialchars($topic[&#39;title&#39;])?&gt;&#34;&gt;&lt;/p&gt;
</span><span class="err">            &lt;p&gt;본문 : &lt;textarea name=&#34;description&#34; id=&#34;&#34; cols=&#34;30&#34; rows=&#34;10&#34;&gt;&lt;?=htmlspecialchars($topic[&#39;description&#39;])?&gt;&lt;/textarea&gt;&lt;/p&gt;
</span><span class="err">            &lt;p&gt;&lt;input type=&#34;submit&#34; /&gt;&lt;/p&gt;
</span><span class="err">        &lt;/form&gt;
</span><span class="err">    &lt;/body&gt;
</span><span class="err">&lt;/html&gt;
</span></code></pre></td></tr></table>
</div>
</div></div>
        </div>
    </div>
<p>웹 접속 후 입력을 하게 되면
<figure><figcaption>
            <h4>입력#1</h4>
        </figcaption>
</figure>
</p>
<p>리스트에 추가가 된 것을 확인 할 수 있으며
<figure><figcaption>
            <h4>입력#2</h4>
        </figcaption>
</figure>
</p>
<p>아래와 같이 DB에 추가 된 것을 확인 할 수 있다.
<figure><figcaption>
            <h4>LIST</h4>
        </figcaption>
</figure>
</p>
<p>그리고 수정을 하게 되면
<figure><figcaption>
            <h4>수정#1</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>수정#2</h4>
        </figcaption>
</figure>
</p>
<p>DB에서도 수정이 되는 것을 확인 할 수 있다.
<figure><figcaption>
            <h4>수정#3</h4>
        </figcaption>
</figure>
</p>
<p><a href="https://opentutorials.org/module/6/5155" target="_blank" rel="noopener noreffer"><i class="fas fa-link"></i> 자료출처: 생활코딩</a></p>
<h2 id="2-golang">2. GOLANG</h2>
<p><a href="https://pkg.go.dev/fmt" target="_blank" rel="noopener noreffer"><i class="fas fa-link"></i> fmt link</a></p>
<h3 id="21-hello-world">2.1. Hello World</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nb">println</span><span class="p">(</span><span class="s">&#34;Hello World&#34;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><figure><figcaption>
            <h4>Hello World</h4>
        </figcaption>
</figure>

<h3 id="22-const">2.2. Const</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">conferenceName</span> <span class="p">=</span> <span class="s">&#34;Go Conference&#34;</span>
    <span class="kd">const</span> <span class="nx">conferenceTickets</span> <span class="p">=</span> <span class="mi">50</span>

    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Welcome to&#34;</span><span class="p">,</span> <span class="nx">conferenceName</span><span class="p">,</span> <span class="s">&#34;booking application&#34;</span><span class="p">)</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Get your tickets here to attend&#34;</span><span class="p">)</span>

    <span class="nx">conferenceTickets</span> <span class="p">=</span> <span class="mi">30</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">conferenceTickets</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>const로 정의를 하면 아래처럼 값을 변경 할 수 없다.
<figure><figcaption>
            <h4>const</h4>
        </figcaption>
</figure>
</p>
<p>var로 변경을 하면 아래에서 30으로 변경이 가능하다.
<figure><figcaption>
            <h4>var 변경</h4>
        </figcaption>
</figure>
</p>
<h3 id="23-printf">2.3. printf</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">conferenceName</span> <span class="p">=</span> <span class="s">&#34;Go Conference&#34;</span>
	<span class="kd">const</span> <span class="nx">conferenceTickets</span> <span class="p">=</span> <span class="mi">50</span>
	<span class="kd">var</span> <span class="nx">remainingTickets</span> <span class="p">=</span> <span class="mi">50</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Welcome to %v booking application\n&#34;</span><span class="p">,</span> <span class="nx">conferenceName</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;We have total of %v tickets and %v are still available\n&#34;</span><span class="p">,</span> <span class="nx">conferenceTickets</span><span class="p">,</span> <span class="nx">remainingTickets</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Get your tickets here to attend&#34;</span><span class="p">)</span>

<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p><figure><figcaption>
            <h4>printf#1</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>printf#2</h4>
        </figcaption>
</figure>
</p>
<h3 id="24-data-type">2.4. Data Type</h3>
<p><a href="https://www.tutorialspoint.com/go/go_data_types.htm" target="_blank" rel="noopener noreffer"><i class="fas fa-link"></i> Golang DataType</a></p>
<p>설정한 DataType을 확인 할 수 있다.
fmt.Printf(&ldquo;Welcome to %T booking application\n&rdquo;, conferenceName)</p>
<p>var conferenceName = &ldquo;Go Confernece&rdquo; -&gt; conferenceName := &ldquo;Go Conference&rdquo; 로 하면 알아서 타입을 변경 해준다. 만약 숫자를 집어 넣으면 알아서 int로 변경을 해줌</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">conferenceName</span> <span class="o">:=</span> <span class="s">&#34;Go Conference&#34;</span>
	<span class="kd">const</span> <span class="nx">conferenceTickets</span> <span class="p">=</span> <span class="mi">50</span>
	<span class="kd">var</span> <span class="nx">remainingTickets</span> <span class="p">=</span> <span class="mi">50</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;conferenceTickets is %T, remainingTickets is %T, conferencename is %T\n&#34;</span><span class="p">,</span> <span class="nx">conferenceTickets</span><span class="p">,</span> <span class="nx">remainingTickets</span><span class="p">,</span> <span class="nx">conferenceName</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Welcome to %v booking application\n&#34;</span><span class="p">,</span> <span class="nx">conferenceName</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;We have total of %v tickets and %v are still available\n&#34;</span><span class="p">,</span> <span class="nx">conferenceTickets</span><span class="p">,</span> <span class="nx">remainingTickets</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Get your tickets here to attend&#34;</span><span class="p">)</span>

	<span class="kd">var</span> <span class="nx">userName</span> <span class="kt">string</span>
	<span class="kd">var</span> <span class="nx">userTickets</span> <span class="kt">int</span>

	<span class="nx">userName</span> <span class="p">=</span> <span class="s">&#34;TOM&#34;</span>
	<span class="nx">userTickets</span> <span class="p">=</span> <span class="mi">2</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;User %v booked %v tickets.\n&#34;</span><span class="p">,</span> <span class="nx">userName</span><span class="p">,</span> <span class="nx">userTickets</span><span class="p">)</span>
<span class="p">}</span>


</code></pre></td></tr></table>
</div>
</div><p><figure><figcaption>
            <h4>datatype#1</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>datatype#2</h4>
        </figcaption>
</figure>
</p>
<p>%T로 했을 경우 DataType을 확인 할 수 있다.
<figure><figcaption>
            <h4>datatype#3</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>datatype#4</h4>
        </figcaption>
</figure>
</p>
<h3 id="24-input-포인터를-사용해야한다">2.4. INPUT, 포인터를 사용해야한다.</h3>
<p>&amp; &lt;- 포인터를 사용
fmt.Scan(&amp;useraName) 을하면 사용자가 입력을 할 수 있게 해준다.
포인터를 사용하지 않을 경우 저장된 메모리 값을 확인 할 수 있다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">conferenceName</span> <span class="o">:=</span> <span class="s">&#34;Go Conference&#34;</span>
	<span class="kd">const</span> <span class="nx">conferenceTickets</span> <span class="p">=</span> <span class="mi">50</span>
	<span class="kd">var</span> <span class="nx">remainingTickets</span> <span class="kt">uint</span> <span class="p">=</span> <span class="mi">50</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;conferenceTickets is %T, remainingTickets is %T, conferencename is %T\n&#34;</span><span class="p">,</span> <span class="nx">conferenceTickets</span><span class="p">,</span> <span class="nx">remainingTickets</span><span class="p">,</span> <span class="nx">conferenceName</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Welcome to %v booking application\n&#34;</span><span class="p">,</span> <span class="nx">conferenceName</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;We have total of %v tickets and %v are still available\n&#34;</span><span class="p">,</span> <span class="nx">conferenceTickets</span><span class="p">,</span> <span class="nx">remainingTickets</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Get your tickets here to attend&#34;</span><span class="p">)</span>

	<span class="kd">var</span> <span class="nx">firstName</span> <span class="kt">string</span>
	<span class="kd">var</span> <span class="nx">lastName</span> <span class="kt">string</span>
	<span class="kd">var</span> <span class="nx">email</span> <span class="kt">string</span>
	<span class="kd">var</span> <span class="nx">userTickets</span> <span class="kt">uint</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter Your firstName: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">firstName</span><span class="p">)</span>                       <span class="c1">// 이지점에서 사용자에게 물어봄
</span><span class="c1"></span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter Your lastName: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">lastName</span><span class="p">)</span>                        <span class="c1">// 이지점에서 사용자에게 물어봄
</span><span class="c1"></span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter Your email: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">email</span><span class="p">)</span>                           <span class="c1">// 이지점에서 사용자에게 물어봄
</span><span class="c1"></span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter number of tickets: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">userTickets</span><span class="p">)</span>                     <span class="c1">// 이지점에서 사용자에게 물어봄
</span><span class="c1"></span>
	<span class="nx">remainingTickets</span> <span class="p">=</span> <span class="nx">remainingTickets</span> <span class="o">-</span> <span class="nx">userTickets</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Thank you %v %v for booking %v tickets. You will receive a confirmation email at %v\n&#34;</span><span class="p">,</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">userTickets</span><span class="p">,</span> <span class="nx">email</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v tickets remaining for %v\n&#34;</span><span class="p">,</span> <span class="nx">remainingTickets</span><span class="p">,</span> <span class="nx">conferenceName</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></td></tr></table>
</div>
</div><figure><figcaption>
            <h4>input</h4>
        </figcaption>
</figure>

<h3 id="25-array">2.5. Array</h3>
<p>배열의 경우 공간중간 값이 없어도 빈공간으로 인식을 하기 때문에 메모리를 그만큼 할당 하게 된다.</p>
<p>배열 2가지가 추가됨</p>
<p>var bookings [50]string</p>
<p>bookings[0] = firstName + &quot; &quot; + lastName</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">conferenceName</span> <span class="o">:=</span> <span class="s">&#34;Go Conference&#34;</span>
	<span class="kd">const</span> <span class="nx">conferenceTickets</span> <span class="p">=</span> <span class="mi">50</span>
	<span class="kd">var</span> <span class="nx">remainingTickets</span> <span class="kt">uint</span> <span class="p">=</span> <span class="mi">50</span>
	<span class="kd">var</span> <span class="nx">bookings</span> <span class="p">[</span><span class="mi">50</span><span class="p">]</span><span class="kt">string</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;conferenceTickets is %T, remainingTickets is %T, conferencename is %T\n&#34;</span><span class="p">,</span> <span class="nx">conferenceTickets</span><span class="p">,</span> <span class="nx">remainingTickets</span><span class="p">,</span> <span class="nx">conferenceName</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Welcome to %v booking application\n&#34;</span><span class="p">,</span> <span class="nx">conferenceName</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;We have total of %v tickets and %v are still available\n&#34;</span><span class="p">,</span> <span class="nx">conferenceTickets</span><span class="p">,</span> <span class="nx">remainingTickets</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Get your tickets here to attend&#34;</span><span class="p">)</span>

	<span class="kd">var</span> <span class="nx">firstName</span> <span class="kt">string</span>
	<span class="kd">var</span> <span class="nx">lastName</span> <span class="kt">string</span>
	<span class="kd">var</span> <span class="nx">email</span> <span class="kt">string</span>
	<span class="kd">var</span> <span class="nx">userTickets</span> <span class="kt">uint</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter Your firstName: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">firstName</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter Your lastName: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">lastName</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter Your email: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">email</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter number of tickets: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">userTickets</span><span class="p">)</span>

	<span class="nx">remainingTickets</span> <span class="p">=</span> <span class="nx">remainingTickets</span> <span class="o">-</span> <span class="nx">userTickets</span>
	<span class="nx">bookings</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">=</span> <span class="nx">firstName</span> <span class="o">+</span> <span class="s">&#34; &#34;</span> <span class="o">+</span> <span class="nx">lastName</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;The whole array: %v\n&#34;</span><span class="p">,</span> <span class="nx">bookings</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;The first value: %v\n&#34;</span><span class="p">,</span> <span class="nx">bookings</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;The first value: %T\n&#34;</span><span class="p">,</span> <span class="nx">bookings</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;The first value: %v\n&#34;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nx">bookings</span><span class="p">))</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Thank you %v %v for booking %v tickets. You will receive a confirmation email at %v\n&#34;</span><span class="p">,</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">userTickets</span><span class="p">,</span> <span class="nx">email</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v tickets remaining for %v\n&#34;</span><span class="p">,</span> <span class="nx">remainingTickets</span><span class="p">,</span> <span class="nx">conferenceName</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></td></tr></table>
</div>
</div><p>공간이 이미 할당이 되어 있는 것을 확인 할 수 있다.
<figure><figcaption>
            <h4>array</h4>
        </figcaption>
</figure>
</p>
<h3 id="26-slice">2.6. Slice</h3>
<p>Slice구성 아래 2가지가 변경되고 하나 추가됨.
var bookings [50]string -&gt; bookings := []string{}</p>
<p>bookings[0] = firstName + &quot; &quot; + lastName -&gt;  bookings = append(bookings, firstName + &quot; &quot; + lastName)</p>
<p>fmt.Printf(&ldquo;These are all our booking: %v\n&rdquo;, bookings)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">conferenceName</span> <span class="o">:=</span> <span class="s">&#34;Go Conference&#34;</span>
	<span class="kd">const</span> <span class="nx">conferenceTickets</span> <span class="p">=</span> <span class="mi">50</span>
	<span class="kd">var</span> <span class="nx">remainingTickets</span> <span class="kt">uint</span> <span class="p">=</span> <span class="mi">50</span>
	<span class="nx">bookings</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{}</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;conferenceTickets is %T, remainingTickets is %T, conferencename is %T\n&#34;</span><span class="p">,</span> <span class="nx">conferenceTickets</span><span class="p">,</span> <span class="nx">remainingTickets</span><span class="p">,</span> <span class="nx">conferenceName</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Welcome to %v booking application\n&#34;</span><span class="p">,</span> <span class="nx">conferenceName</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;We have total of %v tickets and %v are still available\n&#34;</span><span class="p">,</span> <span class="nx">conferenceTickets</span><span class="p">,</span> <span class="nx">remainingTickets</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Get your tickets here to attend&#34;</span><span class="p">)</span>

	<span class="kd">var</span> <span class="nx">firstName</span> <span class="kt">string</span>
	<span class="kd">var</span> <span class="nx">lastName</span> <span class="kt">string</span>
	<span class="kd">var</span> <span class="nx">email</span> <span class="kt">string</span>
	<span class="kd">var</span> <span class="nx">userTickets</span> <span class="kt">uint</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter Your firstName: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">firstName</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter Your lastName: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">lastName</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter Your email: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">email</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter number of tickets: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">userTickets</span><span class="p">)</span>

	<span class="nx">remainingTickets</span> <span class="p">=</span> <span class="nx">remainingTickets</span> <span class="o">-</span> <span class="nx">userTickets</span>

	<span class="nx">bookings</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">bookings</span><span class="p">,</span> <span class="nx">firstName</span><span class="o">+</span><span class="s">&#34; &#34;</span><span class="o">+</span><span class="nx">lastName</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;The whole slice: %v\n&#34;</span><span class="p">,</span> <span class="nx">bookings</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;The first value: %v\n&#34;</span><span class="p">,</span> <span class="nx">bookings</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;The first type: %T\n&#34;</span><span class="p">,</span> <span class="nx">bookings</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;The first lgenth: %v\n&#34;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nx">bookings</span><span class="p">))</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Thank you %v %v for booking %v tickets. You will receive a confirmation email at %v\n&#34;</span><span class="p">,</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">userTickets</span><span class="p">,</span> <span class="nx">email</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v tickets remaining for %v\n&#34;</span><span class="p">,</span> <span class="nx">remainingTickets</span><span class="p">,</span> <span class="nx">conferenceName</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;These are all our booking: %v\n&#34;</span><span class="p">,</span> <span class="nx">bookings</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></td></tr></table>
</div>
</div><p>작성한 값만 들어가 있는 것을 확인 할 수 있다.
<figure><figcaption>
            <h4>slice</h4>
        </figcaption>
</figure>
</p>
<h3 id="27-loop--if">2.7 Loop &amp; If</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;fmt&#34;</span>
	<span class="s">&#34;strings&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">conferenceName</span> <span class="o">:=</span> <span class="s">&#34;Go Conference&#34;</span>
	<span class="kd">const</span> <span class="nx">conferenceTickets</span> <span class="kt">int</span> <span class="p">=</span> <span class="mi">50</span>
	<span class="kd">var</span> <span class="nx">remainingTickets</span> <span class="kt">uint</span> <span class="p">=</span> <span class="mi">50</span>
	<span class="nx">bookings</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{}</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;conferenceTickets is %T, remainingTickets is %T, conferencename is %T\n&#34;</span><span class="p">,</span> <span class="nx">conferenceTickets</span><span class="p">,</span> <span class="nx">remainingTickets</span><span class="p">,</span> <span class="nx">conferenceName</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Welcome to %v booking application\n&#34;</span><span class="p">,</span> <span class="nx">conferenceName</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;We have total of %v tickets and %v are still available\n&#34;</span><span class="p">,</span> <span class="nx">conferenceTickets</span><span class="p">,</span> <span class="nx">remainingTickets</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Get your tickets here to attend&#34;</span><span class="p">)</span>

	<span class="k">for</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">firstName</span> <span class="kt">string</span>
		<span class="kd">var</span> <span class="nx">lastName</span> <span class="kt">string</span>
		<span class="kd">var</span> <span class="nx">email</span> <span class="kt">string</span>
		<span class="kd">var</span> <span class="nx">userTickets</span> <span class="kt">uint</span>

		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter Your firstName: &#34;</span><span class="p">)</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">firstName</span><span class="p">)</span>

		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter Your lastName: &#34;</span><span class="p">)</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">lastName</span><span class="p">)</span>

		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter Your email: &#34;</span><span class="p">)</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">email</span><span class="p">)</span>

		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter number of tickets: &#34;</span><span class="p">)</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">userTickets</span><span class="p">)</span>

		<span class="nx">isValidName</span> <span class="o">:=</span> <span class="nb">len</span><span class="p">(</span><span class="nx">firstName</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="nb">len</span><span class="p">(</span><span class="nx">lastName</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span>
		<span class="nx">isValidEmail</span> <span class="o">:=</span> <span class="nx">strings</span><span class="p">.</span><span class="nf">Contains</span><span class="p">(</span><span class="nx">email</span><span class="p">,</span> <span class="s">&#34;@&#34;</span><span class="p">)</span>
		<span class="nx">isValidTicketNumber</span> <span class="o">:=</span> <span class="nx">userTickets</span> <span class="p">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">userTickets</span> <span class="o">&lt;=</span> <span class="nx">remainingTickets</span>

		<span class="k">if</span> <span class="nx">isValidName</span> <span class="o">&amp;&amp;</span> <span class="nx">isValidEmail</span> <span class="o">&amp;&amp;</span> <span class="nx">isValidTicketNumber</span> <span class="p">{</span>
			<span class="nx">remainingTickets</span> <span class="p">=</span> <span class="nx">remainingTickets</span> <span class="o">-</span> <span class="nx">userTickets</span>
			<span class="nx">bookings</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">bookings</span><span class="p">,</span> <span class="nx">firstName</span><span class="o">+</span><span class="s">&#34; &#34;</span><span class="o">+</span><span class="nx">lastName</span><span class="p">)</span>

			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Thank you %v %v for booking %v tickets. You will receive a confirmation email at %v\n&#34;</span><span class="p">,</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">userTickets</span><span class="p">,</span> <span class="nx">email</span><span class="p">)</span>
			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v tickets remaining for %v\n&#34;</span><span class="p">,</span> <span class="nx">remainingTickets</span><span class="p">,</span> <span class="nx">conferenceName</span><span class="p">)</span>

			<span class="nx">firstNames</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{}</span>
			<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">booking</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">bookings</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">names</span> <span class="p">=</span> <span class="nx">strings</span><span class="p">.</span><span class="nf">Fields</span><span class="p">(</span><span class="nx">booking</span><span class="p">)</span>
				<span class="nx">firstNames</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">firstNames</span><span class="p">,</span> <span class="nx">names</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
			<span class="p">}</span>
			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;These first names of bookings are: %v\n&#34;</span><span class="p">,</span> <span class="nx">firstNames</span><span class="p">)</span>

			<span class="k">if</span> <span class="nx">remainingTickets</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">{</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Our conference is booked out. Come back next year.&#34;</span><span class="p">)</span>
				<span class="k">break</span>
			<span class="p">}</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">!</span><span class="nx">isValidName</span> <span class="p">{</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;first name or last name you entered is too short&#34;</span><span class="p">)</span>
			<span class="p">}</span>
			<span class="k">if</span> <span class="p">!</span><span class="nx">isValidEmail</span> <span class="p">{</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;email address you entered doesn&#39;t contain @ sign&#34;</span><span class="p">)</span>
			<span class="p">}</span>
			<span class="k">if</span> <span class="p">!</span><span class="nx">isValidTicketNumber</span> <span class="p">{</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;number of tickets you entered is invalid&#34;</span><span class="p">)</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>

</code></pre></td></tr></table>
</div>
</div><h3 id="28-function">2.8. function</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;fmt&#34;</span>
	<span class="s">&#34;strings&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">conferenceName</span> <span class="o">:=</span> <span class="s">&#34;Go Conference&#34;</span>
	<span class="kd">const</span> <span class="nx">conferenceTickets</span> <span class="kt">int</span> <span class="p">=</span> <span class="mi">50</span>
	<span class="kd">var</span> <span class="nx">remainingTickets</span> <span class="kt">uint</span> <span class="p">=</span> <span class="mi">50</span>
	<span class="nx">bookings</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{}</span>

	<span class="nf">greetUsers</span><span class="p">(</span><span class="nx">conferenceName</span><span class="p">,</span> <span class="nx">conferenceTickets</span><span class="p">,</span> <span class="nx">remainingTickets</span><span class="p">)</span>

	<span class="k">for</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">firstName</span> <span class="kt">string</span>
		<span class="kd">var</span> <span class="nx">lastName</span> <span class="kt">string</span>
		<span class="kd">var</span> <span class="nx">email</span> <span class="kt">string</span>
		<span class="kd">var</span> <span class="nx">userTickets</span> <span class="kt">uint</span>

		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter Your firstName: &#34;</span><span class="p">)</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">firstName</span><span class="p">)</span>

		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter Your lastName: &#34;</span><span class="p">)</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">lastName</span><span class="p">)</span>

		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter Your email: &#34;</span><span class="p">)</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">email</span><span class="p">)</span>

		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter number of tickets: &#34;</span><span class="p">)</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">userTickets</span><span class="p">)</span>

		<span class="nx">isValidName</span> <span class="o">:=</span> <span class="nb">len</span><span class="p">(</span><span class="nx">firstName</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="nb">len</span><span class="p">(</span><span class="nx">lastName</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span>
		<span class="nx">isValidEmail</span> <span class="o">:=</span> <span class="nx">strings</span><span class="p">.</span><span class="nf">Contains</span><span class="p">(</span><span class="nx">email</span><span class="p">,</span> <span class="s">&#34;@&#34;</span><span class="p">)</span>
		<span class="nx">isValidTicketNumber</span> <span class="o">:=</span> <span class="nx">userTickets</span> <span class="p">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">userTickets</span> <span class="o">&lt;=</span> <span class="nx">remainingTickets</span>

		<span class="k">if</span> <span class="nx">isValidName</span> <span class="o">&amp;&amp;</span> <span class="nx">isValidEmail</span> <span class="o">&amp;&amp;</span> <span class="nx">isValidTicketNumber</span> <span class="p">{</span>
			<span class="nx">remainingTickets</span> <span class="p">=</span> <span class="nx">remainingTickets</span> <span class="o">-</span> <span class="nx">userTickets</span>
			<span class="nx">bookings</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">bookings</span><span class="p">,</span> <span class="nx">firstName</span><span class="o">+</span><span class="s">&#34; &#34;</span><span class="o">+</span><span class="nx">lastName</span><span class="p">)</span>

			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Thank you %v %v for booking %v tickets. You will receive a confirmation email at %v\n&#34;</span><span class="p">,</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">userTickets</span><span class="p">,</span> <span class="nx">email</span><span class="p">)</span>
			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v tickets remaining for %v\n&#34;</span><span class="p">,</span> <span class="nx">remainingTickets</span><span class="p">,</span> <span class="nx">conferenceName</span><span class="p">)</span>

			<span class="nf">printFirstNames</span><span class="p">(</span><span class="nx">bookings</span><span class="p">)</span>

			<span class="k">if</span> <span class="nx">remainingTickets</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">{</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Our conference is booked out. Come back next year.&#34;</span><span class="p">)</span>
				<span class="k">break</span>
			<span class="p">}</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">!</span><span class="nx">isValidName</span> <span class="p">{</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;first name or last name you entered is too short&#34;</span><span class="p">)</span>
			<span class="p">}</span>
			<span class="k">if</span> <span class="p">!</span><span class="nx">isValidEmail</span> <span class="p">{</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;email address you entered doesn&#39;t contain @ sign&#34;</span><span class="p">)</span>
			<span class="p">}</span>
			<span class="k">if</span> <span class="p">!</span><span class="nx">isValidTicketNumber</span> <span class="p">{</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;number of tickets you entered is invalid&#34;</span><span class="p">)</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">greetUsers</span><span class="p">(</span><span class="nx">confName</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">confTickets</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">remainingTickets</span> <span class="kt">uint</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Welcome to %v booking application\n&#34;</span><span class="p">,</span> <span class="nx">confName</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;We have total of %v tickets and %v are still available\n&#34;</span><span class="p">,</span> <span class="nx">confTickets</span><span class="p">,</span> <span class="nx">remainingTickets</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Get your tickets here to attend&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">printFirstNames</span><span class="p">(</span><span class="nx">bookings</span> <span class="p">[]</span><span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">firstNames</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{}</span>
	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">booking</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">bookings</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">names</span> <span class="p">=</span> <span class="nx">strings</span><span class="p">.</span><span class="nf">Fields</span><span class="p">(</span><span class="nx">booking</span><span class="p">)</span>
		<span class="nx">firstNames</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">firstNames</span><span class="p">,</span> <span class="nx">names</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
	<span class="p">}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;These first names of bookings are: %v\n&#34;</span><span class="p">,</span> <span class="nx">firstNames</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></td></tr></table>
</div>
</div><h3 id="29-return-func">2.9. return func</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;fmt&#34;</span>
	<span class="s">&#34;strings&#34;</span>
<span class="p">)</span>

<span class="kd">const</span> <span class="nx">conferenceTickets</span> <span class="kt">int</span> <span class="p">=</span> <span class="mi">50</span>

<span class="kd">var</span> <span class="nx">conferenceName</span> <span class="kt">string</span> <span class="p">=</span> <span class="s">&#34;Go Conference&#34;</span>
<span class="kd">var</span> <span class="nx">remainingTickets</span> <span class="kt">uint</span> <span class="p">=</span> <span class="mi">50</span>
<span class="kd">var</span> <span class="nx">bookings</span> <span class="p">=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>

	<span class="nf">greetUsers</span><span class="p">()</span>

	<span class="k">for</span> <span class="p">{</span>
		<span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">userTickets</span> <span class="o">:=</span> <span class="nf">getUserInput</span><span class="p">()</span>
		<span class="nx">isValidName</span><span class="p">,</span> <span class="nx">isValidEmail</span><span class="p">,</span> <span class="nx">isValidTicketNumber</span> <span class="o">:=</span> <span class="nf">validateUserInput</span><span class="p">(</span><span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">userTickets</span><span class="p">)</span>

		<span class="k">if</span> <span class="nx">isValidName</span> <span class="o">&amp;&amp;</span> <span class="nx">isValidEmail</span> <span class="o">&amp;&amp;</span> <span class="nx">isValidTicketNumber</span> <span class="p">{</span>

			<span class="nf">bookTicket</span><span class="p">(</span><span class="nx">userTickets</span><span class="p">,</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">email</span><span class="p">)</span>

			<span class="nx">firstNames</span> <span class="o">:=</span> <span class="nf">getFirstNames</span><span class="p">()</span>
			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;The first names of bookins are: %v\n&#34;</span><span class="p">,</span> <span class="nx">firstNames</span><span class="p">)</span>

			<span class="k">if</span> <span class="nx">remainingTickets</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">{</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Our conference is booked out. Come back next year.&#34;</span><span class="p">)</span>
				<span class="k">break</span>
			<span class="p">}</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">!</span><span class="nx">isValidName</span> <span class="p">{</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;first name or last name you entered is too short&#34;</span><span class="p">)</span>
			<span class="p">}</span>
			<span class="k">if</span> <span class="p">!</span><span class="nx">isValidEmail</span> <span class="p">{</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;email address you entered doesn&#39;t contain @ sign&#34;</span><span class="p">)</span>
			<span class="p">}</span>
			<span class="k">if</span> <span class="p">!</span><span class="nx">isValidTicketNumber</span> <span class="p">{</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;number of tickets you entered is invalid&#34;</span><span class="p">)</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">greetUsers</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Welcome to %v booking application\n&#34;</span><span class="p">,</span> <span class="nx">conferenceName</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;We have total of %v tickets and %v are still available\n&#34;</span><span class="p">,</span> <span class="nx">conferenceTickets</span><span class="p">,</span> <span class="nx">remainingTickets</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Get your tickets here to attend&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">getFirstNames</span><span class="p">()</span> <span class="p">[]</span><span class="kt">string</span> <span class="p">{</span>
	<span class="nx">firstNames</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{}</span>
	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">booking</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">bookings</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">names</span> <span class="p">=</span> <span class="nx">strings</span><span class="p">.</span><span class="nf">Fields</span><span class="p">(</span><span class="nx">booking</span><span class="p">)</span>
		<span class="nx">firstNames</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">firstNames</span><span class="p">,</span> <span class="nx">names</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="nx">firstNames</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">validateUserInput</span><span class="p">(</span><span class="nx">firstName</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">lastName</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">email</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">userTickets</span> <span class="kt">uint</span><span class="p">)</span> <span class="p">(</span><span class="kt">bool</span><span class="p">,</span> <span class="kt">bool</span><span class="p">,</span> <span class="kt">bool</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">isValidName</span> <span class="o">:=</span> <span class="nb">len</span><span class="p">(</span><span class="nx">firstName</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="nb">len</span><span class="p">(</span><span class="nx">lastName</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span>
	<span class="nx">isValidEmail</span> <span class="o">:=</span> <span class="nx">strings</span><span class="p">.</span><span class="nf">Contains</span><span class="p">(</span><span class="nx">email</span><span class="p">,</span> <span class="s">&#34;@&#34;</span><span class="p">)</span>
	<span class="nx">isValidTicketNumber</span> <span class="o">:=</span> <span class="nx">userTickets</span> <span class="p">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">userTickets</span> <span class="o">&lt;=</span> <span class="nx">remainingTickets</span>

	<span class="k">return</span> <span class="nx">isValidName</span><span class="p">,</span> <span class="nx">isValidEmail</span><span class="p">,</span> <span class="nx">isValidTicketNumber</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">getUserInput</span><span class="p">()</span> <span class="p">(</span><span class="kt">string</span><span class="p">,</span> <span class="kt">string</span><span class="p">,</span> <span class="kt">string</span><span class="p">,</span> <span class="kt">uint</span><span class="p">)</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">firstName</span> <span class="kt">string</span>
	<span class="kd">var</span> <span class="nx">lastName</span> <span class="kt">string</span>
	<span class="kd">var</span> <span class="nx">email</span> <span class="kt">string</span>
	<span class="kd">var</span> <span class="nx">userTickets</span> <span class="kt">uint</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter Your firstName: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">firstName</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter Your lastName: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">lastName</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter Your email: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">email</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter number of tickets: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">userTickets</span><span class="p">)</span>

	<span class="k">return</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">userTickets</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">bookTicket</span><span class="p">(</span><span class="nx">userTickets</span> <span class="kt">uint</span><span class="p">,</span> <span class="nx">firstName</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">lastName</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">email</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">remainingTickets</span> <span class="p">=</span> <span class="nx">remainingTickets</span> <span class="o">-</span> <span class="nx">userTickets</span>
	<span class="nx">bookings</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">bookings</span><span class="p">,</span> <span class="nx">firstName</span><span class="o">+</span><span class="s">&#34; &#34;</span><span class="o">+</span><span class="nx">lastName</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Thank you %v %v for booking %v tickets. You will receive a confirmation email at %v\n&#34;</span><span class="p">,</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">userTickets</span><span class="p">,</span> <span class="nx">email</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v tickets remaining for %v\n&#34;</span><span class="p">,</span> <span class="nx">remainingTickets</span><span class="p">,</span> <span class="nx">conferenceName</span><span class="p">)</span>

<span class="p">}</span>


</code></pre></td></tr></table>
</div>
</div><h3 id="210-package">2.10. package</h3>
<p>helper.go 파일 생성</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">package main

import <span class="s2">&#34;strings&#34;</span>

func validateUserInput<span class="o">(</span>firstName string, lastName string, email string, userTickets uint<span class="o">)</span> <span class="o">(</span>bool, bool, bool<span class="o">)</span> <span class="o">{</span>
	isValidName :<span class="o">=</span> len<span class="o">(</span>firstName<span class="o">)</span> &gt;<span class="o">=</span> <span class="m">2</span> <span class="o">&amp;&amp;</span> len<span class="o">(</span>lastName<span class="o">)</span> &gt;<span class="o">=</span> <span class="m">2</span>
	isValidEmail :<span class="o">=</span> strings.Contains<span class="o">(</span>email, <span class="s2">&#34;@&#34;</span><span class="o">)</span>
	isValidTicketNumber :<span class="o">=</span> userTickets &gt; <span class="m">0</span> <span class="o">&amp;&amp;</span> userTickets &lt;<span class="o">=</span> remainingTickets

	<span class="k">return</span> isValidName, isValidEmail, isValidTicketNumber
<span class="o">}</span>

</code></pre></td></tr></table>
</div>
</div><p>main.go</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span><span class="lnt">90
</span><span class="lnt">91
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;fmt&#34;</span>
	<span class="s">&#34;strings&#34;</span>
<span class="p">)</span>

<span class="kd">const</span> <span class="nx">conferenceTickets</span> <span class="kt">int</span> <span class="p">=</span> <span class="mi">50</span>

<span class="kd">var</span> <span class="nx">conferenceName</span> <span class="kt">string</span> <span class="p">=</span> <span class="s">&#34;Go Conference&#34;</span>
<span class="kd">var</span> <span class="nx">remainingTickets</span> <span class="kt">uint</span> <span class="p">=</span> <span class="mi">50</span>
<span class="kd">var</span> <span class="nx">bookings</span> <span class="p">=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>

	<span class="nf">greetUsers</span><span class="p">()</span>

	<span class="k">for</span> <span class="p">{</span>
		<span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">userTickets</span> <span class="o">:=</span> <span class="nf">getUserInput</span><span class="p">()</span>
		<span class="nx">isValidName</span><span class="p">,</span> <span class="nx">isValidEmail</span><span class="p">,</span> <span class="nx">isValidTicketNumber</span> <span class="o">:=</span> <span class="nf">validateUserInput</span><span class="p">(</span><span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">userTickets</span><span class="p">)</span>

		<span class="k">if</span> <span class="nx">isValidName</span> <span class="o">&amp;&amp;</span> <span class="nx">isValidEmail</span> <span class="o">&amp;&amp;</span> <span class="nx">isValidTicketNumber</span> <span class="p">{</span>

			<span class="nf">bookTicket</span><span class="p">(</span><span class="nx">userTickets</span><span class="p">,</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">email</span><span class="p">)</span>

			<span class="nx">firstNames</span> <span class="o">:=</span> <span class="nf">getFirstNames</span><span class="p">()</span>
			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;The first names of bookins are: %v\n&#34;</span><span class="p">,</span> <span class="nx">firstNames</span><span class="p">)</span>

			<span class="k">if</span> <span class="nx">remainingTickets</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">{</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Our conference is booked out. Come back next year.&#34;</span><span class="p">)</span>
				<span class="k">break</span>
			<span class="p">}</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">!</span><span class="nx">isValidName</span> <span class="p">{</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;first name or last name you entered is too short&#34;</span><span class="p">)</span>
			<span class="p">}</span>
			<span class="k">if</span> <span class="p">!</span><span class="nx">isValidEmail</span> <span class="p">{</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;email address you entered doesn&#39;t contain @ sign&#34;</span><span class="p">)</span>
			<span class="p">}</span>
			<span class="k">if</span> <span class="p">!</span><span class="nx">isValidTicketNumber</span> <span class="p">{</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;number of tickets you entered is invalid&#34;</span><span class="p">)</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">greetUsers</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Welcome to %v booking application\n&#34;</span><span class="p">,</span> <span class="nx">conferenceName</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;We have total of %v tickets and %v are still available\n&#34;</span><span class="p">,</span> <span class="nx">conferenceTickets</span><span class="p">,</span> <span class="nx">remainingTickets</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Get your tickets here to attend&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">getFirstNames</span><span class="p">()</span> <span class="p">[]</span><span class="kt">string</span> <span class="p">{</span>
	<span class="nx">firstNames</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{}</span>
	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">booking</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">bookings</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">names</span> <span class="p">=</span> <span class="nx">strings</span><span class="p">.</span><span class="nf">Fields</span><span class="p">(</span><span class="nx">booking</span><span class="p">)</span>
		<span class="nx">firstNames</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">firstNames</span><span class="p">,</span> <span class="nx">names</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="nx">firstNames</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">getUserInput</span><span class="p">()</span> <span class="p">(</span><span class="kt">string</span><span class="p">,</span> <span class="kt">string</span><span class="p">,</span> <span class="kt">string</span><span class="p">,</span> <span class="kt">uint</span><span class="p">)</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">firstName</span> <span class="kt">string</span>
	<span class="kd">var</span> <span class="nx">lastName</span> <span class="kt">string</span>
	<span class="kd">var</span> <span class="nx">email</span> <span class="kt">string</span>
	<span class="kd">var</span> <span class="nx">userTickets</span> <span class="kt">uint</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter Your firstName: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">firstName</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter Your lastName: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">lastName</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter Your email: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">email</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter number of tickets: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">userTickets</span><span class="p">)</span>

	<span class="k">return</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">userTickets</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">bookTicket</span><span class="p">(</span><span class="nx">userTickets</span> <span class="kt">uint</span><span class="p">,</span> <span class="nx">firstName</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">lastName</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">email</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">remainingTickets</span> <span class="p">=</span> <span class="nx">remainingTickets</span> <span class="o">-</span> <span class="nx">userTickets</span>
	<span class="nx">bookings</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">bookings</span><span class="p">,</span> <span class="nx">firstName</span><span class="o">+</span><span class="s">&#34; &#34;</span><span class="o">+</span><span class="nx">lastName</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Thank you %v %v for booking %v tickets. You will receive a confirmation email at %v\n&#34;</span><span class="p">,</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">userTickets</span><span class="p">,</span> <span class="nx">email</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v tickets remaining for %v\n&#34;</span><span class="p">,</span> <span class="nx">remainingTickets</span><span class="p">,</span> <span class="nx">conferenceName</span><span class="p">)</span>

<span class="p">}</span>

</code></pre></td></tr></table>
</div>
</div><h3 id="211-multi-package">2.11. multi package</h3>
<p>helper.go</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">helper</span>

<span class="kn">import</span> <span class="s">&#34;strings&#34;</span>

<span class="kd">func</span> <span class="nf">ValidateUserInput</span><span class="p">(</span><span class="nx">firstName</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">lastName</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">email</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">userTickets</span> <span class="kt">uint</span><span class="p">,</span> <span class="nx">remainingTickets</span> <span class="kt">uint</span><span class="p">)</span> <span class="p">(</span><span class="kt">bool</span><span class="p">,</span> <span class="kt">bool</span><span class="p">,</span> <span class="kt">bool</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">isValidName</span> <span class="o">:=</span> <span class="nb">len</span><span class="p">(</span><span class="nx">firstName</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="nb">len</span><span class="p">(</span><span class="nx">lastName</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span>
	<span class="nx">isValidEmail</span> <span class="o">:=</span> <span class="nx">strings</span><span class="p">.</span><span class="nf">Contains</span><span class="p">(</span><span class="nx">email</span><span class="p">,</span> <span class="s">&#34;@&#34;</span><span class="p">)</span>
	<span class="nx">isValidTicketNumber</span> <span class="o">:=</span> <span class="nx">userTickets</span> <span class="p">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">userTickets</span> <span class="o">&lt;=</span> <span class="nx">remainingTickets</span>

	<span class="k">return</span> <span class="nx">isValidName</span><span class="p">,</span> <span class="nx">isValidEmail</span><span class="p">,</span> <span class="nx">isValidTicketNumber</span>
<span class="p">}</span>


</code></pre></td></tr></table>
</div>
</div><p>main.go</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span><span class="lnt">90
</span><span class="lnt">91
</span><span class="lnt">92
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;GOLANG/helper&#34;</span>
	<span class="s">&#34;fmt&#34;</span>
	<span class="s">&#34;strings&#34;</span>
<span class="p">)</span>

<span class="kd">const</span> <span class="nx">conferenceTickets</span> <span class="kt">int</span> <span class="p">=</span> <span class="mi">50</span>

<span class="kd">var</span> <span class="nx">conferenceName</span> <span class="kt">string</span> <span class="p">=</span> <span class="s">&#34;Go Conference&#34;</span>
<span class="kd">var</span> <span class="nx">remainingTickets</span> <span class="kt">uint</span> <span class="p">=</span> <span class="mi">50</span>
<span class="kd">var</span> <span class="nx">bookings</span> <span class="p">=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>

	<span class="nf">greetUsers</span><span class="p">()</span>

	<span class="k">for</span> <span class="p">{</span>
		<span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">userTickets</span> <span class="o">:=</span> <span class="nf">getUserInput</span><span class="p">()</span>
		<span class="nx">isValidName</span><span class="p">,</span> <span class="nx">isValidEmail</span><span class="p">,</span> <span class="nx">isValidTicketNumber</span> <span class="o">:=</span> <span class="nx">helper</span><span class="p">.</span><span class="nf">ValidateUserInput</span><span class="p">(</span><span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">userTickets</span><span class="p">,</span> <span class="nx">remainingTickets</span><span class="p">)</span>

		<span class="k">if</span> <span class="nx">isValidName</span> <span class="o">&amp;&amp;</span> <span class="nx">isValidEmail</span> <span class="o">&amp;&amp;</span> <span class="nx">isValidTicketNumber</span> <span class="p">{</span>

			<span class="nf">bookTicket</span><span class="p">(</span><span class="nx">userTickets</span><span class="p">,</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">email</span><span class="p">)</span>

			<span class="nx">firstNames</span> <span class="o">:=</span> <span class="nf">getFirstNames</span><span class="p">()</span>
			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;The first names of bookins are: %v\n&#34;</span><span class="p">,</span> <span class="nx">firstNames</span><span class="p">)</span>

			<span class="k">if</span> <span class="nx">remainingTickets</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">{</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Our conference is booked out. Come back next year.&#34;</span><span class="p">)</span>
				<span class="k">break</span>
			<span class="p">}</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">!</span><span class="nx">isValidName</span> <span class="p">{</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;first name or last name you entered is too short&#34;</span><span class="p">)</span>
			<span class="p">}</span>
			<span class="k">if</span> <span class="p">!</span><span class="nx">isValidEmail</span> <span class="p">{</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;email address you entered doesn&#39;t contain @ sign&#34;</span><span class="p">)</span>
			<span class="p">}</span>
			<span class="k">if</span> <span class="p">!</span><span class="nx">isValidTicketNumber</span> <span class="p">{</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;number of tickets you entered is invalid&#34;</span><span class="p">)</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">greetUsers</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Welcome to %v booking application\n&#34;</span><span class="p">,</span> <span class="nx">conferenceName</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;We have total of %v tickets and %v are still available\n&#34;</span><span class="p">,</span> <span class="nx">conferenceTickets</span><span class="p">,</span> <span class="nx">remainingTickets</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Get your tickets here to attend&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">getFirstNames</span><span class="p">()</span> <span class="p">[]</span><span class="kt">string</span> <span class="p">{</span>
	<span class="nx">firstNames</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{}</span>
	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">booking</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">bookings</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">names</span> <span class="p">=</span> <span class="nx">strings</span><span class="p">.</span><span class="nf">Fields</span><span class="p">(</span><span class="nx">booking</span><span class="p">)</span>
		<span class="nx">firstNames</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">firstNames</span><span class="p">,</span> <span class="nx">names</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="nx">firstNames</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">getUserInput</span><span class="p">()</span> <span class="p">(</span><span class="kt">string</span><span class="p">,</span> <span class="kt">string</span><span class="p">,</span> <span class="kt">string</span><span class="p">,</span> <span class="kt">uint</span><span class="p">)</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">firstName</span> <span class="kt">string</span>
	<span class="kd">var</span> <span class="nx">lastName</span> <span class="kt">string</span>
	<span class="kd">var</span> <span class="nx">email</span> <span class="kt">string</span>
	<span class="kd">var</span> <span class="nx">userTickets</span> <span class="kt">uint</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter Your firstName: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">firstName</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter Your lastName: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">lastName</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter Your email: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">email</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter number of tickets: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">userTickets</span><span class="p">)</span>

	<span class="k">return</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">userTickets</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">bookTicket</span><span class="p">(</span><span class="nx">userTickets</span> <span class="kt">uint</span><span class="p">,</span> <span class="nx">firstName</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">lastName</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">email</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">remainingTickets</span> <span class="p">=</span> <span class="nx">remainingTickets</span> <span class="o">-</span> <span class="nx">userTickets</span>
	<span class="nx">bookings</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">bookings</span><span class="p">,</span> <span class="nx">firstName</span><span class="o">+</span><span class="s">&#34; &#34;</span><span class="o">+</span><span class="nx">lastName</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Thank you %v %v for booking %v tickets. You will receive a confirmation email at %v\n&#34;</span><span class="p">,</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">userTickets</span><span class="p">,</span> <span class="nx">email</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v tickets remaining for %v\n&#34;</span><span class="p">,</span> <span class="nx">remainingTickets</span><span class="p">,</span> <span class="nx">conferenceName</span><span class="p">)</span>

<span class="p">}</span>

</code></pre></td></tr></table>
</div>
</div><figure><figcaption>
            <h4>multi pacakge</h4>
        </figcaption>
</figure>

<h3 id="212-maps">2.12. MAPS</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span><span class="lnt">90
</span><span class="lnt">91
</span><span class="lnt">92
</span><span class="lnt">93
</span><span class="lnt">94
</span><span class="lnt">95
</span><span class="lnt">96
</span><span class="lnt">97
</span><span class="lnt">98
</span><span class="lnt">99
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;fmt&#34;</span>
	<span class="s">&#34;strconv&#34;</span>
<span class="p">)</span>

<span class="kd">const</span> <span class="nx">conferenceTickets</span> <span class="kt">int</span> <span class="p">=</span> <span class="mi">50</span>

<span class="kd">var</span> <span class="nx">conferenceName</span> <span class="kt">string</span> <span class="p">=</span> <span class="s">&#34;Go Conference&#34;</span>
<span class="kd">var</span> <span class="nx">remainingTickets</span> <span class="kt">uint</span> <span class="p">=</span> <span class="mi">50</span>
<span class="kd">var</span> <span class="nx">bookings</span> <span class="p">=</span> <span class="nb">make</span><span class="p">([]</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>

	<span class="nf">greetUsers</span><span class="p">()</span>

	<span class="k">for</span> <span class="p">{</span>
		<span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">userTickets</span> <span class="o">:=</span> <span class="nf">getUserInput</span><span class="p">()</span>
		<span class="nx">isValidName</span><span class="p">,</span> <span class="nx">isValidEmail</span><span class="p">,</span> <span class="nx">isValidTicketNumber</span> <span class="o">:=</span> <span class="nf">validateUserInput</span><span class="p">(</span><span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">userTickets</span><span class="p">)</span>

		<span class="k">if</span> <span class="nx">isValidName</span> <span class="o">&amp;&amp;</span> <span class="nx">isValidEmail</span> <span class="o">&amp;&amp;</span> <span class="nx">isValidTicketNumber</span> <span class="p">{</span>

			<span class="nf">bookTicket</span><span class="p">(</span><span class="nx">userTickets</span><span class="p">,</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">email</span><span class="p">)</span>

			<span class="nx">firstNames</span> <span class="o">:=</span> <span class="nf">getFirstNames</span><span class="p">()</span>
			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;The first names of bookins are: %v\n&#34;</span><span class="p">,</span> <span class="nx">firstNames</span><span class="p">)</span>

			<span class="k">if</span> <span class="nx">remainingTickets</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">{</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Our conference is booked out. Come back next year.&#34;</span><span class="p">)</span>
				<span class="k">break</span>
			<span class="p">}</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">!</span><span class="nx">isValidName</span> <span class="p">{</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;first name or last name you entered is too short&#34;</span><span class="p">)</span>
			<span class="p">}</span>
			<span class="k">if</span> <span class="p">!</span><span class="nx">isValidEmail</span> <span class="p">{</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;email address you entered doesn&#39;t contain @ sign&#34;</span><span class="p">)</span>
			<span class="p">}</span>
			<span class="k">if</span> <span class="p">!</span><span class="nx">isValidTicketNumber</span> <span class="p">{</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;number of tickets you entered is invalid&#34;</span><span class="p">)</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">greetUsers</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Welcome to %v booking application\n&#34;</span><span class="p">,</span> <span class="nx">conferenceName</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;We have total of %v tickets and %v are still available\n&#34;</span><span class="p">,</span> <span class="nx">conferenceTickets</span><span class="p">,</span> <span class="nx">remainingTickets</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Get your tickets here to attend&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">getFirstNames</span><span class="p">()</span> <span class="p">[]</span><span class="kt">string</span> <span class="p">{</span>
	<span class="nx">firstNames</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{}</span>
	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">booking</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">bookings</span> <span class="p">{</span>
		<span class="nx">firstNames</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">firstNames</span><span class="p">,</span> <span class="nx">booking</span><span class="p">[</span><span class="s">&#34;firtName&#34;</span><span class="p">])</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="nx">firstNames</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">getUserInput</span><span class="p">()</span> <span class="p">(</span><span class="kt">string</span><span class="p">,</span> <span class="kt">string</span><span class="p">,</span> <span class="kt">string</span><span class="p">,</span> <span class="kt">uint</span><span class="p">)</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">firstName</span> <span class="kt">string</span>
	<span class="kd">var</span> <span class="nx">lastName</span> <span class="kt">string</span>
	<span class="kd">var</span> <span class="nx">email</span> <span class="kt">string</span>
	<span class="kd">var</span> <span class="nx">userTickets</span> <span class="kt">uint</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter Your firstName: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">firstName</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter Your lastName: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">lastName</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter Your email: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">email</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter number of tickets: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">userTickets</span><span class="p">)</span>

	<span class="k">return</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">userTickets</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">bookTicket</span><span class="p">(</span><span class="nx">userTickets</span> <span class="kt">uint</span><span class="p">,</span> <span class="nx">firstName</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">lastName</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">email</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">remainingTickets</span> <span class="p">=</span> <span class="nx">remainingTickets</span> <span class="o">-</span> <span class="nx">userTickets</span>

	<span class="kd">var</span> <span class="nx">userData</span> <span class="p">=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">)</span>
	<span class="nx">userData</span><span class="p">[</span><span class="s">&#34;firstName&#34;</span><span class="p">]</span> <span class="p">=</span> <span class="nx">firstName</span>
	<span class="nx">userData</span><span class="p">[</span><span class="s">&#34;lastName&#34;</span><span class="p">]</span> <span class="p">=</span> <span class="nx">lastName</span>
	<span class="nx">userData</span><span class="p">[</span><span class="s">&#34;email&#34;</span><span class="p">]</span> <span class="p">=</span> <span class="nx">email</span>
	<span class="nx">userData</span><span class="p">[</span><span class="s">&#34;numberOfTickets&#34;</span><span class="p">]</span> <span class="p">=</span> <span class="nx">strconv</span><span class="p">.</span><span class="nf">FormatUint</span><span class="p">(</span><span class="nb">uint64</span><span class="p">(</span><span class="nx">userTickets</span><span class="p">),</span> <span class="mi">10</span><span class="p">)</span>

	<span class="nx">bookings</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">bookings</span><span class="p">,</span> <span class="nx">userData</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;List of bookings is %v\n&#34;</span><span class="p">,</span> <span class="nx">bookings</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Thank you %v %v for booking %v tickets. You will receive a confirmation email at %v\n&#34;</span><span class="p">,</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">userTickets</span><span class="p">,</span> <span class="nx">email</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v tickets remaining for %v\n&#34;</span><span class="p">,</span> <span class="nx">remainingTickets</span><span class="p">,</span> <span class="nx">conferenceName</span><span class="p">)</span>

<span class="p">}</span>

</code></pre></td></tr></table>
</div>
</div><figure><figcaption>
            <h4>maps</h4>
        </figcaption>
</figure>

<h3 id="213-struct">2.13. struct</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;fmt&#34;</span>
<span class="p">)</span>

<span class="kd">const</span> <span class="nx">conferenceTickets</span> <span class="kt">int</span> <span class="p">=</span> <span class="mi">50</span>

<span class="kd">var</span> <span class="nx">conferenceName</span> <span class="kt">string</span> <span class="p">=</span> <span class="s">&#34;Go Conference&#34;</span>
<span class="kd">var</span> <span class="nx">remainingTickets</span> <span class="kt">uint</span> <span class="p">=</span> <span class="mi">50</span>
<span class="kd">var</span> <span class="nx">bookings</span> <span class="p">=</span> <span class="nb">make</span><span class="p">([]</span><span class="nx">UserData</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="kd">type</span> <span class="nx">UserData</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">firstName</span>       <span class="kt">string</span>
	<span class="nx">lastName</span>        <span class="kt">string</span>
	<span class="nx">email</span>           <span class="kt">string</span>
	<span class="nx">numberOfTickets</span> <span class="kt">uint</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>

	<span class="nf">greetUsers</span><span class="p">()</span>

	<span class="k">for</span> <span class="p">{</span>
		<span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">userTickets</span> <span class="o">:=</span> <span class="nf">getUserInput</span><span class="p">()</span>
		<span class="nx">isValidName</span><span class="p">,</span> <span class="nx">isValidEmail</span><span class="p">,</span> <span class="nx">isValidTicketNumber</span> <span class="o">:=</span> <span class="nf">validateUserInput</span><span class="p">(</span><span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">userTickets</span><span class="p">)</span>

		<span class="k">if</span> <span class="nx">isValidName</span> <span class="o">&amp;&amp;</span> <span class="nx">isValidEmail</span> <span class="o">&amp;&amp;</span> <span class="nx">isValidTicketNumber</span> <span class="p">{</span>

			<span class="nf">bookTicket</span><span class="p">(</span><span class="nx">userTickets</span><span class="p">,</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">email</span><span class="p">)</span>

			<span class="nx">firstNames</span> <span class="o">:=</span> <span class="nf">getFirstNames</span><span class="p">()</span>
			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;The first names of bookins are: %v\n&#34;</span><span class="p">,</span> <span class="nx">firstNames</span><span class="p">)</span>

			<span class="k">if</span> <span class="nx">remainingTickets</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">{</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Our conference is booked out. Come back next year.&#34;</span><span class="p">)</span>
				<span class="k">break</span>
			<span class="p">}</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">!</span><span class="nx">isValidName</span> <span class="p">{</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;first name or last name you entered is too short&#34;</span><span class="p">)</span>
			<span class="p">}</span>
			<span class="k">if</span> <span class="p">!</span><span class="nx">isValidEmail</span> <span class="p">{</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;email address you entered doesn&#39;t contain @ sign&#34;</span><span class="p">)</span>
			<span class="p">}</span>
			<span class="k">if</span> <span class="p">!</span><span class="nx">isValidTicketNumber</span> <span class="p">{</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;number of tickets you entered is invalid&#34;</span><span class="p">)</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">greetUsers</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Welcome to %v booking application\n&#34;</span><span class="p">,</span> <span class="nx">conferenceName</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;We have total of %v tickets and %v are still available\n&#34;</span><span class="p">,</span> <span class="nx">conferenceTickets</span><span class="p">,</span> <span class="nx">remainingTickets</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Get your tickets here to attend&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">getFirstNames</span><span class="p">()</span> <span class="p">[]</span><span class="kt">string</span> <span class="p">{</span>
	<span class="nx">firstNames</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{}</span>
	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">booking</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">bookings</span> <span class="p">{</span>
		<span class="nx">firstNames</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">firstNames</span><span class="p">,</span> <span class="nx">booking</span><span class="p">.</span><span class="nx">firstName</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="nx">firstNames</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">getUserInput</span><span class="p">()</span> <span class="p">(</span><span class="kt">string</span><span class="p">,</span> <span class="kt">string</span><span class="p">,</span> <span class="kt">string</span><span class="p">,</span> <span class="kt">uint</span><span class="p">)</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">firstName</span> <span class="kt">string</span>
	<span class="kd">var</span> <span class="nx">lastName</span> <span class="kt">string</span>
	<span class="kd">var</span> <span class="nx">email</span> <span class="kt">string</span>
	<span class="kd">var</span> <span class="nx">userTickets</span> <span class="kt">uint</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter Your firstName: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">firstName</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter Your lastName: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">lastName</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter Your email: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">email</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter number of tickets: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">userTickets</span><span class="p">)</span>

	<span class="k">return</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">userTickets</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">bookTicket</span><span class="p">(</span><span class="nx">userTickets</span> <span class="kt">uint</span><span class="p">,</span> <span class="nx">firstName</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">lastName</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">email</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">remainingTickets</span> <span class="p">=</span> <span class="nx">remainingTickets</span> <span class="o">-</span> <span class="nx">userTickets</span>

	<span class="kd">var</span> <span class="nx">userData</span> <span class="p">=</span> <span class="nx">UserData</span><span class="p">{</span>
		<span class="nx">firstName</span><span class="p">:</span>       <span class="nx">firstName</span><span class="p">,</span>
		<span class="nx">lastName</span><span class="p">:</span>        <span class="nx">lastName</span><span class="p">,</span>
		<span class="nx">email</span><span class="p">:</span>           <span class="nx">email</span><span class="p">,</span>
		<span class="nx">numberOfTickets</span><span class="p">:</span> <span class="nx">userTickets</span><span class="p">,</span>
	<span class="p">}</span>

	<span class="nx">bookings</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">bookings</span><span class="p">,</span> <span class="nx">userData</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;List of bookings is %v\n&#34;</span><span class="p">,</span> <span class="nx">bookings</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Thank you %v %v for booking %v tickets. You will receive a confirmation email at %v\n&#34;</span><span class="p">,</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">userTickets</span><span class="p">,</span> <span class="nx">email</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v tickets remaining for %v\n&#34;</span><span class="p">,</span> <span class="nx">remainingTickets</span><span class="p">,</span> <span class="nx">conferenceName</span><span class="p">)</span>

<span class="p">}</span>

</code></pre></td></tr></table>
</div>
</div><figure><figcaption>
            <h4>struct</h4>
        </figcaption>
</figure>

<h3 id="214-long-processing-task">2.14. long processing task</h3>
<p>메일을 보내는 10초간 기다리게 구성</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;fmt&#34;</span>
	<span class="s">&#34;time&#34;</span>
<span class="p">)</span>

<span class="kd">const</span> <span class="nx">conferenceTickets</span> <span class="kt">int</span> <span class="p">=</span> <span class="mi">50</span>

<span class="kd">var</span> <span class="nx">conferenceName</span> <span class="kt">string</span> <span class="p">=</span> <span class="s">&#34;Go Conference&#34;</span>
<span class="kd">var</span> <span class="nx">remainingTickets</span> <span class="kt">uint</span> <span class="p">=</span> <span class="mi">50</span>
<span class="kd">var</span> <span class="nx">bookings</span> <span class="p">=</span> <span class="nb">make</span><span class="p">([]</span><span class="nx">UserData</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="kd">type</span> <span class="nx">UserData</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">firstName</span>       <span class="kt">string</span>
	<span class="nx">lastName</span>        <span class="kt">string</span>
	<span class="nx">email</span>           <span class="kt">string</span>
	<span class="nx">numberOfTickets</span> <span class="kt">uint</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>

	<span class="nf">greetUsers</span><span class="p">()</span>

	<span class="k">for</span> <span class="p">{</span>
		<span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">userTickets</span> <span class="o">:=</span> <span class="nf">getUserInput</span><span class="p">()</span>
		<span class="nx">isValidName</span><span class="p">,</span> <span class="nx">isValidEmail</span><span class="p">,</span> <span class="nx">isValidTicketNumber</span> <span class="o">:=</span> <span class="nf">validateUserInput</span><span class="p">(</span><span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">userTickets</span><span class="p">)</span>

		<span class="k">if</span> <span class="nx">isValidName</span> <span class="o">&amp;&amp;</span> <span class="nx">isValidEmail</span> <span class="o">&amp;&amp;</span> <span class="nx">isValidTicketNumber</span> <span class="p">{</span>

			<span class="nf">bookTicket</span><span class="p">(</span><span class="nx">userTickets</span><span class="p">,</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">email</span><span class="p">)</span>
			<span class="nf">sendTicket</span><span class="p">(</span><span class="nx">userTickets</span><span class="p">,</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">email</span><span class="p">)</span>

			<span class="nx">firstNames</span> <span class="o">:=</span> <span class="nf">getFirstNames</span><span class="p">()</span>
			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;The first names of bookins are: %v\n&#34;</span><span class="p">,</span> <span class="nx">firstNames</span><span class="p">)</span>

			<span class="k">if</span> <span class="nx">remainingTickets</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">{</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Our conference is booked out. Come back next year.&#34;</span><span class="p">)</span>
				<span class="k">break</span>
			<span class="p">}</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">!</span><span class="nx">isValidName</span> <span class="p">{</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;first name or last name you entered is too short&#34;</span><span class="p">)</span>
			<span class="p">}</span>
			<span class="k">if</span> <span class="p">!</span><span class="nx">isValidEmail</span> <span class="p">{</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;email address you entered doesn&#39;t contain @ sign&#34;</span><span class="p">)</span>
			<span class="p">}</span>
			<span class="k">if</span> <span class="p">!</span><span class="nx">isValidTicketNumber</span> <span class="p">{</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;number of tickets you entered is invalid&#34;</span><span class="p">)</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">greetUsers</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Welcome to %v booking application\n&#34;</span><span class="p">,</span> <span class="nx">conferenceName</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;We have total of %v tickets and %v are still available\n&#34;</span><span class="p">,</span> <span class="nx">conferenceTickets</span><span class="p">,</span> <span class="nx">remainingTickets</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Get your tickets here to attend&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">getFirstNames</span><span class="p">()</span> <span class="p">[]</span><span class="kt">string</span> <span class="p">{</span>
	<span class="nx">firstNames</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{}</span>
	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">booking</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">bookings</span> <span class="p">{</span>
		<span class="nx">firstNames</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">firstNames</span><span class="p">,</span> <span class="nx">booking</span><span class="p">.</span><span class="nx">firstName</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="nx">firstNames</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">getUserInput</span><span class="p">()</span> <span class="p">(</span><span class="kt">string</span><span class="p">,</span> <span class="kt">string</span><span class="p">,</span> <span class="kt">string</span><span class="p">,</span> <span class="kt">uint</span><span class="p">)</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">firstName</span> <span class="kt">string</span>
	<span class="kd">var</span> <span class="nx">lastName</span> <span class="kt">string</span>
	<span class="kd">var</span> <span class="nx">email</span> <span class="kt">string</span>
	<span class="kd">var</span> <span class="nx">userTickets</span> <span class="kt">uint</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter Your firstName: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">firstName</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter Your lastName: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">lastName</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter Your email: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">email</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter number of tickets: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">userTickets</span><span class="p">)</span>

	<span class="k">return</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">userTickets</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">bookTicket</span><span class="p">(</span><span class="nx">userTickets</span> <span class="kt">uint</span><span class="p">,</span> <span class="nx">firstName</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">lastName</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">email</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">remainingTickets</span> <span class="p">=</span> <span class="nx">remainingTickets</span> <span class="o">-</span> <span class="nx">userTickets</span>

	<span class="kd">var</span> <span class="nx">userData</span> <span class="p">=</span> <span class="nx">UserData</span><span class="p">{</span>
		<span class="nx">firstName</span><span class="p">:</span>       <span class="nx">firstName</span><span class="p">,</span>
		<span class="nx">lastName</span><span class="p">:</span>        <span class="nx">lastName</span><span class="p">,</span>
		<span class="nx">email</span><span class="p">:</span>           <span class="nx">email</span><span class="p">,</span>
		<span class="nx">numberOfTickets</span><span class="p">:</span> <span class="nx">userTickets</span><span class="p">,</span>
	<span class="p">}</span>

	<span class="nx">bookings</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">bookings</span><span class="p">,</span> <span class="nx">userData</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;List of bookings is %v\n&#34;</span><span class="p">,</span> <span class="nx">bookings</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Thank you %v %v for booking %v tickets. You will receive a confirmation email at %v\n&#34;</span><span class="p">,</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">userTickets</span><span class="p">,</span> <span class="nx">email</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v tickets remaining for %v\n&#34;</span><span class="p">,</span> <span class="nx">remainingTickets</span><span class="p">,</span> <span class="nx">conferenceName</span><span class="p">)</span>

<span class="p">}</span>

<span class="kd">func</span> <span class="nf">sendTicket</span><span class="p">(</span><span class="nx">userTickets</span> <span class="kt">uint</span><span class="p">,</span> <span class="nx">firstName</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">lastName</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">email</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="mi">10</span> <span class="o">*</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span>
	<span class="kd">var</span> <span class="nx">ticket</span> <span class="p">=</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;%v tickets for %v %v&#34;</span><span class="p">,</span> <span class="nx">userTickets</span><span class="p">,</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;#########################&#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Sending ticket: \n %v to email address %v\n&#34;</span><span class="p">,</span> <span class="nx">ticket</span><span class="p">,</span> <span class="nx">email</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;#########################&#34;</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></td></tr></table>
</div>
</div><figure><figcaption>
            <h4>long processing</h4>
        </figcaption>
</figure>

<h3 id="215-비동기">2.15. 비동기</h3>
<p>메일을 기다리지 않고 보내면서 메일은 별도로 보내지게 구성 한다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;fmt&#34;</span>
	<span class="s">&#34;time&#34;</span>
<span class="p">)</span>

<span class="kd">const</span> <span class="nx">conferenceTickets</span> <span class="kt">int</span> <span class="p">=</span> <span class="mi">50</span>

<span class="kd">var</span> <span class="nx">conferenceName</span> <span class="kt">string</span> <span class="p">=</span> <span class="s">&#34;Go Conference&#34;</span>
<span class="kd">var</span> <span class="nx">remainingTickets</span> <span class="kt">uint</span> <span class="p">=</span> <span class="mi">50</span>
<span class="kd">var</span> <span class="nx">bookings</span> <span class="p">=</span> <span class="nb">make</span><span class="p">([]</span><span class="nx">UserData</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="kd">type</span> <span class="nx">UserData</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">firstName</span>       <span class="kt">string</span>
	<span class="nx">lastName</span>        <span class="kt">string</span>
	<span class="nx">email</span>           <span class="kt">string</span>
	<span class="nx">numberOfTickets</span> <span class="kt">uint</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>

	<span class="nf">greetUsers</span><span class="p">()</span>

	<span class="k">for</span> <span class="p">{</span>
		<span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">userTickets</span> <span class="o">:=</span> <span class="nf">getUserInput</span><span class="p">()</span>
		<span class="nx">isValidName</span><span class="p">,</span> <span class="nx">isValidEmail</span><span class="p">,</span> <span class="nx">isValidTicketNumber</span> <span class="o">:=</span> <span class="nf">validateUserInput</span><span class="p">(</span><span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">userTickets</span><span class="p">)</span>

		<span class="k">if</span> <span class="nx">isValidName</span> <span class="o">&amp;&amp;</span> <span class="nx">isValidEmail</span> <span class="o">&amp;&amp;</span> <span class="nx">isValidTicketNumber</span> <span class="p">{</span>

			<span class="nf">bookTicket</span><span class="p">(</span><span class="nx">userTickets</span><span class="p">,</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">email</span><span class="p">)</span>
            
            <span class="c1">// go라는 것을 넣어주면 된다.
</span><span class="c1"></span>			<span class="k">go</span> <span class="nf">sendTicket</span><span class="p">(</span><span class="nx">userTickets</span><span class="p">,</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">email</span><span class="p">)</span>

			<span class="nx">firstNames</span> <span class="o">:=</span> <span class="nf">getFirstNames</span><span class="p">()</span>
			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;The first names of bookins are: %v\n&#34;</span><span class="p">,</span> <span class="nx">firstNames</span><span class="p">)</span>

			<span class="k">if</span> <span class="nx">remainingTickets</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">{</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Our conference is booked out. Come back next year.&#34;</span><span class="p">)</span>
				<span class="k">break</span>
			<span class="p">}</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">!</span><span class="nx">isValidName</span> <span class="p">{</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;first name or last name you entered is too short&#34;</span><span class="p">)</span>
			<span class="p">}</span>
			<span class="k">if</span> <span class="p">!</span><span class="nx">isValidEmail</span> <span class="p">{</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;email address you entered doesn&#39;t contain @ sign&#34;</span><span class="p">)</span>
			<span class="p">}</span>
			<span class="k">if</span> <span class="p">!</span><span class="nx">isValidTicketNumber</span> <span class="p">{</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;number of tickets you entered is invalid&#34;</span><span class="p">)</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">greetUsers</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Welcome to %v booking application\n&#34;</span><span class="p">,</span> <span class="nx">conferenceName</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;We have total of %v tickets and %v are still available\n&#34;</span><span class="p">,</span> <span class="nx">conferenceTickets</span><span class="p">,</span> <span class="nx">remainingTickets</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Get your tickets here to attend&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">getFirstNames</span><span class="p">()</span> <span class="p">[]</span><span class="kt">string</span> <span class="p">{</span>
	<span class="nx">firstNames</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{}</span>
	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">booking</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">bookings</span> <span class="p">{</span>
		<span class="nx">firstNames</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">firstNames</span><span class="p">,</span> <span class="nx">booking</span><span class="p">.</span><span class="nx">firstName</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="nx">firstNames</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">getUserInput</span><span class="p">()</span> <span class="p">(</span><span class="kt">string</span><span class="p">,</span> <span class="kt">string</span><span class="p">,</span> <span class="kt">string</span><span class="p">,</span> <span class="kt">uint</span><span class="p">)</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">firstName</span> <span class="kt">string</span>
	<span class="kd">var</span> <span class="nx">lastName</span> <span class="kt">string</span>
	<span class="kd">var</span> <span class="nx">email</span> <span class="kt">string</span>
	<span class="kd">var</span> <span class="nx">userTickets</span> <span class="kt">uint</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter Your firstName: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">firstName</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter Your lastName: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">lastName</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter Your email: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">email</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter number of tickets: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">userTickets</span><span class="p">)</span>

	<span class="k">return</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">userTickets</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">bookTicket</span><span class="p">(</span><span class="nx">userTickets</span> <span class="kt">uint</span><span class="p">,</span> <span class="nx">firstName</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">lastName</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">email</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">remainingTickets</span> <span class="p">=</span> <span class="nx">remainingTickets</span> <span class="o">-</span> <span class="nx">userTickets</span>

	<span class="kd">var</span> <span class="nx">userData</span> <span class="p">=</span> <span class="nx">UserData</span><span class="p">{</span>
		<span class="nx">firstName</span><span class="p">:</span>       <span class="nx">firstName</span><span class="p">,</span>
		<span class="nx">lastName</span><span class="p">:</span>        <span class="nx">lastName</span><span class="p">,</span>
		<span class="nx">email</span><span class="p">:</span>           <span class="nx">email</span><span class="p">,</span>
		<span class="nx">numberOfTickets</span><span class="p">:</span> <span class="nx">userTickets</span><span class="p">,</span>
	<span class="p">}</span>

	<span class="nx">bookings</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">bookings</span><span class="p">,</span> <span class="nx">userData</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;List of bookings is %v\n&#34;</span><span class="p">,</span> <span class="nx">bookings</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Thank you %v %v for booking %v tickets. You will receive a confirmation email at %v\n&#34;</span><span class="p">,</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">userTickets</span><span class="p">,</span> <span class="nx">email</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v tickets remaining for %v\n&#34;</span><span class="p">,</span> <span class="nx">remainingTickets</span><span class="p">,</span> <span class="nx">conferenceName</span><span class="p">)</span>

<span class="p">}</span>

<span class="kd">func</span> <span class="nf">sendTicket</span><span class="p">(</span><span class="nx">userTickets</span> <span class="kt">uint</span><span class="p">,</span> <span class="nx">firstName</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">lastName</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">email</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="mi">10</span> <span class="o">*</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span>
	<span class="kd">var</span> <span class="nx">ticket</span> <span class="p">=</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;%v tickets for %v %v&#34;</span><span class="p">,</span> <span class="nx">userTickets</span><span class="p">,</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;#########################&#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Sending ticket: \n %v to email address %v\n&#34;</span><span class="p">,</span> <span class="nx">ticket</span><span class="p">,</span> <span class="nx">email</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;#########################&#34;</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></td></tr></table>
</div>
</div><h3 id="116-동기">1.16. 동기</h3>
<p>sync 함수를 사용한다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;fmt&#34;</span>
	<span class="s">&#34;sync&#34;</span>
	<span class="s">&#34;time&#34;</span>
<span class="p">)</span>

<span class="kd">const</span> <span class="nx">conferenceTickets</span> <span class="kt">int</span> <span class="p">=</span> <span class="mi">50</span>

<span class="kd">var</span> <span class="nx">conferenceName</span> <span class="kt">string</span> <span class="p">=</span> <span class="s">&#34;Go Conference&#34;</span>
<span class="kd">var</span> <span class="nx">remainingTickets</span> <span class="kt">uint</span> <span class="p">=</span> <span class="mi">50</span>
<span class="kd">var</span> <span class="nx">bookings</span> <span class="p">=</span> <span class="nb">make</span><span class="p">([]</span><span class="nx">UserData</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="kd">type</span> <span class="nx">UserData</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">firstName</span>       <span class="kt">string</span>
	<span class="nx">lastName</span>        <span class="kt">string</span>
	<span class="nx">email</span>           <span class="kt">string</span>
	<span class="nx">numberOfTickets</span> <span class="kt">uint</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">wg</span> <span class="p">=</span> <span class="nx">sync</span><span class="p">.</span><span class="nx">WaitGroup</span><span class="p">{}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>

	<span class="nf">greetUsers</span><span class="p">()</span>

	<span class="c1">//for {
</span><span class="c1"></span>	<span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">userTickets</span> <span class="o">:=</span> <span class="nf">getUserInput</span><span class="p">()</span>
	<span class="nx">isValidName</span><span class="p">,</span> <span class="nx">isValidEmail</span><span class="p">,</span> <span class="nx">isValidTicketNumber</span> <span class="o">:=</span> <span class="nf">validateUserInput</span><span class="p">(</span><span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">userTickets</span><span class="p">)</span>

	<span class="k">if</span> <span class="nx">isValidName</span> <span class="o">&amp;&amp;</span> <span class="nx">isValidEmail</span> <span class="o">&amp;&amp;</span> <span class="nx">isValidTicketNumber</span> <span class="p">{</span>

		<span class="nf">bookTicket</span><span class="p">(</span><span class="nx">userTickets</span><span class="p">,</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">email</span><span class="p">)</span>

		<span class="nx">wg</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
		<span class="k">go</span> <span class="nf">sendTicket</span><span class="p">(</span><span class="nx">userTickets</span><span class="p">,</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">email</span><span class="p">)</span>

		<span class="nx">firstNames</span> <span class="o">:=</span> <span class="nf">getFirstNames</span><span class="p">()</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;The first names of bookins are: %v\n&#34;</span><span class="p">,</span> <span class="nx">firstNames</span><span class="p">)</span>

		<span class="k">if</span> <span class="nx">remainingTickets</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">{</span>
			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Our conference is booked out. Come back next year.&#34;</span><span class="p">)</span>
			<span class="c1">//break
</span><span class="c1"></span>		<span class="p">}</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">!</span><span class="nx">isValidName</span> <span class="p">{</span>
			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;first name or last name you entered is too short&#34;</span><span class="p">)</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="p">!</span><span class="nx">isValidEmail</span> <span class="p">{</span>
			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;email address you entered doesn&#39;t contain @ sign&#34;</span><span class="p">)</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="p">!</span><span class="nx">isValidTicketNumber</span> <span class="p">{</span>
			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;number of tickets you entered is invalid&#34;</span><span class="p">)</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="nx">wg</span><span class="p">.</span><span class="nf">Wait</span><span class="p">()</span>
	<span class="c1">//}
</span><span class="c1"></span><span class="p">}</span>

<span class="kd">func</span> <span class="nf">greetUsers</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Welcome to %v booking application\n&#34;</span><span class="p">,</span> <span class="nx">conferenceName</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;We have total of %v tickets and %v are still available\n&#34;</span><span class="p">,</span> <span class="nx">conferenceTickets</span><span class="p">,</span> <span class="nx">remainingTickets</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Get your tickets here to attend&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">getFirstNames</span><span class="p">()</span> <span class="p">[]</span><span class="kt">string</span> <span class="p">{</span>
	<span class="nx">firstNames</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{}</span>
	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">booking</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">bookings</span> <span class="p">{</span>
		<span class="nx">firstNames</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">firstNames</span><span class="p">,</span> <span class="nx">booking</span><span class="p">.</span><span class="nx">firstName</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="nx">firstNames</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">getUserInput</span><span class="p">()</span> <span class="p">(</span><span class="kt">string</span><span class="p">,</span> <span class="kt">string</span><span class="p">,</span> <span class="kt">string</span><span class="p">,</span> <span class="kt">uint</span><span class="p">)</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">firstName</span> <span class="kt">string</span>
	<span class="kd">var</span> <span class="nx">lastName</span> <span class="kt">string</span>
	<span class="kd">var</span> <span class="nx">email</span> <span class="kt">string</span>
	<span class="kd">var</span> <span class="nx">userTickets</span> <span class="kt">uint</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter Your firstName: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">firstName</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter Your lastName: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">lastName</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter Your email: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">email</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Enter number of tickets: &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">userTickets</span><span class="p">)</span>

	<span class="k">return</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">userTickets</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">bookTicket</span><span class="p">(</span><span class="nx">userTickets</span> <span class="kt">uint</span><span class="p">,</span> <span class="nx">firstName</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">lastName</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">email</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">remainingTickets</span> <span class="p">=</span> <span class="nx">remainingTickets</span> <span class="o">-</span> <span class="nx">userTickets</span>

	<span class="kd">var</span> <span class="nx">userData</span> <span class="p">=</span> <span class="nx">UserData</span><span class="p">{</span>
		<span class="nx">firstName</span><span class="p">:</span>       <span class="nx">firstName</span><span class="p">,</span>
		<span class="nx">lastName</span><span class="p">:</span>        <span class="nx">lastName</span><span class="p">,</span>
		<span class="nx">email</span><span class="p">:</span>           <span class="nx">email</span><span class="p">,</span>
		<span class="nx">numberOfTickets</span><span class="p">:</span> <span class="nx">userTickets</span><span class="p">,</span>
	<span class="p">}</span>

	<span class="nx">bookings</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">bookings</span><span class="p">,</span> <span class="nx">userData</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;List of bookings is %v\n&#34;</span><span class="p">,</span> <span class="nx">bookings</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Thank you %v %v for booking %v tickets. You will receive a confirmation email at %v\n&#34;</span><span class="p">,</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">userTickets</span><span class="p">,</span> <span class="nx">email</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v tickets remaining for %v\n&#34;</span><span class="p">,</span> <span class="nx">remainingTickets</span><span class="p">,</span> <span class="nx">conferenceName</span><span class="p">)</span>

<span class="p">}</span>

<span class="kd">func</span> <span class="nf">sendTicket</span><span class="p">(</span><span class="nx">userTickets</span> <span class="kt">uint</span><span class="p">,</span> <span class="nx">firstName</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">lastName</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">email</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="mi">10</span> <span class="o">*</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span>
	<span class="kd">var</span> <span class="nx">ticket</span> <span class="p">=</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;%v tickets for %v %v&#34;</span><span class="p">,</span> <span class="nx">userTickets</span><span class="p">,</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;#########################&#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Sending ticket: \n %v to email address %v\n&#34;</span><span class="p">,</span> <span class="nx">ticket</span><span class="p">,</span> <span class="nx">email</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;#########################&#34;</span><span class="p">)</span>
	<span class="nx">wg</span><span class="p">.</span><span class="nf">Done</span><span class="p">()</span>
<span class="p">}</span>

</code></pre></td></tr></table>
</div>
</div><p><a href="https://youtu.be/yyUHQIec83I" target="_blank" rel="noopener noreffer"><i class="fas fa-link"></i> 참고동영상: TechWorld with Nana</a></p>
]]></description>
</item><item>
    <title>The Documentation OWASP</title>
    <link>https://huntedhappy.github.io/owsap/</link>
    <pubDate>Thu, 20 Jan 2022 13:37:45 &#43;0900</pubDate>
    <author>Author</author>
    <guid>https://huntedhappy.github.io/owsap/</guid>
    <description><![CDATA[<p>OWASP TOP10을 정리해보자.
<figure><figcaption>
            <h4>owasp top10 출처:OWASP</h4>
        </figcaption>
</figure>
</p>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th>Name</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">A01</td>
<td>Broken Access Control</td>
<td>Moving up from the fifth position, 94% of applications were tested for some form of broken access control with the average incidence rate of 3.81%, and has the most occurrences in the contributed dataset with over 318k. Notable Common Weakness Enumerations (CWEs) included are CWE-200: Exposure of Sensitive Information to an Unauthorized Actor, CWE-201: Exposure of Sensitive Information Through Sent Data, and CWE-352: Cross-Site Request Forgery.</td>
</tr>
<tr>
<td style="text-align:center">A02</td>
<td>Cryptographic Failures</td>
<td>Shifting up one position to #2, previously known as Sensitive Data Exposure, which is more of a broad symptom rather than a root cause, the focus is on failures related to cryptography (or lack thereof). Which often lead to exposure of sensitive data. Notable Common Weakness Enumerations (CWEs) included are CWE-259: Use of Hard-coded Password, CWE-327: Broken or Risky Crypto Algorithm, and CWE-331 Insufficient Entropy .</td>
</tr>
<tr>
<td style="text-align:center">A03</td>
<td>Injection</td>
<td>Injection slides down to the third position. 94% of the applications were tested for some form of injection with a max incidence rate of 19%, an average incidence rate of 3%, and 274k occurances. Notable Common Weakness Enumerations (CWEs) included are CWE-79: Cross-site Scripting, CWE-89: SQL Injection, and CWE-73: External Control of File Name or Path.</td>
</tr>
<tr>
<td style="text-align:center">A04</td>
<td>Insecure Design</td>
<td>A new category for 2021 focuses on risks related to design and architectural flaws, with a call for more use of threat modeling, secure design patterns, and reference architectures. As a community we need to move beyond &ldquo;shift-left&rdquo; in the coding space to pre-code activities that are critical for the principles of Secure by Design. Notable Common Weakness Enumerations (CWEs) include CWE-209: Generation of Error Message Containing Sensitive Information, CWE-256: Unprotected Storage of Credentials, CWE-501: Trust Boundary Violation, and CWE-522: Insufficiently Protected Credentials.</td>
</tr>
<tr>
<td style="text-align:center">A05</td>
<td>Security Misconfiguration</td>
<td>Moving up from #6 in the previous edition, 90% of applications were tested for some form of misconfiguration, with an average incidence rate of 4.%, and over 208k occurences of a Common Weakness Enumeration (CWE) in this risk category. With more shifts into highly configurable software, it&rsquo;s not surprising to see this category move up. Notable CWEs included are CWE-16 Configuration and CWE-611 Improper Restriction of XML External Entity Reference.</td>
</tr>
<tr>
<td style="text-align:center">A06</td>
<td>Vulnerable and Outdated Components</td>
<td>It was #2 from the Top 10 community survey but also had enough data to make the Top 10 via data. Vulnerable Components are a known issue that we struggle to test and assess risk and is the only category to not have any Common Weakness Enumerations (CWEs) mapped to the included CWEs, so a default exploits/impact weight of 5.0 is used. Notable CWEs included are CWE-1104: Use of Unmaintained Third-Party Components and the two CWEs from Top 10 2013 and 2017.</td>
</tr>
<tr>
<td style="text-align:center">A07</td>
<td>Identification and Authentication Failures</td>
<td>Previously known as Broken Authentication, this category slid down from the second position and now includes Common Weakness Enumerations (CWEs) related to identification failures. Notable CWEs included are CWE-297: Improper Validation of Certificate with Host Mismatch, CWE-287: Improper Authentication, and CWE-384: Session Fixation</td>
</tr>
<tr>
<td style="text-align:center">A08</td>
<td>Software and Data Integrity Failures</td>
<td>A new category for 2021 focuses on making assumptions related to software updates, critical data, and CI/CD pipelines without verifying integrity. One of the highest weighted impacts from Common Vulnerability and Exposures/Common Vulnerability Scoring System (CVE/CVSS) data. Notable Common Weakness Enumerations (CWEs) include CWE-829: Inclusion of Functionality from Untrusted Control Sphere, CWE-494: Download of Code Without Integrity Check, and CWE-502: Deserialization of Untrusted Data.</td>
</tr>
<tr>
<td style="text-align:center">A09</td>
<td>Security Logging and Monitoring Failures</td>
<td>Security logging and monitoring came from the Top 10 community survey (#3), up slightly from the tenth position in the OWASP Top 10 2017. Logging and monitoring can be challenging to test, often involving interviews or asking if attacks were detected during a penetration test. There isn&rsquo;t much CVE/CVSS data for this category, but detecting and responding to breaches is critical. Still, it can be very impactful for accountability, visibility, incident alerting, and forensics. This category expands beyond CWE-778 Insufficient Logging to include CWE-117 Improper Output Neutralization for Logs, CWE-223 Omission of Security-relevant Information, and CWE-532 Insertion of Sensitive Information into Log File.</td>
</tr>
<tr>
<td style="text-align:center">A10</td>
<td>Server-Side Request Forgery (SSRF)</td>
<td>This category is added from the Top 10 community survey (#1). The data shows a relatively low incidence rate with above average testing coverage and above-average Exploit and Impact potential ratings. As new entries are likely to be a single or small cluster of Common Weakness Enumerations (CWEs) for attention and awareness, the hope is that they are subject to focus and can be rolled into a larger category in a future edition.</td>
</tr>
</tbody>
</table>
<h2 id="a01-broken-access-control">A01 Broken Access Control</h2>
<table>
<thead>
<tr>
<th style="text-align:center">CWEs Mapped</th>
<th style="text-align:center">Max Incidence Rate</th>
<th style="text-align:center">Avg Incidence Rate</th>
<th style="text-align:center">Avg Weighted Exploit</th>
<th style="text-align:center">Avg Weighted Impact</th>
<th style="text-align:center">Max Coverage</th>
<th style="text-align:center">Avg Coverage</th>
<th style="text-align:center">Total Occurrences</th>
<th style="text-align:center">Total CVEs</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">34</td>
<td style="text-align:center">55.97%</td>
<td style="text-align:center">3.81%</td>
<td style="text-align:center">6.92</td>
<td style="text-align:center">5.93</td>
<td style="text-align:center">94.55%</td>
<td style="text-align:center">47.72%</td>
<td style="text-align:center">318,487</td>
<td style="text-align:center">19,013</td>
</tr>
</tbody>
</table>
<h4 id="설명">설명</h4>
<p>액세스 제어는 사용자가 의도한 권한을 벗어나 행동할 수 없도록 정책을 시행합니다. 실패는 일반적으로 모든 데이터의 무단 정보 공개, 수정 또는 파괴로 이어지거나 사용자의 한계를 벗어난 비즈니스 기능을 수행하게 됩니다. 일반적인 액세스 제어 취약점은 다음과 같습니다.</p>
<ul>
<li>
<p>특정 기능, 역할 또는 사용자에게만 액세스 권한을 부여해야 하지만 누구나 사용할 수 있는 최소 권한 또는 기본 거부 원칙 위반입니다.</p>
</li>
<li>
<p>URL(매개변수 변조 또는 강제 탐색), 내부 애플리케이션 상태 또는 HTML 페이지를 수정하거나 API 요청을 수정하는 공격 도구를 사용하여 액세스 제어 검사를 우회합니다.</p>
</li>
<li>
<p>고유 식별자를 제공하여 다른 사람의 계정 보기 또는 편집 허용(안전하지 않은 직접 개체 참조)</p>
</li>
<li>
<p>POST, PUT 및 DELETE에 대한 액세스 제어가 누락된 API 액세스.</p>
</li>
<li>
<p>특권 상승. 로그인하지 않고 사용자로 활동하거나 사용자로 로그인하면 관리자로 활동합니다.</p>
</li>
<li>
<p>JSON 웹 토큰(JWT) 액세스 제어 토큰 재생 또는 변조, 권한 상승을 위해 조작된 쿠키 또는 숨겨진 필드, JWT 무효화 남용과 같은 메타데이터 조작.</p>
</li>
<li>
<p>CORS 구성이 잘못되면 승인되지 않은/신뢰할 수 없는 출처의 API 액세스가 허용됩니다.</p>
</li>
<li>
<p>인증되지 않은 사용자로 인증된 페이지를 강제로 탐색하거나 표준 사용자로 권한 있는 페이지를 탐색합니다.</p>
</li>
</ul>
<h2 id="a02-cryptographic-failures">A02 Cryptographic Failures</h2>
<table>
<thead>
<tr>
<th style="text-align:center">CWEs Mapped</th>
<th style="text-align:center">Max Incidence Rate</th>
<th style="text-align:center">Avg Incidence Rate</th>
<th style="text-align:center">Avg Weighted Exploit</th>
<th style="text-align:center">Avg Weighted Impact</th>
<th style="text-align:center">Max Coverage</th>
<th style="text-align:center">Avg Coverage</th>
<th style="text-align:center">Total Occurrences</th>
<th style="text-align:center">Total CVEs</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">29</td>
<td style="text-align:center">46.44%</td>
<td style="text-align:center">4.49%</td>
<td style="text-align:center">7.29</td>
<td style="text-align:center">6.81</td>
<td style="text-align:center">79.33%</td>
<td style="text-align:center">34.85%</td>
<td style="text-align:center">233,788</td>
<td style="text-align:center">3,075</td>
</tr>
</tbody>
</table>
<h4 id="설명-1">설명</h4>
<p>첫 번째는 전송 중인 데이터와 저장되지 않은 데이터의 보호 요구 사항을 결정하는 것입니다. 예를 들어 암호, 신용 카드 번호, 건강 기록, 개인 정보 및 비즈니스 비밀은 주로 해당 데이터가 개인 정보 보호법(예: EU의 일반 데이터 보호 규정(GDPR) 또는 규정(예: 금융 데이터 보호)에 해당하는 경우 추가 보호가 필요합니다. PCI 데이터 보안 표준(PCI DSS)과 같은. 이러한 모든 데이터의 경우:</p>
<ul>
<li>
<p>데이터가 일반 텍스트로 전송됩니까? 이는 STARTTLS와 같은 TLS 업그레이드도 사용하는 HTTP, SMTP, FTP와 같은 프로토콜과 관련이 있습니다. 외부 인터넷 트래픽은 위험합니다. 로드 밸런서, 웹 서버 또는 백엔드 시스템 간의 모든 내부 트래픽을 확인합니다.</p>
</li>
<li>
<p>기본적으로 또는 이전 코드에서 사용되는 오래되거나 약한 암호화 알고리즘이나 프로토콜이 있습니까?</p>
</li>
<li>
<p>기본 암호화 키가 사용 중이거나 약한 암호화 키가 생성 또는 재사용되거나 적절한 키 관리 또는 순환이 누락되었습니까? 암호화 키는 소스 코드 저장소에 체크인됩니까?</p>
</li>
<li>
<p>암호화가 시행되지 않습니까? 예를 들어 HTTP 헤더(브라우저) 보안 지시문이나 헤더가 누락되었습니까?</p>
</li>
<li>
<p>수신한 서버 인증서와 신뢰 체인이 제대로 검증되었습니까?</p>
</li>
<li>
<p>초기화 벡터가 무시, 재사용 또는 생성된 암호화 작동 모드에 대해 충분히 안전하지 않습니까? ECB와 같은 안전하지 않은 작동 모드가 사용 중입니까? 인증된 암호화가 더 적절할 때 암호화가 사용됩니까?</p>
</li>
<li>
<p>암호 기반 키 파생 기능이 없는 경우 암호가 암호 키로 사용됩니까?</p>
</li>
<li>
<p>암호화 요구 사항을 충족하도록 설계되지 않은 암호화 목적에 무작위성이 사용됩니까? 올바른 기능을 선택하더라도 개발자가 시드해야 합니까? 그렇지 않은 경우 개발자가 엔트로피/예측 불가능성이 부족한 시드로 내장된 강력한 시딩 기능을 덮어썼습니까?</p>
</li>
<li>
<p>MD5 또는 SHA1과 같은 더 이상 사용되지 않는 해시 함수가 사용 중이거나 암호화 해시 함수가 필요할 때 비암호화 해시 함수가 사용됩니까?</p>
</li>
<li>
<p>PKCS 번호 1 v1.5와 같은 더 이상 사용되지 않는 암호화 패딩 방법이 사용 중입니까?</p>
</li>
<li>
<p>예를 들어 패딩 오라클 공격의 형태로 암호화 오류 메시지 또는 부채널 정보가 악용될 수 있습니까?</p>
</li>
</ul>
<h2 id="a03-injection">A03 Injection</h2>
<table>
<thead>
<tr>
<th style="text-align:center">CWEs Mapped</th>
<th style="text-align:center">Max Incidence Rate</th>
<th style="text-align:center">Avg Incidence Rate</th>
<th style="text-align:center">Avg Weighted Exploit</th>
<th style="text-align:center">Avg Weighted Impact</th>
<th style="text-align:center">Max Coverage</th>
<th style="text-align:center">Avg Coverage</th>
<th style="text-align:center">Total Occurrences</th>
<th style="text-align:center">Total CVEs</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">33</td>
<td style="text-align:center">19.09%</td>
<td style="text-align:center">3.37%</td>
<td style="text-align:center">7.25</td>
<td style="text-align:center">7.15</td>
<td style="text-align:center">94.04%</td>
<td style="text-align:center">47.90%</td>
<td style="text-align:center">274,228</td>
<td style="text-align:center">32,078</td>
</tr>
</tbody>
</table>
<h4 id="설명-2">설명</h4>
<p>애플리케이션은 다음과 같은 경우 공격에 취약합니다.</p>
<ul>
<li>사용자 제공 데이터는 애플리케이션에서 검증, 필터링 또는 삭제되지 않습니다.</li>
<li>컨텍스트 인식 이스케이프가 없는 동적 쿼리 또는 매개변수화되지 않은 호출은 인터프리터에서 직접 사용됩니다.</li>
<li>적대적인 데이터는 ORM(객체 관계형 매핑) 검색 매개변수 내에서 사용되어 중요한 추가 레코드를 추출합니다.</li>
<li>적대적인 데이터를 직접 사용하거나 연결합니다. SQL 또는 명령은 동적 쿼리, 명령 또는 저장 프로시저의 구조 및 악성 데이터를 포함합니다.</li>
<li>더 일반적인 주입에는 SQL, NoSQL, OS 명령, ORM(Object Relational Mapping), LDAP 및 EL(Expression Language) 또는 OGNL(Object Graph Navigation Library) 주입이 있습니다. 개념은 모든 통역사 간에 동일합니다. 소스 코드 검토는 애플리케이션이 주입에 취약한지 감지하는 가장 좋은 방법입니다. 모든 매개변수, 헤더, URL, 쿠키, JSON, SOAP 및 XML 데이터 입력에 대한 자동 테스트를 적극 권장합니다. 조직은 CI/CD 파이프라인에 정적(SAST), 동적(DAST) 및 대화형(IAST) 애플리케이션 보안 테스트 도구를 포함하여 프로덕션 배포 전에 도입된 주입 결함을 식별할 수 있습니다.</li>
</ul>
<h2 id="a04-insecure-design">A04 Insecure Design</h2>
<table>
<thead>
<tr>
<th style="text-align:center">CWEs Mapped</th>
<th style="text-align:center">Max Incidence Rate</th>
<th style="text-align:center">Avg Incidence Rate</th>
<th style="text-align:center">Avg Weighted Exploit</th>
<th style="text-align:center">Avg Weighted Impact</th>
<th style="text-align:center">Max Coverage</th>
<th style="text-align:center">Avg Coverage</th>
<th style="text-align:center">Total Occurrences</th>
<th style="text-align:center">Total CVEs</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">40</td>
<td style="text-align:center">24.19%</td>
<td style="text-align:center">3.00%</td>
<td style="text-align:center">6.46</td>
<td style="text-align:center">6.78</td>
<td style="text-align:center">77.25%</td>
<td style="text-align:center">42.51%</td>
<td style="text-align:center">262,407</td>
<td style="text-align:center">2,691</td>
</tr>
</tbody>
</table>
<h4 id="설명-3">설명</h4>
<p>안전하지 않은 설계는 &ldquo;누락되거나 비효율적인 제어 설계&quot;로 표현되는 다양한 약점을 나타내는 광범위한 범주입니다. 안전하지 않은 디자인은 다른 모든 상위 10개 위험 범주의 원인이 아닙니다. 안전하지 않은 설계와 안전하지 않은 구현에는 차이가 있습니다. 우리는 근본 원인과 해결 방법이 다르기 때문에 설계 결함과 구현 결함을 구별합니다. 보안 설계에는 여전히 악용될 수 있는 취약점으로 이어지는 구현 결함이 있을 수 있습니다. 안전하지 않은 설계는 정의상 특정 공격을 방어하기 위해 필요한 보안 제어가 생성되지 않았기 때문에 완벽한 구현으로 수정할 수 없습니다. 안전하지 않은 설계에 기여하는 요인 중 하나는 개발 중인 소프트웨어 또는 시스템에 내재된 비즈니스 위험 프로파일링의 부족입니다.</p>
<h2 id="a05-security-misconfiguration">A05 Security Misconfiguration</h2>
<table>
<thead>
<tr>
<th style="text-align:center">CWEs Mapped</th>
<th style="text-align:center">Max Incidence Rate</th>
<th style="text-align:center">Avg Incidence Rate</th>
<th style="text-align:center">Avg Weighted Exploit</th>
<th style="text-align:center">Avg Weighted Impact</th>
<th style="text-align:center">Max Coverage</th>
<th style="text-align:center">Avg Coverage</th>
<th style="text-align:center">Total Occurrences</th>
<th style="text-align:center">Total CVEs</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">20</td>
<td style="text-align:center">19.84%</td>
<td style="text-align:center">4.51%</td>
<td style="text-align:center">8.12</td>
<td style="text-align:center">6.56</td>
<td style="text-align:center">89.58%</td>
<td style="text-align:center">44.84%</td>
<td style="text-align:center">208,387</td>
<td style="text-align:center">789</td>
</tr>
</tbody>
</table>
<h4 id="설명-4">설명</h4>
<p>애플리케이션이 다음과 같은 경우 취약할 수 있습니다.</p>
<ul>
<li>애플리케이션 스택의 모든 부분에서 적절한 보안 강화가 누락되었거나 클라우드 서비스에 대한 권한이 부적절하게 구성되었습니다.</li>
<li>불필요한 기능이 활성화되거나 설치됩니다(예: 불필요한 포트, 서비스, 페이지, 계정 또는 권한).</li>
<li>기본 계정과 해당 암호는 여전히 활성화되어 있으며 변경되지 않습니다.</li>
<li>오류 처리는 스택 추적 또는 기타 지나치게 유익한 오류 메시지를 사용자에게 보여줍니다.</li>
<li>업그레이드된 시스템의 경우 최신 보안 기능이 비활성화되거나 안전하게 구성되지 않습니다.</li>
<li>애플리케이션 서버, 애플리케이션 프레임워크(예: Struts, Spring, ASP.NET), 라이브러리, 데이터베이스 등의 보안 설정이 보안 값으로 설정되어 있지 않습니다.</li>
<li>서버가 보안 헤더 또는 지시문을 보내지 않거나 보안 값으로 설정되지 않았습니다.</li>
<li>소프트웨어가 오래되었거나 취약합니다( A06:2021-Vulnerable and Outdated Components 참조).</li>
</ul>
<p>일관되고 반복 가능한 애플리케이션 보안 구성 프로세스가 없으면 시스템이 더 큰 위험에 노출됩니다.</p>
<h2 id="a06-vulnerable-and-outdated-components">A06 Vulnerable and Outdated Components</h2>
<table>
<thead>
<tr>
<th style="text-align:center">CWEs Mapped</th>
<th style="text-align:center">Max Incidence Rate</th>
<th style="text-align:center">Avg Incidence Rate</th>
<th style="text-align:center">Avg Weighted Exploit</th>
<th style="text-align:center">Avg Weighted Impact</th>
<th style="text-align:center">Max Coverage</th>
<th style="text-align:center">Avg Coverage</th>
<th style="text-align:center">Total Occurrences</th>
<th style="text-align:center">Total CVEs</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">27.96%</td>
<td style="text-align:center">8.77%</td>
<td style="text-align:center">51.78%</td>
<td style="text-align:center">22.47%</td>
<td style="text-align:center">5.00</td>
<td style="text-align:center">5.00</td>
<td style="text-align:center">30,457</td>
<td style="text-align:center">0</td>
</tr>
</tbody>
</table>
<h4 id="설명-5">설명</h4>
<p>당신은 취약할 가능성이 있습니다:</p>
<ul>
<li>사용하는 모든 구성 요소(클라이언트 측 및 서버 측 모두)의 버전을 모르는 경우. 여기에는 직접 사용하는 구성 요소와 중첩된 종속성이 포함됩니다.</li>
<li>소프트웨어가 취약하거나 지원되지 않거나 오래된 경우. 여기에는 OS, 웹/애플리케이션 서버, 데이터베이스 관리 시스템(DBMS), 애플리케이션, API 및 모든 구성 요소, 런타임 환경 및 라이브러리가 포함됩니다.</li>
<li>취약점을 정기적으로 스캔하지 않고 사용하는 구성 요소와 관련된 보안 게시판을 구독하지 않는 경우.</li>
<li>위험 기반의 적시에 기본 플랫폼, 프레임워크 및 종속성을 수정하거나 업그레이드하지 않는 경우. 이는 패치가 변경 통제 하에 있는 월별 또는 분기별 작업인 환경에서 일반적으로 발생하여 조직이 수정된 취약점에 며칠 또는 몇 달 동안 불필요하게 노출될 수 있습니다.</li>
<li>소프트웨어 개발자가 업데이트, 업그레이드 또는 패치된 라이브러리의 호환성을 테스트하지 않는 경우.</li>
<li>구성 요소의 구성을 보호하지 않는 경우(A05:2021-Security Misconfiguration 참조).</li>
</ul>
<h2 id="a07-identification-and-authentication-failures">A07 Identification and Authentication Failures</h2>
<table>
<thead>
<tr>
<th style="text-align:center">CWEs Mapped</th>
<th style="text-align:center">Max Incidence Rate</th>
<th style="text-align:center">Avg Incidence Rate</th>
<th style="text-align:center">Avg Weighted Exploit</th>
<th style="text-align:center">Avg Weighted Impact</th>
<th style="text-align:center">Max Coverage</th>
<th style="text-align:center">Avg Coverage</th>
<th style="text-align:center">Total Occurrences</th>
<th style="text-align:center">Total CVEs</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">22</td>
<td style="text-align:center">14.84%</td>
<td style="text-align:center">2.55%</td>
<td style="text-align:center">7.40</td>
<td style="text-align:center">6.50</td>
<td style="text-align:center">79.51%</td>
<td style="text-align:center">45.72%</td>
<td style="text-align:center">132,195</td>
<td style="text-align:center">3,897</td>
</tr>
</tbody>
</table>
<h4 id="설명-6">설명</h4>
<p>사용자의 신원 확인, 인증 및 세션 관리는 인증 관련 공격으로부터 보호하는 데 중요합니다. 애플리케이션이 다음과 같은 경우 인증 취약점이 있을 수 있습니다.</p>
<ul>
<li>공격자가 유효한 사용자 이름 및 암호 목록을 가지고 있는 경우 자격 증명 스터핑과 같은 자동화된 공격을 허용합니다.</li>
<li>무차별 대입 또는 기타 자동화된 공격을 허용합니다.</li>
<li>&ldquo;Password1&rdquo; 또는 &ldquo;admin/admin&quot;과 같은 기본 암호, 취약하거나 잘 알려진 암호를 허용합니다.</li>
<li>안전할 수 없는 &ldquo;지식 기반 답변&quot;과 같은 취약하거나 비효율적인 자격 증명 복구 및 비밀번호 찾기 프로세스를 사용합니다.</li>
<li>일반 텍스트, 암호화되거나 약하게 해시된 암호 데이터 저장소를 사용합니다( A02:2021-Cryptographic Failures 참조).</li>
<li>다단계 인증이 없거나 비효율적입니다.</li>
<li>URL의 세션 식별자를 노출합니다.</li>
<li>로그인 성공 후 세션 식별자를 재사용합니다.</li>
<li>세션 ID를 올바르게 무효화하지 않습니다. 사용자 세션 또는 인증 토큰(주로 SSO(Single Sign-On) 토큰)은 로그아웃 또는 비활성 기간 동안 제대로 무효화되지 않습니다.</li>
</ul>
<h2 id="a08-software-and-data-integrity-failures">A08 Software and Data Integrity Failures</h2>
<table>
<thead>
<tr>
<th style="text-align:center">CWEs Mapped</th>
<th style="text-align:center">Max Incidence Rate</th>
<th style="text-align:center">Avg Incidence Rate</th>
<th style="text-align:center">Avg Weighted Exploit</th>
<th style="text-align:center">Avg Weighted Impact</th>
<th style="text-align:center">Max Coverage</th>
<th style="text-align:center">Avg Coverage</th>
<th style="text-align:center">Total Occurrences</th>
<th style="text-align:center">Total CVEs</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">10</td>
<td style="text-align:center">16.67%</td>
<td style="text-align:center">2.05%</td>
<td style="text-align:center">6.94</td>
<td style="text-align:center">7.94</td>
<td style="text-align:center">75.04%</td>
<td style="text-align:center">45.35%</td>
<td style="text-align:center">47,972</td>
<td style="text-align:center">1,152</td>
</tr>
</tbody>
</table>
<h4 id="설명-7">설명</h4>
<p>소프트웨어 및 데이터 무결성 오류는 무결성 위반으로부터 보호하지 않는 코드 및 인프라와 관련됩니다. 이에 대한 예는 애플리케이션이 신뢰할 수 없는 소스, 저장소 및 CDN(콘텐츠 전달 네트워크)의 플러그인, 라이브러리 또는 모듈에 의존하는 경우입니다. 안전하지 않은 CI/CD 파이프라인은 무단 액세스, 악성 코드 또는 시스템 손상의 가능성을 유발할 수 있습니다. 마지막으로, 많은 응용 프로그램에는 이제 충분한 무결성 확인 없이 업데이트가 다운로드되고 이전에 신뢰했던 응용 프로그램에 적용되는 자동 업데이트 기능이 포함됩니다. 공격자는 잠재적으로 자신의 업데이트를 업로드하여 배포하고 모든 설치에서 실행할 수 있습니다. 또 다른 예는 공격자가 보고 수정할 수 있는 구조로 개체 또는 데이터가 인코딩되거나 직렬화되어 안전하지 않은 역직렬화에 취약한 경우입니다.</p>
<h2 id="a09-security-logging-and-monitoring-failures">A09 Security Logging and Monitoring Failures</h2>
<table>
<thead>
<tr>
<th style="text-align:center">CWEs Mapped</th>
<th style="text-align:center">Max Incidence Rate</th>
<th style="text-align:center">Avg Incidence Rate</th>
<th style="text-align:center">Avg Weighted Exploit</th>
<th style="text-align:center">Avg Weighted Impact</th>
<th style="text-align:center">Max Coverage</th>
<th style="text-align:center">Avg Coverage</th>
<th style="text-align:center">Total Occurrences</th>
<th style="text-align:center">Total CVEs</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center">19.23%</td>
<td style="text-align:center">6.51%</td>
<td style="text-align:center">6.87</td>
<td style="text-align:center">4.99</td>
<td style="text-align:center">53.67%</td>
<td style="text-align:center">39.97%</td>
<td style="text-align:center">53,615</td>
<td style="text-align:center">242</td>
</tr>
</tbody>
</table>
<h4 id="설명-8">설명</h4>
<p>OWASP Top 10 2021로 돌아가서 이 카테고리는 활성 침해를 감지, 에스컬레이션 및 대응하는 데 도움이 됩니다. 로깅 및 모니터링 없이는 위반을 감지할 수 없습니다. 불충분한 로깅, 탐지, 모니터링 및 활성 응답은 다음과 같은 경우에 발생합니다.</p>
<ul>
<li>로그인, 로그인 실패 및 가치가 높은 트랜잭션과 같은 감사 가능한 이벤트는 기록되지 않습니다.</li>
<li>경고 및 오류는 아니오, 부적절하거나 불명확한 로그 메시지를 생성합니다.</li>
<li>애플리케이션 및 API 로그는 의심스러운 활동에 대해 모니터링되지 않습니다.</li>
<li>로그는 로컬에만 저장됩니다.</li>
<li>적절한 경고 임계값 및 응답 에스컬레이션 프로세스가 적절하지 않거나 효과적이지 않습니다.</li>
<li>DAST(동적 애플리케이션 보안 테스트) 도구(예: OWASP ZAP)에 의한 침투 테스트 및 스캔은 경고를 트리거하지 않습니다.</li>
<li>애플리케이션은 실시간 또는 거의 실시간으로 활성 공격을 감지, 확대 또는 경고할 수 없습니다.</li>
</ul>
<p>사용자나 공격자가 볼 수 있는 로깅 및 경고 이벤트를 통해 정보 유출에 취약합니다( A01:2021-Broken Access Control 참조).</p>
<h2 id="a10-server-side-request-forgery-ssrf">A10 Server-Side Request Forgery (SSRF)</h2>
<table>
<thead>
<tr>
<th style="text-align:center">CWEs Mapped</th>
<th style="text-align:center">Max Incidence Rate</th>
<th style="text-align:center">Avg Incidence Rate</th>
<th style="text-align:center">Avg Weighted Exploit</th>
<th style="text-align:center">Avg Weighted Impact</th>
<th style="text-align:center">Max Coverage</th>
<th style="text-align:center">Avg Coverage</th>
<th style="text-align:center">Total Occurrences</th>
<th style="text-align:center">Total CVEs</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">2.72%</td>
<td style="text-align:center">2.72%</td>
<td style="text-align:center">8.28</td>
<td style="text-align:center">6.72</td>
<td style="text-align:center">67.72%</td>
<td style="text-align:center">67.72%</td>
<td style="text-align:center">9,503</td>
<td style="text-align:center">385</td>
</tr>
</tbody>
</table>
<h4 id="설명-9">설명</h4>
<p>SSRF 결함은 웹 애플리케이션이 사용자가 제공한 URL의 유효성을 검사하지 않고 원격 리소스를 가져올 때마다 발생합니다. 이를 통해 공격자는 방화벽, VPN 또는 다른 유형의 네트워크 ACL(액세스 제어 목록)에 의해 보호되는 경우에도 응용 프로그램이 조작된 요청을 예기치 않은 대상으로 보내도록 강제할 수 있습니다.</p>
<p>최신 웹 애플리케이션이 최종 사용자에게 편리한 기능을 제공함에 따라 URL 가져오기가 일반적인 시나리오가 되었습니다. 그 결과 SSRF의 발병률이 증가하고 있습니다. 또한 클라우드 서비스와 아키텍처의 복잡성으로 인해 SSRF의 심각도가 높아지고 있습니다.</p>
<p><a href="https://owasp.org/Top10/" target="_blank" rel="noopener noreffer"><i class="fas fa-link"></i> 자료출처: OWASP</a></p>
]]></description>
</item><item>
    <title>The Documentation vSAN</title>
    <link>https://huntedhappy.github.io/vsan/</link>
    <pubDate>Thu, 20 Jan 2022 10:50:26 &#43;0900</pubDate>
    <author>Author</author>
    <guid>https://huntedhappy.github.io/vsan/</guid>
    <description><![CDATA[<h2 id="1-vsan-개념">1. VSAN 개념</h2>
<p>VSAN SDS(Software Defined Storage), ESXi 호스트의 로컬 스토리지 리소스를 가상화하고, 서비스 품질 요구 사항에 따라 분할하여 가상 시스템 및 애플리케이션에 할당 할 수 있는 스토리지 풀로 변환.</p>
<p><a href="https://docs.vmware.com/kr/VMware-vSphere/7.0/com.vmware.vsphere.vsan-planning.doc/GUID-ACC10393-47F6-4C5A-85FC-88051C1806A0.html" target="_blank" rel="noopener noreffer"><i class="fas fa-link"></i> 참고 문헌</a></p>
<h2 id="2-vsan-erasure-coding-raid-5-및-raid-6">2. VSAN Erasure Coding RAID-5 및 RAID-6</h2>
<p>Erasure Coding이란 일부 조각이 누락된 경우에도 원본데이터를 복구할 수 있는 방식으로 데이터를 조각으로 인코딩하고 분할하는 <code>모든 체계</code>를 나타내는 일반적인 용어.</p>
<blockquote>
<p>여기서 더 자세한 내용을 확인 할 수 있을 거 같다.   <a href="https://www.usenix.org/system/files/login/articles/10_plank-online.pdf" target="_blank" rel="noopener noreffer"><i class="fas fa-link"></i> 참고 문헌</a></p>
</blockquote>
<p>Reed-Solomon 알고리즘에 기반 한다. (알고리즘의 따라 계산 하는 방법이 달라진다.)</p>
<p>참고로 MINIO에서도 동일한 Erasure Coding이라는 용어가 나오지만, 위에 설명 했듯이 그냥 일반적인 용어이며, VSAN과 MiniO에서 사용하는 부분의 차이도 명확하다 우선 VSAN은 Host가 두개 실패 했을 경우까지만 제공을 한다. 하지만 MiniO에서 사용하는 Erasure Coding은 두개의 실패뿐만 아니라 더 많이 실패해도 복구를 할 수 있다는 점이다.</p>
<figure><figcaption>
            <h4>VSAN 정책</h4>
        </figcaption>
</figure>

<h4 id="raid-5">RAID-5</h4>
<ul>
<li>물리 장애 실패 = 1</li>
<li>내결함성 = 용량</li>
<li>RAID-1은 물리 용량을 x2 이지만 RAID-5의 용량은 x1.33만 필요</li>
<li>VSAN구성시 클러스터는 최소 4개의 노드가 필요</li>
</ul>
<figure><figcaption>
            <h4>스트라이프당 3개의 데이터 &#43; 1개의 패리티 조각이 있는 RAID-5 스트라이핑</h4>
        </figcaption>
</figure>

<h4 id="raid-6">RAID-6</h4>
<ul>
<li>물리 장애 실패 = 2</li>
<li>내결함성 = 용량</li>
<li>RAID-1은 물리 용량을 x3 이지만 RAID-6의 용량은 x1.5만 필요</li>
<li>VSAN구성시 클러스터는 최소 6개의 노드가 필요</li>
</ul>
<figure><figcaption>
            <h4>스트라이프당 4개의 데이터 &#43; 1개의 패리티(P) &#43; 1개의 RS(Q) 신드롬 조각이 있는 RAID-6 스트라이핑</h4>
        </figcaption>
</figure>

<div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw"></i>내결함성?<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">시스템을 구성하는 부품의 일부에서 결함(fault) 또는 고장(failure)이 발생하여도 정상적 혹은 부분적으로 기능을 수행할 수 있는 시스템이다.
<a href="https://ko.wikipedia.org/wiki/%EC%9E%A5%EC%95%A0_%ED%97%88%EC%9A%A9_%EC%8B%9C%EC%8A%A4%ED%85%9C" target="_blank" rel="noopener noreffer"><i class="fas fa-link"></i> 참고 문헌</a></div>
        </div>
    </div>
<ul>
<li>vSAN 데이터 보호 공간</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">허용된 실패</th>
<th style="text-align:center">RAID-1</th>
<th style="text-align:center"></th>
<th style="text-align:center">RAID-5/6</th>
<th style="text-align:center"></th>
<th style="text-align:center">Erasure Coding save vs Mirroring</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">필요한 최소 호스트</td>
<td style="text-align:center">총 용량 요구 사항</td>
<td style="text-align:center">필요한 최소 호스트</td>
<td style="text-align:center">총 용량 요구 사항</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">FTT=0</td>
<td style="text-align:center">3</td>
<td style="text-align:center">x1</td>
<td style="text-align:center">N/A</td>
<td style="text-align:center">N/A</td>
<td style="text-align:center">N/A</td>
</tr>
<tr>
<td style="text-align:center">FTT=1</td>
<td style="text-align:center">3</td>
<td style="text-align:center">x2</td>
<td style="text-align:center">4</td>
<td style="text-align:center">x1.33</td>
<td style="text-align:center">33% 감소</td>
</tr>
<tr>
<td style="text-align:center">FTT=2</td>
<td style="text-align:center">5</td>
<td style="text-align:center">x3</td>
<td style="text-align:center">6</td>
<td style="text-align:center">x1.5</td>
<td style="text-align:center">50% 감소</td>
</tr>
<tr>
<td style="text-align:center">FTT=3</td>
<td style="text-align:center">7</td>
<td style="text-align:center">x4</td>
<td style="text-align:center">N/A</td>
<td style="text-align:center">N/A</td>
<td style="text-align:center">N/A</td>
</tr>
</tbody>
</table>
<h2 id="3-성능-vs-용량">3. 성능 vs 용량</h2>
<p>앞서 설명한 대로 Erasure Coding을 사용한다는 것은 성능보다 용량을 우선시 한다는 것이다. Erasure Coding은 Software 기반으로 처리를 하기 때문에 CPU를 많이 사용하게 되어 있으며 RAID1보다는 복잡한 계산식으로 인해서 상황에 맞게 선택을 하는 것이 중요하다.</p>
<h2 id="4-고려사항">4. 고려사항</h2>
<p>RAID-5/RAID-6의 경우 vSAN에서 Streched Storage에는 지원 하지 않음, 또한 All-Flash 구성으로 제공해야함.</p>
<h4 id="vsan-hardware-calculate">VSAN Hardware CALCULATE</h4>
<blockquote>
<p><a href="https://vsan.virtualappliances.eu/" target="_blank" rel="noopener noreffer"><i class="fas fa-link"></i> VSAN Hardware CALCULATE</a></p>
</blockquote>
<p><a href="https://cormachogan.com/2016/02/15/vsan-6-2-part-2-raid-5-and-raid-6-configurations/" target="_blank" rel="noopener noreffer"><i class="fas fa-link"></i> 참고 문헌</a></p>
<p><a href="https://download3.vmware.com/vcat/vmw-vcloud-architecture-toolkit-spv1-webworks/index.html#page/Storage%20and%20Availability/Architecting%20VMware%20vSAN%206.2/Architecting%20Virtual%20SAN%206.2.2.022.html" target="_blank" rel="noopener noreffer"><i class="fas fa-link"></i> 참고 문헌</a></p>
<p><a href="https://blogs.vmware.com/virtualblocks/2018/06/07/the-use-of-erasure-coding-in-vsan/" target="_blank" rel="noopener noreffer"><i class="fas fa-link"></i> 참고 문헌</a></p>
]]></description>
</item><item>
    <title>The Documentation NSXT and Ansible</title>
    <link>https://huntedhappy.github.io/nsxt/</link>
    <pubDate>Wed, 19 Jan 2022 09:27:36 &#43;0900</pubDate>
    <author>Author</author>
    <guid>https://huntedhappy.github.io/nsxt/</guid>
    <description><![CDATA[<h2 id="1-ansible을-통한-nsxt-구성">1. Ansible을 통한 NSXT 구성</h2>
<p>NSXT를 Ansible로 구성.</p>
<p>Ansible의 대한 보충 설명을 할 수 있으면 추후에 진행 하기로 하고 우선 설정의 대해서 설명을 먼저 하겠다.</p>
<p>먼저.. 이 부분을 블로그로 쓰는게 맞을까라는 고민을 좀 했다.</p>
<p>이유는 우선 Ansible로 구성이 되어 있기 때문에 코드가 들어가 있다. 그래서 NSXT Ansible Module을 다운로드 받고 나서 추가 된 부분을 Git Hub에 올려 두었다.</p>
<h2 id="2-설치">2. 설치</h2>
<h3 id="21-파이썬-설치">2.1. 파이썬 설치</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">yum update -y

rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm

rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm

yum install epel-release yum-utils python3-pip -y

pip3 install --upgrade pip setuptools ansible pyvmomi pyvim requests ruamel.yaml

dnf install libnsl -y
</code></pre></td></tr></table>
</div>
</div><p>파이썬을 설치 후 버전을 변경 하고 싶으면 아래 처럼 구성</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">sudo rm /usr/bin/python
sudo update-alternatives --install /usr/bin/python python /usr/bin/python<span class="o">(</span>TAB<span class="o">)</span> <span class="c1">## 설치되어 있는 버전을 확인 할 수 있다.</span>
</code></pre></td></tr></table>
</div>
</div><figure><figcaption>
            <h4>파이썬 버전 확인</h4>
        </figcaption>
</figure>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">sudo update-alternatives --install /usr/bin/python python /usr/bin/python2.7 <span class="m">1</span>
sudo update-alternatives --install /usr/bin/python python /usr/bin/python3.8 <span class="m">2</span>

sudo update-alternatives --config python
</code></pre></td></tr></table>
</div>
</div><figure><figcaption>
            <h4>파이썬 버전 선택</h4>
        </figcaption>
</figure>

<h3 id="22-ovf-tool">2.2. OVF Tool</h3>
<p>OVF Tool 다운로드</p>
<p><a href="https://developer.vmware.com/web/tool/4.4.0/ovf" target="_blank" rel="noopener noreffer"><i class="fas fa-link"></i> OVF Tool 다운로드 링크</a></p>
<figure><figcaption>
            <h4>원하는 버전으로 다운로드 받는다.</h4>
        </figcaption>
</figure>

<h3 id="23-nsxt-ansible-download">2.3. NSXT Ansible Download</h3>
<p>제공한 버전은 3.1 기준으로 구성을 하였다.</p>
<figure><figcaption>
            <h4>원하는 버전으로 다운로드 받는다.</h4>
        </figcaption>
</figure>

<h3 id="24-ansible-실행">2.4. Ansible 실행</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">ovftool -v 에러가 나오면 dnf install libnsl 설치
ansible-playbook 01_deploy_first_node.yml -vvv
</code></pre></td></tr></table>
</div>
</div><figure><figcaption>
            <h4>에러 발생시 dnf install libnsl 설치.</h4>
        </figcaption>
</figure>

<h3 id="25-github">2.5. Github</h3>
<p>다운로드 NSXT Ansible Module을 압축을 해제 하면 되는대, 그 부분을 별도로 github에 올려두었다.</p>
<p>추가적으로 vars라는 폴더와, 00 ~ 10 번 , answerfile,yml이 추가 된 것을 확인 할 수 있다.</p>
<p>코드를 하나 하나 설명을 하기에는.. 좀 벅찬 느낌이 든다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">git clone https://github.com/huntedhappy/nsxt3.1
</code></pre></td></tr></table>
</div>
</div>]]></description>
</item><item>
    <title>The Documentation LDAPS(AD)</title>
    <link>https://huntedhappy.github.io/ldaps/</link>
    <pubDate>Sun, 16 Jan 2022 22:32:24 &#43;0900</pubDate>
    <author>Author</author>
    <guid>https://huntedhappy.github.io/ldaps/</guid>
    <description><![CDATA[<h2 id="1-ldap-over-ssl">1. LDAP Over SSL</h2>
<p>대략 설명 보다. 이미지를 많이 첨부</p>
<p>LDAPS를 구성 할 경우 IP로 ldapsearch를 하면 실패하는 경우를 보게 될 것이다.
FQDN인증서를 확인 하면 FQDN만 구성이 되어 있는 것을 알 수 있다. 
그래서 SAN으로 구성하면서 IP도 포함되게 구성을 해보자.</p>
<figure><figcaption>
            <h4>Ldaps 인증서 확인</h4>
        </figcaption>
</figure>

<h3 id="11-certreqreq-설정">1.1. certreq.req 설정</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="c1">## 아래 IP로 ldapsearch를 하게 되면 에러가 난다. 만약 IP로도 가능하게 하려면 인증서 변경이 필요하다.</span>
ldapsearch -x -H ldaps://10.253.241.2 -D <span class="s1">&#39;cn=administrator,cn=users,dc=tkg,dc=io&#39;</span> -w <span class="s1">&#39;Passw0rd&#39;</span> -b <span class="s1">&#39;ou=tanzu,dc=tkg,dc=io&#39;</span>
<span class="c1">## 에러</span>
ldap_sasl_bind<span class="o">(</span>SIMPLE<span class="o">)</span>: Can<span class="err">&#39;</span>t contact LDAP server <span class="o">(</span>-1<span class="o">)</span>
</code></pre></td></tr></table>
</div>
</div><figure><figcaption>
            <h4>Ldaps Falied</h4>
        </figcaption>
</figure>

<p>윈도우에서 certlm.msc 실행</p>
<figure><figcaption>
            <h4>certlm.msc</h4>
        </figcaption>
</figure>

<p>certlm.msc &gt; 개인용 &gt; 모든 작업 &gt; 고급 작업 &gt; 사용자 지정 요청 만들기</p>
<p><figure><figcaption>
            <h4>certlm #1</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>certlm #2</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>certlm #3</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>certlm #4</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>certlm #5</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>certlm #6</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>certlm #7</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>certlm #8</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>certlm #9</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>certlm #10</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>certlm #11</h4>
        </figcaption>
</figure>
</p>
<p>인증서 생성</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="n">certreq</span> <span class="n">-submit</span> <span class="n">-sttrib</span> <span class="s2">&#34;CertificateTemplate:webserver&#34;</span> <span class="n">certreq</span><span class="p">.</span><span class="n">req</span> <span class="n">certreq</span><span class="p">.</span><span class="n">cer</span>
</code></pre></td></tr></table>
</div>
</div><figure><figcaption>
            <h4>certlm #12</h4>
        </figcaption>
</figure>

<h3 id="12-인증서-등록">1.2. 인증서 등록</h3>
<p>certlm.msc &gt; 개인용 &gt; 인증서 &gt; 모든 작업 &gt; 가져오기</p>
<p><figure><figcaption>
            <h4>인증서 등록#1</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>인증서 등록#2</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>인증서 등록#3</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>인증서 등록#4</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>인증서 등록#5</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>인증서 등록#6</h4>
        </figcaption>
</figure>
</p>
<p>등록 확인
<figure><figcaption>
            <h4>인증서 등록 확인#1</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>인증서 등록 확인#2</h4>
        </figcaption>
</figure>
</p>
<p>Ldapsearch를 IP로 했을 때 성공 하는 것을 확인 할 수 있다.
<figure><figcaption>
            <h4>인증서 등록 확인#2</h4>
        </figcaption>
</figure>
</p>
]]></description>
</item><item>
    <title>The Documentation NAP</title>
    <link>https://huntedhappy.github.io/nap/</link>
    <pubDate>Thu, 13 Jan 2022 18:10:22 &#43;0900</pubDate>
    <author>Author</author>
    <guid>https://huntedhappy.github.io/nap/</guid>
    <description><![CDATA[<h2 id="1-nap">1. NAP?</h2>
<p>NAP(NGINX App Protect)은 WAF and DoS Protection을 제공 한다. NGINX Plus에서 제공을 하며 컨테이너 환경에서 App을 보호 하기 위한 솔루션이다. 대부분 컨테이너 환경에서 Ingress를 NGINX로 많이 사용 할 것이다. NGINX Plus 라이센스를 구매 하면 NAP을 사용 할 수 있다.</p>
<h2 id="2-사전-구성">2. 사전 구성</h2>
<ul>
<li>Docker v18.09+</li>
<li>GNU Make</li>
<li>git</li>
<li>Helm3</li>
<li>OpenSSL</li>
<li><a href="https://github.com/OpenVPN/easy-rsa.git" target="_blank" rel="noopener noreffer">https://github.com/OpenVPN/easy-rsa.git</a></li>
<li>apt install git \  make \ make-guile</li>
</ul>
<h2 id="3-설치">3. 설치</h2>
<p>Namespace 생성 후 easy-rsa git clone</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">kubectl create ns ingress-nginx

git clone https://github.com/OpenVPN/easy-rsa.git
</code></pre></td></tr></table>
</div>
</div><figure><figcaption>
            <h4>easy rsa</h4>
        </figcaption>
</figure>

<p>인증서 생성 (인증서 생성은 반드시 이렇게 하지 않아도 된다.)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="nb">cd</span> easy-rsa/easyrsa3/

./easyrsa init-pki
./easyrsa build-ca
</code></pre></td></tr></table>
</div>
</div><figure><figcaption>
            <h4>easy rsa 구성#1</h4>
        </figcaption>
</figure>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">./easyrsa gen-req wildcard

./easyrsa sign-req server wildcard
</code></pre></td></tr></table>
</div>
</div><figure><figcaption>
            <h4>easy rsa 구성#2</h4>
        </figcaption>
</figure>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">openssl rsa -in /var/tmp/easy-rsa/easyrsa3/pki/private/wildcard.key -out /var/tmp/easy-rsa/easyrsa3/pki/private/wildcard-unencrypted.key

<span class="c1">## 인증서 Secret 생성</span>
kubectl create -n ingress-nginx secret tls wildcard-tls --key /var/tmp/easy-rsa/easyrsa3/pki/private/wildcard-unencrypted.key --cert /var/tmp/easy-rsa/easyrsa3/pki/issued/wildcard.crt

<span class="c1">## 안지워도된다.</span>
rm /var/tmp/easy-rsa/easyrsa3/pki/private/wildcard-unencrypted.key
</code></pre></td></tr></table>
</div>
</div><figure><figcaption>
            <h4>ssl 인증서 secret 생성</h4>
        </figcaption>
</figure>

<p>secret 인증서 확인</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">kubectl get secret -n ingress-nginx
</code></pre></td></tr></table>
</div>
</div><figure><figcaption>
            <h4>secret 확인</h4>
        </figcaption>
</figure>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="nb">cd</span> /var/tmp

<span class="c1">## nap을 위한 yaml파일 다운로드</span>
git clone https://github.com/nginxinc/kubernetes-ingress/

<span class="c1">## nap을 위한 helm repo 주소 추가</span>
helm repo add nginx-stable https://helm.nginx.com/stable
</code></pre></td></tr></table>
</div>
</div><figure><figcaption>
            <h4>git clone</h4>
        </figcaption>
</figure>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="nb">cd</span> /var/tmp/kubernetes-ingress/deployments/helm-chart
git checkout v1.11.3
</code></pre></td></tr></table>
</div>
</div><figure><figcaption>
            <h4>git checkout</h4>
        </figcaption>
</figure>

<p>라이센스 발급 30일 trial을 받을 수 있다. 가입 필요
<a href="https://www.nginx.com/free-trial-request-nginx-ingress-controller/" target="_blank" rel="noopener noreffer"><i class="far fa-file-archive fa-fw"></i>&nbsp;NAP 발급 링크</a></p>
<p>미리 Harbor에 ingress-nginx project 생성이 되어 있어야함</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="nv">REGISTRY</span><span class="o">=</span>&lt;registry IP or FQDN&gt;
<span class="nv">NS</span><span class="o">=</span>&lt;your namespace&gt;
<span class="nv">REGISTRY</span><span class="o">=</span>10.253.110.4
<span class="nv">NS</span><span class="o">=</span>ingress-nginx
</code></pre></td></tr></table>
</div>
</div><figure><figcaption>
            <h4>Harbor 확인</h4>
        </figcaption>
</figure>

<p>발급 받은 라이센스를 복사</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">mkdir -p /var/tmp/kubernetes-ingress
cp nginx-repo.key nginx-repo.crt  /var/tmp/kubernetes-ingress
</code></pre></td></tr></table>
</div>
</div><figure><figcaption>
            <h4>라이센스 복사</h4>
        </figcaption>
</figure>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="nb">cd</span> /var/tmp/kubernetes-ingress

make debian-image-nap-plus <span class="nv">PREFIX</span><span class="o">=</span><span class="nv">$REGISTRY</span>/<span class="nv">$NS</span>/nginx-plus-ingress <span class="nv">TARGET</span><span class="o">=</span>container
</code></pre></td></tr></table>
</div>
</div><figure><figcaption>
            <h4>Docker Pull</h4>
        </figcaption>
</figure>

<p>docker image 확인</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">docker images
</code></pre></td></tr></table>
</div>
</div><figure><figcaption>
            <h4>Docker Image 확인</h4>
        </figcaption>
</figure>

<p>Harbor에 Push</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">docker image tag 18a49497920c <span class="nv">$REGISTRY</span>/<span class="nv">$NS</span>/nginx-plus-ingress:1.11.3

docker login &lt;harbor IP&gt;
make push <span class="nv">PREFIX</span><span class="o">=</span><span class="nv">$REGISTRY</span>/<span class="nv">$NS</span>/nginx-plus-ingress
</code></pre></td></tr></table>
</div>
</div><p><figure><figcaption>
            <h4>Harbor push#1</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>Harbor push#2</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>Harbor push#3</h4>
        </figcaption>
</figure>
</p>
<p>Helm Value 복사 (원본을 건드리지 않게 하기 위해 별도로 복사를 한다.)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="nb">cd</span> deployments/helm-chart
cp values-plus.yaml values-plus.yaml.orig
</code></pre></td></tr></table>
</div>
</div><figure><figcaption>
            <h4>Helm Value 복사</h4>
        </figcaption>
</figure>

<p>복사한 파일을 열어 보면 아래와 같이 되어 있는대 수정해줘야 하는 부분을 수정 해준다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="c1">## vi 편집</span>
vi values-plus.yaml 

<span class="c1">## 내용 (imagePullSecretName의 경우 Harbor에 Public으로 만들었으면 상관 없음)</span>
controller:
  replicaCount: <span class="m">1</span>
  nginxplus: <span class="nb">true</span>
  image:
    repository: 10.253.106.46/ingress-nginx/nginx-plus-ingress
    tag: <span class="s2">&#34;1.11.3&#34;</span>
  service:
    externalTrafficPolicy: Cluster
  appprotect:
    <span class="c1">## Enable the App Protect module in the Ingress Controller.</span>
    enable: <span class="nb">true</span>
  wildcardTLS:
    <span class="c1">## The base64-encoded TLS certificate for every Ingress host that has TLS enabled but no secret specified.</span>
    <span class="c1">## If the parameter is not set, for such Ingress hosts NGINX will break any attempt to establish a TLS connection.</span>
    cert: <span class="s2">&#34;&#34;</span>

    <span class="c1">## The base64-encoded TLS key for every Ingress host that has TLS enabled but no secret specified.</span>
    <span class="c1">## If the parameter is not set, for such Ingress hosts NGINX will break any attempt to establish a TLS connection.</span>
    key: <span class="s2">&#34;&#34;</span>

    <span class="c1">## The secret with a TLS certificate and key for every Ingress host that has TLS enabled but no secret specified.</span>
    <span class="c1">## The value must follow the following format: `&lt;namespace&gt;/&lt;name&gt;`.</span>
    <span class="c1">## Used as an alternative to specifying a certificate and key using `controller.wildcardTLS.cert` and `controller.wildcardTLS.key` parameters.</span>
    <span class="c1">## Format: &lt;namespace&gt;/&lt;secret_name&gt;</span>
    secret: ingress-nginx/wildcard-tls
  serviceAccount:
    <span class="c1">## The name of the service account of the Ingress controller pods. Used for RBAC.</span>
    <span class="c1">## Autogenerated if not set or set to &#34;&#34;.</span>
    name: ingress-nginx
    <span class="c1">## The name of the secret containing docker registry credentials.</span>
    <span class="c1">## Secret must exist in the same namespace as the helm release.</span>
    imagePullSecretName: <span class="s2">&#34;regcred&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p>PSP를 혀용하기 위해 해당 파일을 실행 해준다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">kubectl apply -f https://raw.githubusercontent.com/f5devcentral/f5-bd-tanzu-tkg-nginxplus/main/nginx-psp.yaml
</code></pre></td></tr></table>
</div>
</div><figure><figcaption>
            <h4>psp 허용</h4>
        </figcaption>
</figure>

<p>HELM 실행</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">kubectl create secret generic regcred --from-file<span class="o">=</span>.dockerconfigjson<span class="o">=</span><span class="nv">$HOME</span>/.docker/config.json --type<span class="o">=</span>kubernetes.io/dockerconfigjson -n ingress-nginx

helm install nap nginx-stable/nginx-ingress -f values-plus.yaml -n ingress-nginx
</code></pre></td></tr></table>
</div>
</div><figure><figcaption>
            <h4>helm으로 nap 설치</h4>
        </figcaption>
</figure>

<p>설치 확인</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">watch -n <span class="m">1</span> kubectl -n ingress-nginx get all
</code></pre></td></tr></table>
</div>
</div><p><figure><figcaption>
            <h4>설치 확인</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>L4 확인</h4>
        </figcaption>
</figure>
</p>
<h2 id="4-waf">4. WAF</h2>
<p>WAF TEST를 위해 웹 구성</p>
<h3 id="41-test-web-구성">4.1. TEST WEB 구성</h3>
<p>TEST를 하기 위해 제공하는 Manifest를 다운로드 한다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">wget https://raw.githubusercontent.com/f5devcentral/f5-bd-tanzu-tkg-nginxplus/main/cafe-rbac.yaml
wget https://raw.githubusercontent.com/f5devcentral/f5-bd-tanzu-tkg-nginxplus/main/cafe.yaml
wget https://raw.githubusercontent.com/f5devcentral/f5-bd-tanzu-tkg-nginxplus/main/cafe-ingress.yaml

kubectl apply -f cafe-rbac.yaml -n <span class="nb">test</span>
kubectl apply -f cafe.yaml -n <span class="nb">test</span>

vi cafe-ingress.yaml <span class="o">(</span>인증서 만들었던 Domain으로 변경<span class="o">)</span>
</code></pre></td></tr></table>
</div>
</div><figure><figcaption>
            <h4>Domain을 변경 한다.</h4>
        </figcaption>
</figure>

<p>Domain 변경 후 실행</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">kubectl apply -f cafe-ingress.yaml -n <span class="nb">test</span>
</code></pre></td></tr></table>
</div>
</div><figure><figcaption>
            <h4>Ingress 확인.</h4>
        </figcaption>
</figure>

<p>POSTMAN으로 접속이 되는지 확인
<figure><figcaption>
            <h4>POSTMAN 확인.</h4>
        </figcaption>
</figure>
</p>
<h3 id="42-waf-구성">4.2. WAF 구성</h3>
<p>ELK를 구성 하기 위해 syslog pod를 구성한다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">wget https://raw.githubusercontent.com/f5devcentral/f5-bd-tanzu-tkg-nginxplus/main/syslog-rbac.yaml
wget https://raw.githubusercontent.com/f5devcentral/f5-bd-tanzu-tkg-nginxplus/main/syslog.yaml

kubectl apply -f syslog-rbac.yaml -n ingress-nginx
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">kubectl apply -f syslog.yaml -n ingress-nginx
wget https://raw.githubusercontent.com/f5devcentral/f5-bd-tanzu-tkg-nginxplus/main/ap-apple-uds.yaml
wget https://raw.githubusercontent.com/f5devcentral/f5-bd-tanzu-tkg-nginxplus/main/ap-dataguard-alarm-policy.yaml
wget https://raw.githubusercontent.com/f5devcentral/f5-bd-tanzu-tkg-nginxplus/main/ap-logconf.yaml

kubectl apply -f  ap-apple-uds.yaml -n <span class="nb">test</span>
kubeclt apply -f  ap-dataguard-alarm-policy.yaml -n <span class="nb">test</span>
kubectl apply -f  ap-logconf.yaml -n <span class="nb">test</span>
</code></pre></td></tr></table>
</div>
</div><p>ingress에 annotation을 설정</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">wget https://raw.githubusercontent.com/f5devcentral/f5-bd-tanzu-tkg-nginxplus/main/cafe-ingress-ap.yaml
kubectl get pod -n ingress-nginx -o wide

<span class="c1">## vi 편집 실행</span>
vi cafe-ingress-ap.yaml

apiVersion: networking.k8s.io/v1beta1
kind: Ingress
metadata:
  name: cafe-ingress
  annotations:
    appprotect.f5.com/app-protect-policy: <span class="s2">&#34;test/dataguard-alarm&#34;</span>
    appprotect.f5.com/app-protect-enable: <span class="s2">&#34;True&#34;</span>
    appprotect.f5.com/app-protect-security-log-enable: <span class="s2">&#34;True&#34;</span>
    appprotect.f5.com/app-protect-security-log: <span class="s2">&#34;test/logconf&#34;</span>
    appprotect.f5.com/app-protect-security-log-destination: <span class="s2">&#34;syslog:server=SYSLOG:514&#34;</span>
spec:
  ingressClassName: nginx <span class="c1"># use only with k8s version &gt;= 1.18.0</span>
  tls:  - hosts:
    - cafe.vcf.local  <span class="c1">## 인증서와 동일한 도메인으로 변경</span>
  rules:
  - host: cafe.vcf.local <span class="c1">## 인증서와 동일한 도메인으로 변경</span>
    http:
      paths:
      - path: /tea
        backend:
          serviceName: tea-svc
          servicePort: <span class="m">80</span>
      - path: /coffee
        backend:
          serviceName: coffee-svc
          servicePort: <span class="m">80</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="c1">## syslog service ip</span>
<span class="nv">SYSLOG_IP</span><span class="o">=</span>10.101.182.155
vi cafe-ingress-ap.yaml

sed -e <span class="s2">&#34;s/SYSLOG/</span><span class="nv">$SYSLOG_IP</span><span class="s2">/&#34;</span> cafe-ingress-ap.yaml &gt; cafe-ingress-ap-syslog.yaml
kubectl apply -n <span class="nb">test</span> -f cafe-ingress-ap-syslog.yaml

kubectl get ingress -n <span class="nb">test</span>

<span class="c1">## 아래 명령어로 annotation을 확인 할 수 있다.</span>
kubrectl get ingress cafe-ingress -n <span class="nb">test</span> -o yaml
</code></pre></td></tr></table>
</div>
</div><figure><figcaption>
            <h4>Annotation 확인.</h4>
        </figcaption>
</figure>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">kubectl get pod -n ingress-nginx

LOG 확인
kubectl -n ingress-nginx <span class="nb">exec</span> -it syslog-65d847447d-ghbvq -- tail -f /var/log/messages
</code></pre></td></tr></table>
</div>
</div><p><figure><figcaption>
            <h4>syslog pod 확인.</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>PostMan 요청 후 REJECT확인.</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>Pod 로그 확인시 Attack 확인.</h4>
        </figcaption>
</figure>
</p>
<h2 id="5-elk">5. ELK</h2>
<p>LOG를 좀 가시적이게 표현하기 위해 ELK를 구성</p>
<h3 id="51-elastic-연동">5.1. Elastic 연동</h3>
<p>logstach를 5144로 구성한 이유는 Logstach 구성시 514가 well-known 포트라 5144로 변경
logstash yaml 파일, <a href="/nap/logstash_test.yaml" rel=""><i class="far fa-file-archive fa-fw"></i>&nbsp;logstash_test.yaml</a>.</p>
<figure><figcaption>
            <h4>logstach 확인.</h4>
        </figcaption>
</figure>

<p>ingress 설정에서 syslog server 를 logstash cluster IP로 설정
<figure><figcaption>
            <h4>annotation에서 logstach로 syslog IP 변경 .</h4>
        </figcaption>
</figure>
</p>
<p>해당 파일을 다운로드 받는다.</p>
<p><a href="https://github.com/f5devcentral/f5-waf-elk-dashboards" target="_blank" rel="noopener noreffer"><i class="fas fa-link"></i> Dashboard 링크 </a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">mkdir /var/tmp/kibana
<span class="nb">cd</span> /var/tmp/kibana
cp false-positives-dashboards.ndjson overview-dashboard.ndjson /var/tmp/kibana
</code></pre></td></tr></table>
</div>
</div><figure><figcaption>
            <h4>파일 다운로드</h4>
        </figcaption>
</figure>

<p>대쉬보드 업로드</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="nb">cd</span> /var/tmp

<span class="nv">KIBANA_URL</span><span class="o">=</span> <span class="o">{</span>FQDN or IP<span class="o">}</span>
<span class="nv">KIBANA_URL</span><span class="o">=</span>http://kibana.vcf.local:5601

jq -s . kibana/overview-dashboard.ndjson <span class="p">|</span> jq <span class="s1">&#39;{&#34;objects&#34;: . }&#39;</span> <span class="p">|</span> <span class="se">\
</span><span class="se"></span>curl -k --location --request POST <span class="s2">&#34;</span><span class="nv">$KIBANA_URL</span><span class="s2">/api/kibana/dashboards/import&#34;</span> <span class="se">\
</span><span class="se"></span>--header <span class="s1">&#39;kbn-xsrf: true&#39;</span> <span class="se">\
</span><span class="se"></span>--header <span class="s1">&#39;Content-Type: text/plain&#39;</span> -d @- <span class="se">\
</span><span class="se"></span><span class="p">|</span> jq

jq -s . kibana/false-positives-dashboards.ndjson <span class="p">|</span> jq <span class="s1">&#39;{&#34;objects&#34;: . }&#39;</span> <span class="p">|</span> <span class="se">\
</span><span class="se"></span>curl -k --location --request POST <span class="s2">&#34;</span><span class="nv">$KIBANA_URL</span><span class="s2">/api/kibana/dashboards/import&#34;</span> <span class="se">\
</span><span class="se"></span>--header <span class="s1">&#39;kbn-xsrf: true&#39;</span> <span class="se">\
</span><span class="se"></span>--header <span class="s1">&#39;Content-Type: text/plain&#39;</span> -d @- <span class="se">\
</span><span class="se"></span><span class="p">|</span> jq
</code></pre></td></tr></table>
</div>
</div><p>kibana접속 후 index patterns에 waf-logs-* 확인
<figure><figcaption>
            <h4>kibana 확인</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>kibana 대시보드 확인</h4>
        </figcaption>
</figure>
</p>
<p><a href="https://devcentral.f5.com/s/articles/Deploying-NGINXplus-with-AppProtect-in-Tanzu-Kubernetes-Grid" target="_blank" rel="noopener noreffer"><i class="fas fa-link"></i> 참고문헌 </a></p>
]]></description>
</item><item>
    <title>The Documentation Openshift</title>
    <link>https://huntedhappy.github.io/openshift/</link>
    <pubDate>Thu, 13 Jan 2022 15:48:08 &#43;0900</pubDate>
    <author>Author</author>
    <guid>https://huntedhappy.github.io/openshift/</guid>
    <description><![CDATA[<h2 id="1-openshift">1. Openshift</h2>
<p><code>오픈시프트 오리진(OpenShift Origin)</code>은 오픈시프트 온라인, 오픈시프트 데디케이티드, 오픈시프트 컨테이너 플랫폼에 사용되는 업스트림 커뮤니티 프로젝트이다. 도커 컨테이너 패키징 코어와 쿠버네티스 컨테이너 클러스터 관리 기능을 기반에 두고 개발된 오리진은 애플리케이션 수명 관리 기능과 데브옵스 도구를 통해 증강된다. 오리진은 오픈 소스 애플리케이션 컨테이너 플랫폼을 제공한다. 오리진 프로젝트의 모든 소스 코드는 깃허브에서 아파치 라이선스 (버전 2.0)을 통해 이용이 가능하다.[4]</p>
<p><code>오픈시프트 온라인(OpenShift Online)</code>은 레드햇의 퍼블릭 클라우드 애플리케이션 개발 및 호스팅 서비스이다. 온라인은 오리진 프로젝트 소스 코드의 버전 2를 제공하였으며, 아파치 라이선스 버전 2.0 하에서 이용이 가능하다.[5] 온라인은 리소스 할당 기어(gear) 하에서 구동되는 미리 빌드된 카트리지를 통해 다양한 언어, 프레임워크 데이터베이스를 지원한다. 개발자들은 오픈시프트 카트리지 API를 통해 다른 언어, 데이터베이스, 구성 요소를 추가할 수 있다.[6] 오픈시프트 3의 선호로 사용이 권장되지 않는다(deprecated).</p>
<p><code>오픈시프트 데디케이티드(OpenShift Dedicated)</code>는 레드햇의 매니지드 프라이빗 클러스터 기능으로, 도커가 제공하는 애플리케이션 컨테이너의 코어를 기반으로 빌드되며 레드햇 엔터프라이즈 리눅스의 토대 위에 쿠버네티스가 제공하는 오케스트레이션 및 관리가 포함되어 있다. 아마존 웹 서비스(AWS)와 구글 클라우드 플랫폼(GCP) 마켓플레이스를 통해 이용이 가능하다.</p>
<p><code>오픈시프트 컨테이너 플랫폼(OpenShift Container Platform)</code>은 레드햇의 사내(on-premises) 프라이빗 PaaS 제품으로, 도커가 제공하는 애플리케이션 컨테이너의 코어를 기반으로 빌드되며 레드햇 엔터프라이즈 리눅스의 토대 위에 쿠버네티스가 제공하는 오케스트레이션 및 관리가 포함되어 있다.</p>
<p>참고문헌  <a href="https://ko.wikipedia.org/wiki/%EC%98%A4%ED%94%88%EC%8B%9C%ED%94%84%ED%8A%B8" target="_blank" rel="noopener noreffer"><i class="fas fa-link"></i> Openshift </a></p>
<h2 id="2-사전구성">2. 사전구성</h2>
<h3 id="21-dns-구성">2.1. DNS 구성</h3>
<table>
<thead>
<tr>
<th>Common</th>
<th>Component Name</th>
<th>Cluster Name</th>
<th>BaseDomain</th>
<th>A Record</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td>api</td>
<td>openshift</td>
<td>vcf.local</td>
<td>10.253.107.254</td>
</tr>
<tr>
<td></td>
<td>api-int</td>
<td>openshift</td>
<td>vcf.local</td>
<td>10.253.107.254</td>
</tr>
<tr>
<td>*</td>
<td>apps</td>
<td>openshift</td>
<td>vcf.local</td>
<td>10.253.107.10</td>
</tr>
<tr>
<td>console-openshift-console</td>
<td>apps</td>
<td>openshift</td>
<td>vcf.local</td>
<td>10.253.107.10</td>
</tr>
<tr>
<td>*</td>
<td>apps</td>
<td>openshift</td>
<td>vcf.local</td>
<td>10.253.107.10</td>
</tr>
<tr>
<td></td>
<td>bootstrap</td>
<td>openshift</td>
<td>vcf.local</td>
<td>10.253.107.10</td>
</tr>
<tr>
<td></td>
<td>master0</td>
<td>openshift</td>
<td>vcf.local</td>
<td>10.253.107.11</td>
</tr>
<tr>
<td></td>
<td>master1</td>
<td>openshift</td>
<td>vcf.local</td>
<td>10.253.107.12</td>
</tr>
<tr>
<td></td>
<td>master2</td>
<td>openshift</td>
<td>vcf.local</td>
<td>10.253.107.13</td>
</tr>
<tr>
<td></td>
<td>worker1</td>
<td>openshift</td>
<td>vcf.local</td>
<td>10.253.107.14</td>
</tr>
<tr>
<td></td>
<td>worker2</td>
<td>openshift</td>
<td>vcf.local</td>
<td>10.253.107.15</td>
</tr>
<tr>
<td></td>
<td>worker3</td>
<td>openshift</td>
<td>vcf.local</td>
<td>10.253.107.16</td>
</tr>
</tbody>
</table>
<figure><figcaption>
            <h4>DNS 구성</h4>
        </figcaption>
</figure>

<h3 id="22-dhcp-구성">2.2. DHCP 구성</h3>
<p>DHCP 구성 - NSXT로 구성을 하였다.</p>
<p><figure><figcaption>
            <h4>DHCP 구성#1</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>DHCP 구성#2</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>DHCP 구성#3</h4>
        </figcaption>
</figure>
</p>
<h2 id="3-파일-다운로드">3. 파일 다운로드</h2>
<p>OC를 다운로드 하기 위해 redhat에 가입 하고 Login 필요</p>
<p>OC 다운로드 링크  <a href="https://sso.redhat.com/auth/realms/redhat-external/protocol/openid-connect/auth?client_id=cloud-services&amp;redirect_uri=https%3A%2F%2Fconsole.redhat.com%2Fopenshift%2Finstall&amp;state=3c149436-35f6-4385-9739-68ad3e7cfb3e&amp;response_mode=fragment&amp;response_type=code&amp;scope=openid&amp;nonce=50b0191c-64a2-4655-81da-8ee6e7665375" target="_blank" rel="noopener noreffer"><i class="fas fa-link"></i> OC 다운로드 링크 </a></p>
<p><figure><figcaption>
            <h4>OC 다운로드#1</h4>
        </figcaption>
</figure>

PullSecret을 저장해 둔다. <figure><figcaption>
            <h4>OC 다운로드#2</h4>
        </figcaption>
</figure>
</p>
<p>압축을 해제 하고 환경변수를 별도로 구성하지 않게 /usr/local/bin 에다가 copy를 한다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">tar -xzvf openshift-client-linux.tar.gz

tar -xzvf openshift-install-linux.tar.gz

mv oc kubectl openshift-install /usr/local/bin

oc version

openshift-install version
</code></pre></td></tr></table>
</div>
</div><p>sshkeygen을 생성 한다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">ssh-keygen -t ed25519 -N <span class="s1">&#39;&#39;</span> -f ~/.ssh/id_rsa
	
<span class="nb">eval</span> <span class="s2">&#34;</span><span class="k">$(</span>ssh-agent -s<span class="k">)</span><span class="s2">&#34;</span>

ssh-add ~/.ssh/id_rsa
</code></pre></td></tr></table>
</div>
</div><h2 id="4-vcenter-ssh-thumbprint-얻기">4. vCenter SSH thumbprint 얻기</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">openssl s_client -servername vcsa01.vcf.local -connect vcsa01.vcf.local:443 <span class="p">|</span> openssl x509 <span class="p">|</span> tee ca.crt

cp ca.crt /usr/local/share/ca-certificates/

update-ca-certificates
</code></pre></td></tr></table>
</div>
</div><h2 id="5-temp-image">5. Temp Image</h2>
<p><a href="https://mirror.openshift.com/pub/openshift-v4/dependencies/rhcos/latest/latest/" target="_blank" rel="noopener noreffer"><i class="far fa-file-archive fa-fw"></i>&nbsp;RHCOS Download Link</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">wget https://mirror.openshift.com/pub/openshift-v4/dependencies/rhcos/latest/latest/rhcos-vmware.x86_64.ova
</code></pre></td></tr></table>
</div>
</div><p>또는 아래와 같이 GUI에서 다운로드 받을 수 있다.</p>
<p><figure><figcaption>
            <h4>RHCOS OVA GUI 다운로드#2</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>RHCOS OVA GUI 다운로드#2</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>RHCOS OVA GUI 다운로드#3</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>RHCOS OVA GUI 다운로드#4</h4>
        </figcaption>
</figure>
</p>
<h3 id="51-temp-구성">5.1. Temp 구성</h3>
<p><figure><figcaption>
            <h4>vSphere Temp Upload#1</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>vSphere Temp Upload#2</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>vSphere Temp Upload#3</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>vSphere Temp Upload#4</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>vSphere Temp Upload#5</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>vSphere Temp Upload#6</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>vSphere Temp Upload#7</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>vSphere Temp Upload#8</h4>
        </figcaption>
</figure>
</p>
<h2 id="6-oc-install">6. OC Install</h2>
<div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw"></i>SSL 구성<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p>install-config.yaml 참조</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">apiVersion: v1
baseDomain: vcf.local
compute:
- architecture: amd64
  hyperthreading: Enabled
  name: worker
  platform: <span class="o">{}</span>
  replicas: <span class="m">3</span>
controlPlane:
  architecture: amd64
  hyperthreading: Enabled
  name: master
  platform: <span class="o">{}</span>
  replicas: <span class="m">3</span>
metadata:
  creationTimestamp: null
  name: ocp
networking:
  clusterNetwork:
  - cidr: 10.128.0.0/14
    hostPrefix: <span class="m">23</span>
  machineNetwork:
  - cidr: 10.0.0.0/16
  networkType: OpenShiftSDN
  serviceNetwork:
  - 172.30.0.0/16
platform:
  vsphere:
    apiVIP: 10.253.107.254
    cluster: OBCLUSTER
    datacenter: OBDC
    defaultDatastore: vsanDatastore
    ingressVIP: 10.253.107.253
    network: LS-MGMT-10.253.107.x
    password: Openbase!234
    username: administrator@vsphere.local
    vCenter: vcsa01.vcf.local
  fips: <span class="nb">false</span>
publish: External
pullSecret: <span class="s1">&#39;full secret 넣어줘야함&#39;</span>
sshKey: <span class="p">|</span>
  ssh-ed25519 AAAAC

</code></pre></td></tr></table>
</div>
</div><p>ocp 실행</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">mkdir ocp
cp install-config.yaml ocp
openshift-install create install-config --dir<span class="o">=</span>ocp
</code></pre></td></tr></table>
</div>
</div><p>Manifest 변경</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">openshift-install create manifests --dir ocp

<span class="nb">cd</span> ~/ocp/openshift
rm -rf 99_openshift-cluster-api_master-*
rm -rf 99_openshift-cluster-api_worker-machineset-0.yaml

<span class="nb">cd</span> ~/ocp/manifests/

vi cluster-scheduler-02-config.yml

apiVersion: config.openshift.io/v1
kind: Scheduler
metadata:
  creationTimestamp: null
  name: cluster
spec:
  mastersSchedulable: <span class="nb">false</span>    <span class="c1">### true &gt; false change</span>
  policy:
    name: <span class="s2">&#34;&#34;</span>
status: <span class="o">{}</span>
</code></pre></td></tr></table>
</div>
</div><p>ignition 실행</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">openshift-install create ignition-configs --dir ocp
</code></pre></td></tr></table>
</div>
</div><p>L4 VIP로 설정 필요</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">cat <span class="s">&lt;&lt; EOF | tee append-bootstrap.ign
</span><span class="s">{
</span><span class="s">  &#34;ignition&#34;: {
</span><span class="s">    &#34;config&#34;: {
</span><span class="s">      &#34;merge&#34;: [
</span><span class="s">        {
</span><span class="s">          &#34;source&#34;: &#34;http://10.253.107.254:8080/bootstrap.ign&#34; ## L4 VIP로 변경
</span><span class="s">        }
</span><span class="s">      ] 
</span><span class="s">    },
</span><span class="s">    &#34;version&#34;: &#34;3.1.0&#34;
</span><span class="s">  }
</span><span class="s">}
</span><span class="s">EOF</span>
</code></pre></td></tr></table>
</div>
</div><p>BASE64 실행</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">base64 -w0 append-bootstrap.ign &gt; append-bootstrap.64
base64 -w0 master.ign &gt; master.64
base64 -w0 worker.ign &gt; worker.64
</code></pre></td></tr></table>
</div>
</div><p>웹 구성에서 파일을 다운로드 할 수 있게 file 폴더 구성 후 ign을 복사 한다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">mkdir -p /usr/share/nginx/html/files
cp *.ign /usr/share/nginx/html/files/
chmod <span class="m">644</span> /usr/share/nginx/html/files/*.ign
</code></pre></td></tr></table>
</div>
</div></div>
        </div>
    </div>
<h2 id="7-nginx">7. NGINX</h2>
<p>NGINX 설치</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">apt update <span class="o">&amp;&amp;</span> apt upgrade -y

make로 설치
apt install gcc libpcre3 libpcre3-dev libssl-dev make -y

mkdir -p /var/tmp/src <span class="o">&amp;&amp;</span> <span class="nb">cd</span> /var/tmp/src
wget http://nginx.org/download/nginx-1.20.2.tar.gz
tar -xzf nginx-1.20.2.tar.gz
<span class="nb">cd</span> nginx-1.20.2

./configure --prefix<span class="o">=</span>/var/www/html --sbin-path<span class="o">=</span>/usr/sbin/nginx --conf-path<span class="o">=</span>/etc/nginx/nginx.conf --http-log-path<span class="o">=</span>/var/log/nginx/access.log --error-log-path<span class="o">=</span>/var/log/nginx/error.log --with-pcre  --lock-path<span class="o">=</span>/var/lock/nginx.lock --pid-path<span class="o">=</span>/var/run/nginx.pid --with-http_ssl_module --with-http_image_filter_module<span class="o">=</span>dynamic --modules-path<span class="o">=</span>/etc/nginx/modules --with-http_v2_module --with-stream<span class="o">=</span>dynamic --with-http_addition_module --with-http_mp4_module --with-stream

make
make install

vi /lib/systemd/system/nginx.service

<span class="o">[</span>Unit<span class="o">]</span>
<span class="nv">Description</span><span class="o">=</span>The NGINX HTTP and reverse proxy server
<span class="nv">After</span><span class="o">=</span>syslog.target network-online.target remote-fs.target nss-lookup.target
<span class="nv">Wants</span><span class="o">=</span>network-online.target
        
<span class="o">[</span>Service<span class="o">]</span>
<span class="nv">Type</span><span class="o">=</span>forking
<span class="nv">PIDFile</span><span class="o">=</span>/var/run/nginx.pid
<span class="nv">ExecStartPre</span><span class="o">=</span>/usr/sbin/nginx -t
<span class="nv">ExecStart</span><span class="o">=</span>/usr/sbin/nginx
<span class="nv">ExecReload</span><span class="o">=</span>/usr/sbin/nginx -s reload
<span class="nv">ExecStop</span><span class="o">=</span>/bin/kill -s QUIT <span class="nv">$MAINPID</span>
<span class="nv">PrivateTmp</span><span class="o">=</span><span class="nb">true</span>
        
<span class="o">[</span>Install<span class="o">]</span>
<span class="nv">WantedBy</span><span class="o">=</span>multi-user.target

</code></pre></td></tr></table>
</div>
</div><p>nginx.conf 설정</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="c1">## 아래 내용 추가</span>
vi etc/nginx/nginx.conf 

worker_processes auto<span class="p">;</span>                    <span class="c1">## 추가  </span>
error_log /var/log/nginx/error.log<span class="p">;</span>       <span class="c1">## 추가</span>
pid /run/nginx.pid<span class="p">;</span>                       <span class="c1">## 추가</span>

include /etc/nginx/stream.conf.d/*.conf<span class="p">;</span>  <span class="c1">## 추가</span>

http <span class="o">{</span>
    include       mime.types<span class="p">;</span>
    default_type  application/octet-stream<span class="p">;</span>

    log_format  main  <span class="s1">&#39;$remote_addr - $remote_user [$time_local] &#34;$request&#34; &#39;</span>
                      <span class="s1">&#39;$status $body_bytes_sent &#34;$http_referer&#34; &#39;</span>
                      <span class="s1">&#39;&#34;$http_user_agent&#34; &#34;$http_x_forwarded_for&#34;&#39;</span><span class="p">;</span>

    access_log  logs/access.log  main<span class="p">;</span>

    sendfile        on<span class="p">;</span>
    <span class="c1">#tcp_nopush     on;</span>

    <span class="c1">#keepalive_timeout  0;</span>
    keepalive_timeout  65<span class="p">;</span>

    <span class="c1">#gzip  on;</span>

    server <span class="o">{</span>
        listen       8081<span class="p">;</span>
        server_name  localhost<span class="p">;</span>

        location / <span class="o">{</span>
            root   html<span class="p">;</span>
            index  index.html index.htm<span class="p">;</span>
        <span class="o">}</span>

        error_page   <span class="m">500</span> <span class="m">502</span> <span class="m">503</span> <span class="m">504</span>  /50x.html<span class="p">;</span>
        <span class="nv">location</span> <span class="o">=</span> /50x.html <span class="o">{</span>
            root   html<span class="p">;</span>
        <span class="o">}</span>
    include /etc/nginx/conf.d/*.conf<span class="p">;</span>   <span class="c1">## 추가</span>
<span class="o">}</span>

</code></pre></td></tr></table>
</div>
</div><p>웹 구성</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">cat <span class="s">&lt;&lt; EOF | tee /etc/nginx/conf.d/openshift.conf
</span><span class="s">server {
</span><span class="s">    listen       8080;
</span><span class="s">    server_name  localhost;
</span><span class="s">
</span><span class="s">
</span><span class="s">    location / {
</span><span class="s">        root   /usr/share/nginx/html/files;
</span><span class="s">        autoindex on;
</span><span class="s">    }
</span><span class="s">
</span><span class="s">    error_page   500 502 503 504  /50x.html;
</span><span class="s">    location = /50x.html {
</span><span class="s">        root   /usr/share/nginx/html;
</span><span class="s">    }
</span><span class="s">
</span><span class="s">}
</span><span class="s">EOF</span>

</code></pre></td></tr></table>
</div>
</div><p>nginx 테스트 및 실행</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">nginx -t
systemctl restart nginx
systemctl <span class="nb">enable</span> nginx
</code></pre></td></tr></table>
</div>
</div><figure><figcaption>
            <h4>NGINX 확인</h4>
        </figcaption>
</figure>

<h2 id="8-temp-이미지로-vm-구성">8. Temp 이미지로 VM 구성</h2>
<p><code>Temp를 활용하여 bootstrap , master 3개 , worker 3개를 배포한다.</code></p>
<p><figure><figcaption>
            <h4>Image 구성#1</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>Image 구성#2</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>Image 구성#3</h4>
        </figcaption>
</figure>

base64로 변경한 값을 여기서 넣어 준다.
bootstrap : cat append-bootstrap.64 , 마스터 : cat master.64 , Worker : cat worker.64 의 값을 넣어 주면 됨
<figure><figcaption>
            <h4>Image 구성#4</h4>
        </figcaption>
</figure>
</p>
<h2 id="9-l4-구성">9. L4 구성</h2>
<p><code>L4장비가 없을 경우 / L4장비가 있을 경우를 생각해서 NGINX도 포함 시킴</code></p>
<h3 id="91-nsxt-l4-구성">9.1. NSXT L4 구성</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="c1">## 설명</span>
ocp_8080 : jumphost <span class="o">(</span>nginx에서 파일을 땡기기 위해 구성<span class="o">)</span>

<span class="c1">## 배포 완료 후 bootstrap은 삭제 해도 됨</span>
ocp-master-and-boot-machine-22623 : bootstrap 및 master
ocp_master-and-boot-api-6443: bootstrap 및 master

<span class="c1">## Openshift는 Route를사용 하기 때문에 설정</span>
ocp_443, ocp_80 : master 및 worker
</code></pre></td></tr></table>
</div>
</div><p><figure><figcaption>
            <h4>L4 구성#1</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>L4 구성#2</h4>
        </figcaption>
</figure>
</p>
<h3 id="92-nginx-l4-구성">9.2. NGINX L4 구성</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">
<span class="c1">## LB 설정</span>
cat <span class="s">&lt;&lt; EOF | tee /etc/nginx/stream.conf.d/lb.conf
</span><span class="s">
</span><span class="s">stream{
</span><span class="s">    upstream ocp_k8s_api {
</span><span class="s">        #round-robin;
</span><span class="s">        server 10.253.107.10:6443; #bootstrap
</span><span class="s">        server 10.253.107.11:6443; #master1
</span><span class="s">        server 10.253.107.12:6443; #master2
</span><span class="s">        server 10.253.107.13:6443; #master3
</span><span class="s">    }
</span><span class="s">    server {
</span><span class="s">        listen 6443;
</span><span class="s">        proxy_pass ocp_k8s_api;
</span><span class="s">    }
</span><span class="s">
</span><span class="s">
</span><span class="s">    upstream ocp_m_config {
</span><span class="s">        #round-robin;
</span><span class="s">        server 10.253.107.10:22623; #bootstrap
</span><span class="s">        server 10.253.107.11:22623; #master1
</span><span class="s">        server 10.253.107.12:22623; #master2
</span><span class="s">        server 10.253.107.13:22623; #master3
</span><span class="s">    }
</span><span class="s">    server {
</span><span class="s">        listen 22623;
</span><span class="s">        proxy_pass ocp_m_config;
</span><span class="s">    }
</span><span class="s">
</span><span class="s">    upstream ocp_http {
</span><span class="s">        #round-robin;
</span><span class="s">        server 10.253.107.11:80; #master1
</span><span class="s">        server 10.253.107.12:80; #master2
</span><span class="s">        server 10.253.107.13:80; #master3
</span><span class="s">        server 10.253.107.14:80; #worker1
</span><span class="s">        server 10.253.107.15:80; #worker2
</span><span class="s">        server 10.253.107.16:80; #worker3
</span><span class="s">    }
</span><span class="s">    server{
</span><span class="s">        listen 80;
</span><span class="s">        proxy_pass ocp_http;
</span><span class="s">    }
</span><span class="s">
</span><span class="s">    upstream ocp_https {
</span><span class="s">        #round-robin;
</span><span class="s">        server 10.253.107.11:443; #master1
</span><span class="s">        server 10.253.107.12:443; #master2
</span><span class="s">        server 10.253.107.13:443; #master3
</span><span class="s">        server 10.253.107.14:443; #worker1
</span><span class="s">        server 10.253.107.15:443; #worker2
</span><span class="s">        server 10.253.107.16:443; #worker3   
</span><span class="s">    }
</span><span class="s">    server{
</span><span class="s">        listen 443;
</span><span class="s">        proxy_pass ocp_https;
</span><span class="s">    }
</span><span class="s">}
</span><span class="s">EOF</span>


<span class="c1">## nginx restart</span>

nginx -t
systemctl restart nginx
</code></pre></td></tr></table>
</div>
</div><h2 id="10-완료-후-확인">10. 완료 후 확인</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="nb">export</span> <span class="nv">KUBECONFIG</span><span class="o">=</span>&lt;installation_directory&gt;/auth/kubeconfig

예시
<span class="nb">export</span> <span class="nv">KUBECONFIG</span><span class="o">=</span>~/ocp/auth/kubeconfig

oc whoami

oc get clusterversion
</code></pre></td></tr></table>
</div>
</div><figure><figcaption>
            <h4>완료#1</h4>
        </figcaption>
</figure>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">oc get clusteroperators

oc describe clusterversion

oc get clusterversion -o jsonpath=&#39;{.items[0].spec}{&#34;\n&#34;}&#39;
</code></pre></td></tr></table>
</div>
</div><p><figure><figcaption>
            <h4>완료#2</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>완료#3</h4>
        </figcaption>
</figure>
</p>
<h2 id="11-new-worker-node-add">11. New Worker Node Add</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="c1">## PENDING 확인</span>
kubectl get csr

<span class="c1">## PENDING 확인 후 적용</span>
oc adm certificate approve csr-bghmp csr-hd9x8 csr-hlngb
oc adm certificate approve csr-gpgv9 csr-n6lqm csr-zfws6 
</code></pre></td></tr></table>
</div>
</div><figure><figcaption>
            <h4>worker Node 추가</h4>
        </figcaption>
</figure>

<h2 id="12-계정">12. 계정</h2>
<p>Local 또는 AD을 통해 계정을 관리 할 수 있다.</p>
<h3 id="121-local-계정-생성">12.1. Local 계정 생성</h3>
<p>아래는 htpasswd를 사용 하는 방법의 대해서 구성 한다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="c1">## 우분투</span>
apt install apache2-utils -y

<span class="c1"># 유저 정보</span>
<span class="c1"># htpasswd -Bbc htpasswd {username} &#39;{password}&#39;</span>
$ htpasswd -Bbc htpasswd my1208 <span class="s1">&#39;Passw0rd&#39;</span>

cat htpasswd

oc --user<span class="o">=</span>admin create secret generic htpasswd <span class="se">\
</span><span class="se"></span>    --from-file<span class="o">=</span>htpasswd -n openshift-config

oc get secret -n openshift-config
</code></pre></td></tr></table>
</div>
</div><p><figure><figcaption>
            <h4>유저 추가</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>secret 확인</h4>
        </figcaption>
</figure>
</p>
<p>secret 추가</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">cat <span class="s">&lt;&lt; EOF | tee oauth-config.yaml
</span><span class="s"># oauth-config.yaml
</span><span class="s">apiVersion: config.openshift.io/v1
</span><span class="s">kind: OAuth
</span><span class="s">metadata:
</span><span class="s">  name: cluster
</span><span class="s">spec:
</span><span class="s">  identityProviders:
</span><span class="s">  - name: Local Password
</span><span class="s">    mappingMethod: claim
</span><span class="s">    type: HTPasswd
</span><span class="s">    htpasswd:
</span><span class="s">      fileData:
</span><span class="s">        name: htpasswd
</span><span class="s">EOF</span>

oc replace -f oauth-config.yaml

<span class="c1">## shows current user</span>
oc whoami

<span class="c1">## shows cluster web console URL</span>
oc whoami --show-console

<span class="c1">## shows cluster API URL</span>
oc whoami --show-server

<span class="c1">## shows current OAuth token</span>
oc whoami --show-token
</code></pre></td></tr></table>
</div>
</div><p><figure><figcaption>
            <h4>GUI 접속#1</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>GUI 접속#2</h4>
        </figcaption>
</figure>
</p>
<h3 id="122-ad-연동">12.2. AD 연동</h3>
<p>LDPAS를 구성하기 위한 configmap 생성</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">oc create configmap ca-config-map --from-file=ca.crt=/path/to/ca -n openshift-config
</code></pre></td></tr></table>
</div>
</div><p>만약 LDAPS로 구성을 하지 않았으면 insecure: true, ca 항목을 삭제, url을 ldap으로 변경을 해주면 된다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">oc apply -n openshift-config -f - <span class="s">&lt;&lt; EOF
</span><span class="s">apiVersion: config.openshift.io/v1
</span><span class="s">kind: OAuth
</span><span class="s">metadata:
</span><span class="s">  name: cluster
</span><span class="s">spec:
</span><span class="s">  identityProviders:
</span><span class="s">  - name: ldapidp
</span><span class="s">    mappingMethod: claim
</span><span class="s">    type: LDAP
</span><span class="s">    ldap:
</span><span class="s">      attributes:
</span><span class="s">        id:
</span><span class="s">        - dn
</span><span class="s">        email:
</span><span class="s">        - mail
</span><span class="s">        name:
</span><span class="s">        - sAMAccountName
</span><span class="s">        preferredUsername:
</span><span class="s">        - sAMAccountName
</span><span class="s">      bindDN: cn=administrator,cn=users,dc=tkg,dc=io
</span><span class="s">      bindPassword:
</span><span class="s">        name: ldap-secret
</span><span class="s">      ca:
</span><span class="s">        name: ca-config-map
</span><span class="s">      insecure: false
</span><span class="s">      url: &#34;ldaps://tanzu-dns.tkg.io/ou=tanzu,dc=tkg,dc=io?sAMAccountName&#34;
</span><span class="s">EOF</span>
</code></pre></td></tr></table>
</div>
</div><figure><figcaption>
            <h4>GUI 접속</h4>
        </figcaption>
</figure>

<h3 id="123-수동-group-sync">12.3. 수동 GROUP-SYNC</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">vi ldapsync.yaml

<span class="c1"># LDAP is case insensitive, but OpenShift is not, so all LDAP parameters have been converted to lower case as per https://access.redhat.com/solutions/3232051 (under &#34;Case Sensitivity&#34;)</span>
kind: LDAPSyncConfig
apiVersion: v1
url: ldaps://tanzu-dns.tkg.io:636
insecure: <span class="nb">false</span>
ca: <span class="s2">&#34;/data/cert/ldapserver.pem&#34;</span>                       <span class="c1">### ldaps 인증서의 실제 위치 / 파일</span>
bindDN: <span class="nv">cn</span><span class="o">=</span>administrator,cn<span class="o">=</span>users,dc<span class="o">=</span>tkg,dc<span class="o">=</span>io
bindPassword: <span class="s2">&#34;Password&#34;</span>
rfc2307:
   groupsQuery:
       baseDN: <span class="s2">&#34;ou=tanzu,dc=tkg,dc=io&#34;</span>
       scope: sub
       filter: <span class="o">(</span><span class="nv">objectClass</span><span class="o">=</span>group<span class="o">)</span>
       derefAliases: never
       timeout: <span class="m">0</span>
       pageSize: <span class="m">0</span>
   groupUIDAttribute: dn
   groupNameAttributes: <span class="o">[</span> cn <span class="o">]</span>
   groupMembershipAttributes: <span class="o">[</span> member <span class="o">]</span>
   usersQuery:
       basedn: <span class="s2">&#34;ou=tanzu,dc=tkg,dc=io&#34;</span>
       scope: sub
       derefAliases: never
       pageSize: <span class="m">0</span>
   userUIDAttribute: dn
   userNameAttributes: <span class="o">[</span> cn <span class="o">]</span>
   tolerateMemberNotFoundErrors: <span class="nb">true</span>
   tolerateMemberOutOfScopeErrors: <span class="nb">true</span>
   
<span class="c1">## 적용전 제대로 받아오는지 확인을 한다.</span>
oc adm groups sync --sync-config<span class="o">=</span>ldapsync.yaml

<span class="c1">## 확인이 끝나면 적용한다.</span>
oc adm groups sync --sync-config<span class="o">=</span>ldapsync.yaml --confirm

<span class="c1">## 권한 설정</span>
oc adm policy add-cluster-role-to-group cluster-admin tkg

<span class="c1">## 권한 삭제</span>
oc adm policy remove-cluster-role-from-group cluster-admin tkg

</code></pre></td></tr></table>
</div>
</div><figure><figcaption>
            <h4>GROUP 확인 및 적용</h4>
        </figcaption>
</figure>

<h3 id="124-cronjob-group-sync">12.4 CronJob Group-Sync</h3>
<p>위에서 LDAP을 연동 하였다면 cm , secret 이 생성 된 것을 확인 할 수 있다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="c1">## password 이름 확인</span>
<span class="nv">password</span><span class="o">=</span><span class="sb">`</span>oc get secret -n openshift-authentication <span class="p">|</span> grep v4-0-config-user-idp-0 <span class="p">|</span> awk <span class="s1">&#39;{print $1}&#39;</span><span class="sb">`</span>
oc get secret -n openshift-authentication <span class="nv">$password</span>  -o <span class="nv">jsonpath</span><span class="o">={</span>.data<span class="o">}</span>

<span class="c1">## 인증서 이름 확인</span>
<span class="nv">ca</span><span class="o">=</span><span class="sb">`</span>oc get cm -n openshift-authentication <span class="p">|</span> grep v4-0-config-user <span class="p">|</span> awk <span class="s1">&#39;{print $1}&#39;</span><span class="sb">`</span>
oc get cm -n openshift-authentication <span class="nv">$ca</span> -o <span class="nv">jsonpath</span><span class="o">={</span>.items<span class="o">[</span>0<span class="o">]</span>.data<span class="o">}</span> <span class="p">|</span> awk <span class="s1">&#39;{print $1}&#39;</span>
</code></pre></td></tr></table>
</div>
</div><p>그리고 계정 및 권한 설정을 해준다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">cat <span class="s">&lt;&lt; EOF | tee ldap-sync-sa-clusterrole.yaml
</span><span class="s">kind: ServiceAccount
</span><span class="s">apiVersion: v1
</span><span class="s">metadata:
</span><span class="s">  name: ldap-group-syncer
</span><span class="s">  namespace: openshift-authentication
</span><span class="s">  labels:
</span><span class="s">    app: cronjob-ldap-group-sync
</span><span class="s">
</span><span class="s">---
</span><span class="s">kind: ServiceAccount
</span><span class="s">apiVersion: v1
</span><span class="s">metadata:
</span><span class="s">  name: ldap-group-syncer
</span><span class="s">  namespace: openshift-authentication
</span><span class="s">  labels:
</span><span class="s">    app: cronjob-ldap-group-sync
</span><span class="s">root@ubuntu:/var/tmp/oc/ldaps#
</span><span class="s">root@ubuntu:/var/tmp/oc/ldaps# cat clusterrole.yaml
</span><span class="s">apiVersion: rbac.authorization.k8s.io/v1
</span><span class="s">kind: ClusterRole
</span><span class="s">metadata:
</span><span class="s">  name: ldap-group-syncer
</span><span class="s">  labels:
</span><span class="s">    app: cronjob-ldap-group-sync
</span><span class="s">rules:
</span><span class="s">  - apiGroups:
</span><span class="s">      - &#39;&#39;
</span><span class="s">      - user.openshift.io
</span><span class="s">    resources:
</span><span class="s">      - groups
</span><span class="s">    verbs:
</span><span class="s">      - get
</span><span class="s">      - list
</span><span class="s">      - create
</span><span class="s">      - update
</span><span class="s">
</span><span class="s">---
</span><span class="s">kind: ClusterRoleBinding
</span><span class="s">apiVersion: rbac.authorization.k8s.io/v1
</span><span class="s">metadata:
</span><span class="s">  name: ldap-group-syncer
</span><span class="s">  labels:
</span><span class="s">    app: cronjob-ldap-group-sync
</span><span class="s">subjects:
</span><span class="s">  - kind: ServiceAccount
</span><span class="s">    name: ldap-group-syncer
</span><span class="s">    namespace: openshift-authentication
</span><span class="s">roleRef:
</span><span class="s">  apiGroup: rbac.authorization.k8s.io
</span><span class="s">  kind: ClusterRole
</span><span class="s">  name: ldap-group-syncer
</span><span class="s">EOF</span>
</code></pre></td></tr></table>
</div>
</div><p>LDAP의 자동 Sync를 구성하기 위해 config-map 및 job 설정
witelist / balcklist의 경우 ldapsearch에서 distinguishedName: CN=test test,OU=tanzu,DC=tkg,DC=io 이부분의 이름으로 넣어야함. , 만약 별도로 witelist / blacklist가 필요 없으면 제거 해도 된다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">cat <span class="s">&lt;&lt; EOF | tee ldap-sync-cm-cron.yaml
</span><span class="s">kind: ConfigMap
</span><span class="s">apiVersion: v1
</span><span class="s">metadata:
</span><span class="s">  name: ldap-group-syncer
</span><span class="s">  namespace: openshift-authentication
</span><span class="s">  labels:
</span><span class="s">    app: cronjob-ldap-group-sync
</span><span class="s">data:
</span><span class="s">  ldap-group-sync.yaml: |
</span><span class="s">    kind: LDAPSyncConfig
</span><span class="s">    apiVersion: v1
</span><span class="s">    url: ldaps://tanzu-dns.tkg.io
</span><span class="s">    bindDN: cn=administrator,cn=users,dc=tkg,dc=io
</span><span class="s">    bindPassword:
</span><span class="s">      file: &#34;/etc/secrets/bindPassword&#34;                   ## 위에서 설명한 secret, cronjob에서 voluemount 후 적용
</span><span class="s">    insecure: false
</span><span class="s">    ca: &#34;/ldap-sync/ca/ca.crt&#34;                            ## 위에서 설명한 configmap, cronjob에서 voluemount 후 적용
</span><span class="s">    rfc2307:
</span><span class="s">        groupsQuery:
</span><span class="s">            baseDN: &#34;ou=tanzu,dc=tkg,dc=io&#34;
</span><span class="s">            scope: sub
</span><span class="s">            derefAliases: never
</span><span class="s">            filter: (objectclass=group)
</span><span class="s">        groupUIDAttribute: dn
</span><span class="s">        groupNameAttributes: [ cn ]
</span><span class="s">        groupMembershipAttributes: [ member ]
</span><span class="s">        usersQuery:
</span><span class="s">            baseDN: &#34;ou=tanzu,dc=tkg,dc=io&#34;
</span><span class="s">            scope: sub
</span><span class="s">            derefAliases: never
</span><span class="s">            pageSize: 0
</span><span class="s">        userUIDAttribute: dn
</span><span class="s">        userNameAttributes: [ sAMAccountName ]
</span><span class="s">        tolerateMemberNotFoundErrors: true
</span><span class="s">        tolerateMemberOutOfScopeErrors: true
</span><span class="s">---
</span><span class="s">kind: ConfigMap
</span><span class="s">apiVersion: v1
</span><span class="s">metadata:
</span><span class="s">  name: ldap-group-syncer-whitelist
</span><span class="s">  namespace: openshift-authentication
</span><span class="s">  labels:
</span><span class="s">    app: cronjob-ldap-group-sync
</span><span class="s">data:
</span><span class="s">  whitelist.txt: |
</span><span class="s">    CN=kim dokyung,OU=tanzu,DC=tkg,DC=io
</span><span class="s">
</span><span class="s">---
</span><span class="s">kind: ConfigMap
</span><span class="s">apiVersion: v1
</span><span class="s">metadata:
</span><span class="s">  name: ldap-group-syncer-blacklist
</span><span class="s">  namespace: openshift-authentication
</span><span class="s">  labels:
</span><span class="s">    app: cronjob-ldap-group-sync
</span><span class="s">data:
</span><span class="s">  blacklist.txt: |
</span><span class="s">    CN=tkg,OU=tanzu,DC=tkg,DC=io
</span><span class="s">
</span><span class="s">---
</span><span class="s">kind: CronJob
</span><span class="s">apiVersion: batch/v1beta1
</span><span class="s">metadata:
</span><span class="s">  name: ldap-group-syncer
</span><span class="s">  namespace: openshift-authentication
</span><span class="s">  labels:
</span><span class="s">    app: cronjob-ldap-group-sync
</span><span class="s">spec:
</span><span class="s">  schedule: &#34;*/1 * * * *&#34;
</span><span class="s">  concurrencyPolicy: Forbid
</span><span class="s">  successfulJobsHistoryLimit: 5
</span><span class="s">  failedJobsHistoryLimit: 5
</span><span class="s">  jobTemplate:
</span><span class="s">    metadata:
</span><span class="s">      labels:
</span><span class="s">        app: cronjob-ldap-group-sync
</span><span class="s">    spec:
</span><span class="s">      backoffLimit: 0
</span><span class="s">      template:
</span><span class="s">        metadata:
</span><span class="s">          labels:
</span><span class="s">            app: cronjob-ldap-group-sync
</span><span class="s">        spec:
</span><span class="s">          containers:
</span><span class="s">            - name: ldap-group-sync
</span><span class="s">              image: &#34;registry.redhat.io/openshift4/ose-cli:v4.7&#34;
</span><span class="s">              command:
</span><span class="s">                - &#34;/bin/bash&#34;
</span><span class="s">                - &#34;-c&#34;
</span><span class="s">                - oc adm groups sync --whitelist=/etc/whitelist/whitelist.txt --blacklist=/etc/blacklist/blacklist.txt --sync-config=/etc/config/ldap-group-sync.yaml --confirm
</span><span class="s">              volumeMounts:
</span><span class="s">                - mountPath: &#34;/etc/blacklist&#34;
</span><span class="s">                  name: &#34;ldap-sync-volume-blacklist&#34;
</span><span class="s">                - mountPath: &#34;/etc/whitelist&#34;
</span><span class="s">                  name: &#34;ldap-sync-volume-whitelist&#34;
</span><span class="s">                - mountPath: &#34;/etc/config&#34;
</span><span class="s">                  name: &#34;ldap-sync-volume&#34;
</span><span class="s">                - mountPath: &#34;/etc/secrets&#34;
</span><span class="s">                  name: &#34;ldap-bind-password&#34;
</span><span class="s">                - mountPath: &#34;/ldap-sync/ca&#34;
</span><span class="s">                  name: &#34;ldap-sync-ca&#34;
</span><span class="s">          volumes:
</span><span class="s">            - name: &#34;ldap-sync-volume-blacklist&#34;                  ## volumes을 모두 연결하여 assign
</span><span class="s">              configMap:
</span><span class="s">                name: &#34;ldap-group-syncer-blacklist&#34;
</span><span class="s">            - name: &#34;ldap-sync-volume-whitelist&#34;                  ## volumes을 모두 연결하여 assign
</span><span class="s">              configMap:
</span><span class="s">                name: &#34;ldap-group-syncer-whitelist&#34;           
</span><span class="s">            - name: &#34;ldap-sync-volume&#34;                            ## volumes을 모두 연결하여 assign
</span><span class="s">              configMap:
</span><span class="s">                name: &#34;ldap-group-syncer&#34;
</span><span class="s">            - name: &#34;ldap-sync-ca&#34;                                ## volumes을 모두 연결하여 assign
</span><span class="s">              configMap:
</span><span class="s">                name: &#34;v4-0-config-user-idp-0-ca&#34; 
</span><span class="s">            - name: &#34;ldap-bind-password&#34;                          ## volumes을 모두 연결하여 assign
</span><span class="s">              secret:
</span><span class="s">                secretName: &#34;v4-0-config-user-idp-0-bind-password&#34;
</span><span class="s">          restartPolicy: &#34;Never&#34;
</span><span class="s">          terminationGracePeriodSeconds: 30
</span><span class="s">          activeDeadlineSeconds: 500
</span><span class="s">          dnsPolicy: &#34;ClusterFirst&#34;
</span><span class="s">          serviceAccountName: &#34;ldap-group-syncer&#34;
</span><span class="s">          serviceAccount: &#34;ldap-group-syncer&#34;
</span><span class="s">EOF</span>
</code></pre></td></tr></table>
</div>
</div><p>이후에 자동으로 싱크가 되는 것을 알수 있다. 만약에 그룹을 추가 했는대 그 그룹만 막고 싶으면 blacklist, 또는 기존에 있는 것만 하고 자동 싱크 하고 싶으면 witelist를 적용 하면된다. 
흠 생각에는 그냥 witelist 방식으로만 적용하면 될 것으로 보인다. 만약에 필요 하다면 필요 없이 모든 그룹을 자동 싱크 하겠따면 witelist / blaklist는 필요 없다.</p>
<p>자동 싱크가 되었으면 해당하는 그룹에 권한을 준다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="c1">## 권한 설정</span>
oc adm policy add-cluster-role-to-group cluster-admin tkg

<span class="c1">## 권한 삭제</span>
oc adm policy remove-cluster-role-from-group cluster-admin tkg
</code></pre></td></tr></table>
</div>
</div><figure><figcaption>
            <h4>자동 sync 구성 완료</h4>
        </figcaption>
</figure>

]]></description>
</item><item>
    <title>The Documentation EKS</title>
    <link>https://huntedhappy.github.io/eks/</link>
    <pubDate>Thu, 13 Jan 2022 14:02:30 &#43;0900</pubDate>
    <author>Author</author>
    <guid>https://huntedhappy.github.io/eks/</guid>
    <description><![CDATA[<h2 id="1-eksamazon-elastic-kubernetes-service">1. EKS(Amazon Elastic Kubernetes Service)?</h2>
<p>Kubernetes를 실행하는 데 사용할 수 있는 관리형 서비스이다. 마스터노드, 워커노드를 설치, 작동 및 유지관리를 할 필요 없는 솔루션이다.</p>
<p>우선 문서가 너무 잘되어 있지만 그래도 나름 예전에 EKS를 테스트 했었던 지라 내가 테스트 했던 방법을 공유하고자 한다.</p>
<p>참고 문헌 <a href="https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/what-is-eks.html" target="_blank" rel="noopener noreffer"><i class="fas fa-link"></i> AWS </a></p>
<h3 id="11-사전설치">1.1. 사전설치</h3>
<p>우선 OS의 따라 설치해야 되는 것들이 조금 있다. (chocolatey를 설치한 이유는 chocolatey를 통해 eksctl을 배포 하기 위함)</p>
<div class="details admonition info open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-info-circle fa-fw"></i>설치 Tool<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p>Chocolatey 설치 링크 <a href="https://chocolatey.org/install" target="_blank" rel="noopener noreffer"><i class="fas fa-link"></i> chocolatey </a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="nb">Set-ExecutionPolicy</span> <span class="n">Bypass</span> <span class="n">-Scope</span> <span class="k">Process</span> <span class="n">-Force</span><span class="p">;</span> <span class="no">[System.Net.ServicePointManager]</span><span class="p">::</span><span class="n">SecurityProtocol</span> <span class="p">=</span> <span class="no">[System.Net.ServicePointManager]</span><span class="p">::</span><span class="n">SecurityProtocol</span> <span class="o">-bor</span> <span class="n">3072</span><span class="p">;</span> <span class="nb">iex </span><span class="p">((</span><span class="nb">New-Object</span> <span class="n">System</span><span class="p">.</span><span class="n">Net</span><span class="p">.</span><span class="n">WebClient</span><span class="p">).</span><span class="n">DownloadString</span><span class="p">(</span><span class="s1">&#39;https://community.chocolatey.org/install.ps1&#39;</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><p>eksctl 설치 링크 <a href="https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/eksctl.html" target="_blank" rel="noopener noreffer"><i class="fas fa-link"></i> AWS eksctl </a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="n">chocolatey</span> <span class="n">install</span> <span class="n">-y</span> <span class="n">eksctl</span> <span class="nb">aws-iam</span><span class="n">-authenticator</span>
</code></pre></td></tr></table>
</div>
</div><p>kubectl 설치 링크 <a href="https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/install-kubectl.html" target="_blank" rel="noopener noreffer"><i class="fas fa-link"></i> AWS kubectl </a></p>
<p>링크를 보게 되면 버전별로 다운로드 받을 수 있게 되어 있다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="nb">curl </span><span class="n">-o</span> <span class="n">kubectl</span><span class="p">.</span><span class="n">exe</span> <span class="n">https</span><span class="err">:</span><span class="p">//</span><span class="nb">amazon-eks</span><span class="p">.</span><span class="n">s3</span><span class="p">.</span><span class="nb">us-west</span><span class="p">-</span><span class="n">2</span><span class="p">.</span><span class="n">amazonaws</span><span class="p">.</span><span class="n">com</span><span class="p">/</span><span class="n">1</span><span class="p">.</span><span class="n">21</span><span class="p">.</span><span class="n">2</span><span class="p">/</span><span class="n">2021</span><span class="p">-</span><span class="n">07</span><span class="p">-</span><span class="n">05</span><span class="p">/</span><span class="n">bin</span><span class="p">/</span><span class="n">windows</span><span class="p">/</span><span class="n">amd64</span><span class="p">/</span><span class="n">kubectl</span><span class="p">.</span><span class="n">exe</span>
</code></pre></td></tr></table>
</div>
</div><p>awscli 설치링크 <a href="https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html" target="_blank" rel="noopener noreffer"><i class="fas fa-link"></i> AWS awscli </a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="n">msiexec</span><span class="p">.</span><span class="n">exe</span> <span class="p">/</span><span class="n">i</span> <span class="n">https</span><span class="err">:</span><span class="p">//</span><span class="n">awscli</span><span class="p">.</span><span class="n">amazonaws</span><span class="p">.</span><span class="n">com</span><span class="p">/</span><span class="n">AWSCLIV2</span><span class="p">.</span><span class="n">msi</span>
<span class="n">aws</span> <span class="p">-</span><span class="n">-version</span>
</code></pre></td></tr></table>
</div>
</div></div>
        </div>
    </div>
<h2 id="12-vpc-생성">1.2. VPC 생성</h2>
<p>CloudFormation을 통해 vpc를 자동으로 생성 해준다. 아래 링크는 현재 최신상태인지 확인이 가능.</p>
<p>eks vcp cloudformation 최신 상태 확인 링크 <a href="https://docs.aws.amazon.com/eks/latest/userguide/creating-a-vpc.html" target="_blank" rel="noopener noreffer"><i class="fas fa-link"></i> AWS eks vcp </a></p>
<p>eks vcp cloudformation 최신 파일 링크 <a href="https://amazon-eks.s3.us-west-2.amazonaws.com/cloudformation/2020-10-29/amazon-eks-vpc-private-subnets.yaml" target="_blank" rel="noopener noreffer"><i class="fas fa-link"></i> AWS eks vcp download </a></p>
<p>위에 받은 파일로 cloudformation을 설정 해주면 된다.
<figure><figcaption>
            <h4>cloud formation 설정#1</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>cloud formation 설정#2</h4>
        </figcaption>
</figure>

원하는 N/W으로 수정 후 그 이후에는 그냥 NEXT 후 CREATE만 하면 VPC가 구성이 된다.
<figure><figcaption>
            <h4>cloud formation 설정#3</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>cloud formation 설정#4</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>cloud formation 설정#5</h4>
        </figcaption>
</figure>

완료가 되면 보는 바와 같이 VPC가 생성이 된 것을 확인 할 수 있다.
<figure><figcaption>
            <h4>VPC 확인</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>Route Table 확인</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>IGW 확인</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>NAT GW 확인</h4>
        </figcaption>
</figure>
</p>
<h3 id="13-private-key등록">1.3. private key등록</h3>
<p>aws에서 ec2에 접속하기 위한 security 키를 sshkeygen으로 publickey 생성
<figure><figcaption>
            <h4>public key 생성#1</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>public key 생성#2</h4>
        </figcaption>
</figure>

<figure><figcaption>
            <h4>Notepad로 복사</h4>
        </figcaption>
</figure>
</p>
<h3 id="14-eks-실행">1.4. EKS 실행</h3>
<div class="details admonition info open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-info-circle fa-fw"></i>EKS 실행<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p>그리고 아래와 같이 명령어를 넣어 준다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="n">eksctl</span> <span class="n">create</span> <span class="n">cluster</span> <span class="p">\</span>
 <span class="p">-</span><span class="n">-name</span> <span class="nb">aws-eks</span> <span class="p">\</span>
 <span class="p">-</span><span class="n">-region</span> <span class="nb">us-east</span><span class="p">-</span><span class="n">2</span> <span class="p">\</span>
 <span class="p">-</span><span class="n">-nodegroup-name</span> <span class="nb">aws-node</span> <span class="p">\</span>
 <span class="p">-</span><span class="n">-node-type</span> <span class="n">t3</span><span class="p">.</span><span class="n">medium</span> <span class="p">\</span>
 <span class="p">-</span><span class="n">-nodes</span> <span class="n">3</span> <span class="p">\</span>
 <span class="p">-</span><span class="n">-nodes-min</span> <span class="n">1</span> <span class="p">\</span>
 <span class="p">-</span><span class="n">-nodes-max</span> <span class="n">4</span> <span class="p">\</span>
 <span class="p">-</span><span class="n">-ssh-access</span> <span class="p">\</span>
 <span class="p">-</span><span class="n">-ssh-public-key</span> <span class="n">huntedhappy</span><span class="p">.</span><span class="n">pub</span> <span class="p">\</span>
 <span class="p">-</span><span class="n">-with-oidc</span> <span class="p">\</span>
 <span class="p">-</span><span class="n">-managed</span>
</code></pre></td></tr></table>
</div>
</div><p>구성 EKS 연동 및 확인
aws eks update-kubeconfig &ndash;name aws-eks</p>
</div>
        </div>
    </div>
<p>Cloud Formation이 자동으로 돌아간다
<figure><figcaption>
            <h4>Cloud Formation</h4>
        </figcaption>
</figure>

IAM에서 OIDC가 생성 되었는지 확인 한다. OIDC는 CSI를 EFS로 구성 할 떄 필요 하다.
<figure><figcaption>
            <h4>OIDC 생성 확인</h4>
        </figcaption>
</figure>
</p>
<h2 id="2-csi-efs구성-작성예정">2. CSI EFS구성 (작성예정)</h2>
<h2 id="iam">IAM</h2>
<p>참고로 IAM은 아래와 같이 구성 하였다.
<figure><figcaption>
            <h4>IAM</h4>
        </figcaption>
</figure>
</p>
]]></description>
</item></channel>
</rss>
